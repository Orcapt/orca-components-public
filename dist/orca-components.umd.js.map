{"version":3,"file":"orca-components.umd.js","sources":["../src/utils/helpers.ts","../src/composables/parsing/markerDefinitions.ts","../src/composables/parsing/markerUtils.ts","../src/composables/parsing/markerOperations.ts","../src/composables/parsing/markerCleaner.ts","../src/composables/core/matchFinder.ts","../src/composables/parsers/baseParser.ts","../src/composables/parsers/parseCard.ts","../src/composables/parsers/parseButton.ts","../src/composables/parsers/parseAudio.ts","../src/composables/core/matchProcessor.ts","../src/composables/parsers/parseLocation.ts","../src/composables/parsers/parseTracing.ts","../src/composables/core/recursiveParser.ts","../src/composables/useContentParser.ts","../src/composables/useLoadingStates.ts","../src/composables/useCodeButtons.ts","../src/constants/loadingTypes.ts","../node_modules/dompurify/dist/purify.es.mjs","../src/composables/useMarkdown.ts","../src/components/renderers/OrcaImage.vue","../src/components/renderers/OrcaVideo.vue","../src/components/renderers/OrcaYouTube.vue","../src/components/renderers/OrcaAudio.vue","../src/components/renderers/OrcaLocation.vue","../src/components/renderers/OrcaCardList.vue","../src/components/renderers/OrcaButtons.vue","../src/components/renderers/OrcaTracing.vue","../src/components/renderers/OrcaHtml.vue","../src/components/ContentElement.vue","../src/components/loading/GeneralLoading.vue","../src/components/loading/ImageLoading.vue","../src/components/loading/VideoLoading.vue","../src/components/loading/CardLoading.vue","../src/components/loading/MapLoading.vue","../src/components/OrcaMarkdown.vue","../src/composables/useImageModal.ts","../src/index.ts"],"sourcesContent":["import type { ButtonData } from \"../types\";\n\n/**\n * Utility functions for Orca Components\n */\n\n/**\n * Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ URL ÛŒÚ© ÙØ§ÛŒÙ„ ØªØµÙˆÛŒØ±ÛŒ Ø§Ø³Øª ÛŒØ§ Ø®ÛŒØ±\n */\nexport function isImageFile(url: string): boolean {\n  const imageExtensions = [\n    \".jpg\",\n    \".jpeg\",\n    \".png\",\n    \".gif\",\n    \".webp\",\n    \".bmp\",\n    \".svg\",\n  ];\n  try {\n    const urlObj = new URL(url);\n    const pathname = urlObj.pathname.toLowerCase();\n    return imageExtensions.some((ext) => pathname.endsWith(ext));\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ø§Ø² URL\n */\nexport function getFileNameFromUrl(url: string): string | null {\n  try {\n    const urlObj = new URL(url);\n    const pathname = urlObj.pathname;\n    const segments = pathname.split(\"/\");\n    const encodedFileName = segments.pop() || \"\";\n    return decodeURIComponent(encodedFileName);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Ø§Ø³ØªØ®Ø±Ø§Ø¬ YouTube ID Ø§Ø² URL\n */\nexport function getYouTubeId(url: string): string {\n  const regExp =\n    /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\n  const match = url.match(regExp);\n  return match && match[7].length === 11 ? match[7] : \"\";\n}\n\n/**\n * ØªØ¨Ø¯ÛŒÙ„ Ù†Ø§Ù… Ø±Ù†Ú¯ Vuetify\n */\nexport function getVuetifyColor(colorName?: string): string {\n  if (!colorName) return \"#1976D2\"; // primary blue\n\n  // Map Vuetify color names to hex values\n  const colorMap: Record<string, string> = {\n    primary: \"#1976D2\",\n    secondary: \"#424242\",\n    success: \"#4CAF50\",\n    info: \"#2196F3\",\n    warning: \"#FB8C00\",\n    error: \"#FF5252\",\n    accent: \"#82B1FF\",\n  };\n\n  // If it's a Vuetify color name, return the hex value\n  if (colorMap[colorName.toLowerCase()]) {\n    return colorMap[colorName.toLowerCase()];\n  }\n\n  // If it's already a hex color or other valid CSS color, return it\n  return colorName;\n}\n\n/**\n * Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø±Ø¯ÛŒÙ\n */\nexport function getGroupedButtons(buttons: ButtonData[]): ButtonData[][] {\n  const rows: Record<number, ButtonData[]> = {};\n\n  buttons.forEach((button) => {\n    const row = button.row || 1;\n    if (!rows[row]) {\n      rows[row] = [];\n    }\n    rows[row].push(button);\n  });\n\n  // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¢Ø±Ø§ÛŒÙ‡ Ùˆ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ\n  return Object.keys(rows)\n    .sort((a, b) => parseInt(a) - parseInt(b))\n    .map((row) => rows[parseInt(row)]);\n}\n\n/**\n * ØªÙˆÙ„ÛŒØ¯ ID ÛŒÚ©ØªØ§ Ø¨Ø±Ø§ÛŒ container Ù†Ù‚Ø´Ù‡\n */\nexport function generateMapId(index: number): string {\n  return `map-container-${index}-${Date.now()}-${Math.random()\n    .toString(36)\n    .substr(2, 9)}`;\n}\n\n/**\n * Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† marker Ù‡Ø§ÛŒ orca Ø§Ø² Ù…ØªÙ†\n */\nexport function cleanOrcaMarkers(text: string): string {\n  return text.replace(/\\[orca\\..*?\\]/g, \"\").trim();\n}\n\n/**\n * Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ù…Ø­ØªÙˆØ§ loading marker Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ø®ÛŒØ±\n */\nexport function hasLoadingMarkers(content: string): boolean {\n  return /\\[orca\\.(?:loading|image\\.loading|loading\\.image)\\.start\\]/.test(\n    content\n  );\n}\n\n/**\n * Ø§Ø³ØªØ®Ø±Ø§Ø¬ style Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ outlined\n */\nexport function getOutlinedButtonStyle(color?: string): Record<string, string> {\n  if (!color) return {};\n  const hexColor = getVuetifyColor(color);\n  return {\n    border: `1px solid ${hexColor}`,\n    color: hexColor,\n    \"background-color\": \"transparent\",\n  };\n}\n\n/**\n * Ø§Ø³ØªØ®Ø±Ø§Ø¬ style Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ outlined\n */\nexport function getOutlinedButtonTextStyle(\n  color?: string\n): Record<string, string> {\n  if (!color) return {};\n  const hexColor = getVuetifyColor(color);\n  return {\n    color: hexColor,\n    \"background-color\": \"transparent\",\n  };\n}\n\n/**\n * Ø§Ø³ØªØ®Ø±Ø§Ø¬ style Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÚ©ÙˆÙ† append\n */\nexport function getAppendIconStyle(color?: string): Record<string, string> {\n  if (!color) return {};\n  const hexColor = getVuetifyColor(color);\n  return {\n    color: hexColor,\n    fill: hexColor,\n  };\n}\n","import type { ContentPartType } from \"../../types\";\n\n/**\n * Marker Types - Pure Data\n * No logic, just type definitions\n */\n\nexport type MarkerConfig = {\n  type: ContentPartType;\n  start: string;\n  end: string;\n};\n\n/**\n * All marker definitions - Single Source of Truth\n * ONLY data, no functions\n */\nexport const MARKERS: MarkerConfig[] = [\n  // Loading markers (general)\n  {\n    type: \"general-loading\",\n    start: \"[orca.loading.start]\",\n    end: \"[orca.loading.end]\",\n  },\n  {\n    type: \"thinking-loading\",\n    start: \"[orca.loading.thinking.start]\",\n    end: \"[orca.loading.thinking.end]\",\n  },\n  {\n    type: \"searching-loading\",\n    start: \"[orca.loading.searching.start]\",\n    end: \"[orca.loading.searching.end]\",\n  },\n  {\n    type: \"coding-loading\",\n    start: \"[orca.loading.coding.start]\",\n    end: \"[orca.loading.coding.end]\",\n  },\n  {\n    type: \"analyzing-loading\",\n    start: \"[orca.loading.analyzing.start]\",\n    end: \"[orca.loading.analyzing.end]\",\n  },\n  {\n    type: \"generating-loading\",\n    start: \"[orca.loading.generating.start]\",\n    end: \"[orca.loading.generating.end]\",\n  },\n  {\n    type: \"custom-loading\",\n    start: \"[orca.loading.custom.start]\",\n    end: \"[orca.loading.custom.end]\",\n  },\n\n  // Loading markers (content-specific)\n  {\n    type: \"image-loading\",\n    start: \"[orca.loading.image.start]\",\n    end: \"[orca.loading.image.end]\",\n  },\n  {\n    type: \"video-loading\",\n    start: \"[orca.loading.video.start]\",\n    end: \"[orca.loading.video.end]\",\n  },\n  {\n    type: \"youtube-loading\",\n    start: \"[orca.loading.youtube.start]\",\n    end: \"[orca.loading.youtube.end]\",\n  },\n  {\n    type: \"card-loading\",\n    start: \"[orca.loading.card.list.start]\",\n    end: \"[orca.loading.card.list.end]\",\n  },\n  {\n    type: \"map-loading\",\n    start: \"[orca.loading.map.start]\",\n    end: \"[orca.loading.map.end]\",\n  },\n  {\n    type: \"html-loading\",\n    start: \"[orca.loading.html.start]\",\n    end: \"[orca.loading.html.end]\",\n  },\n\n  // Content markers\n  { type: \"image\", start: \"[orca.image.start]\", end: \"[orca.image.end]\" },\n  { type: \"video\", start: \"[orca.video.start]\", end: \"[orca.video.end]\" },\n  {\n    type: \"youtube\",\n    start: \"[orca.youtube.start]\",\n    end: \"[orca.youtube.end]\",\n  },\n  {\n    type: \"card\",\n    start: \"[orca.list.card.start]\",\n    end: \"[orca.list.card.end]\",\n  },\n  {\n    type: \"location\",\n    start: \"[orca.location.start]\",\n    end: \"[orca.location.end]\",\n  },\n  {\n    type: \"buttons\",\n    start: \"[orca.buttons.start]\",\n    end: \"[orca.buttons.end]\",\n  },\n  {\n    type: \"tracing\",\n    start: \"[orca.tracing.start]\",\n    end: \"[orca.tracing.end]\",\n  },\n  { type: \"audio\", start: \"[orca.audio.start]\", end: \"[orca.audio.end]\" },\n  { type: \"html\", start: \"[orca.html.start]\", end: \"[orca.html.end]\" },\n];\n\n/**\n * General loading type names - Derived from MARKERS\n * Single source of truth for general loading types\n */\nexport const GENERAL_LOADING_TYPES = [\n  \"general-loading\",\n  \"thinking-loading\",\n  \"searching-loading\",\n  \"coding-loading\",\n  \"analyzing-loading\",\n  \"generating-loading\",\n  \"custom-loading\",\n] as const;\n","import type { ContentPartType } from \"../../types\";\nimport {\n  MARKERS,\n  GENERAL_LOADING_TYPES,\n  type MarkerConfig,\n} from \"./markerDefinitions\";\n\n/**\n * Marker Utilities - Pure Functions\n * No side effects, stateless\n */\n\n/**\n * Escape special regex characters\n */\nexport function escapeRegex(str: string): string {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n\n/**\n * Create regex pattern from marker config\n */\nexport function createMarkerPattern(config: MarkerConfig): RegExp {\n  const start = escapeRegex(config.start);\n  const end = escapeRegex(config.end);\n  return new RegExp(`${start}(.*?)${end}`, \"s\");\n}\n\n/**\n * Pattern definition for matching\n */\nexport type PatternDefinition = {\n  type: ContentPartType;\n  regex: RegExp;\n};\n\n/**\n * Generate patterns from markers\n */\nexport function generatePatterns(markers: MarkerConfig[]): PatternDefinition[] {\n  return markers.map((marker) => ({\n    type: marker.type,\n    regex: createMarkerPattern(marker),\n  }));\n}\n\n/**\n * Auto-generated patterns from marker configs\n */\nexport const CONTENT_PATTERNS: PatternDefinition[] = generatePatterns(MARKERS);\n\n/**\n * Filter markers by predicate\n */\nexport function filterMarkers(\n  markers: MarkerConfig[],\n  predicate: (marker: MarkerConfig) => boolean\n): MarkerConfig[] {\n  return markers.filter(predicate);\n}\n\n/**\n * Get marker config by type\n */\nexport function getMarkerByType(\n  markers: MarkerConfig[],\n  type: ContentPartType\n): MarkerConfig | undefined {\n  return markers.find((m) => m.type === type);\n}\n\n/**\n * Check if type is loading type\n */\nexport function isLoadingType(type: ContentPartType): boolean {\n  return type.includes(\"-loading\");\n}\n\n/**\n * Check if type is general loading type\n * Uses the centralized list from markerDefinitions\n */\nexport function isGeneralLoadingType(type: ContentPartType): boolean {\n  return GENERAL_LOADING_TYPES.includes(type as any);\n}\n\n/**\n * Get markers by category\n */\nexport function getMarkersByCategory(\n  markers: MarkerConfig[],\n  category: \"loading\" | \"content\"\n): MarkerConfig[] {\n  if (category === \"loading\") {\n    return filterMarkers(markers, (m) => isLoadingType(m.type));\n  }\n  return filterMarkers(markers, (m) => !isLoadingType(m.type));\n}\n\n/**\n * Get general loading markers\n */\nexport function getGeneralLoadingMarkers(\n  markers: MarkerConfig[]\n): MarkerConfig[] {\n  return filterMarkers(markers, (m) => isGeneralLoadingType(m.type));\n}\n\n/**\n * Get content markers (non-loading)\n */\nexport function getContentMarkers(markers: MarkerConfig[]): MarkerConfig[] {\n  return filterMarkers(markers, (m) => !isLoadingType(m.type));\n}\n","/**\n * Marker Cleaner - Pure Operations\n * All functions are pure, stateless, and composable\n */\n\nimport type { MarkerConfig } from \"./markerDefinitions\";\nimport { createMarkerPattern } from \"./markerUtils\";\n\n/**\n * Remove markers from content using pattern\n * @param content - Content to clean\n * @param pattern - Regex pattern to match\n * @param preserveContent - Keep matched content (group 1) or remove entirely\n */\nfunction removeByPattern(\n  content: string,\n  pattern: RegExp,\n  preserveContent: boolean\n): string {\n  return content.replace(pattern, preserveContent ? \"$1\" : \"\");\n}\n\n/**\n * Remove markers from content\n * @param content - Content to clean\n * @param markers - Markers to remove\n * @param preserveContent - Keep content between markers or remove entirely\n */\nexport function removeMarkers(\n  content: string,\n  markers: MarkerConfig[],\n  preserveContent: boolean = false\n): string {\n  let cleaned = content;\n\n  for (const marker of markers) {\n    const pattern = createMarkerPattern(marker);\n    cleaned = removeByPattern(cleaned, pattern, preserveContent);\n  }\n\n  return cleaned;\n}\n\n/**\n * Remove only loading markers (preserves content between them)\n */\nexport function removeLoadingMarkers(\n  content: string,\n  loadingMarkers: MarkerConfig[]\n): string {\n  return removeMarkers(content, loadingMarkers, true);\n}\n\n/**\n * Remove content markers (removes everything)\n */\nexport function removeContentMarkers(\n  content: string,\n  contentMarkers: MarkerConfig[]\n): string {\n  return removeMarkers(content, contentMarkers, false);\n}\n\n/**\n * Remove all markers with different strategies\n * @param content - Content to clean\n * @param loadingMarkers - Loading markers (preserve content)\n * @param contentMarkers - Content markers (remove everything)\n */\nexport function removeAllMarkers(\n  content: string,\n  loadingMarkers: MarkerConfig[],\n  contentMarkers: MarkerConfig[]\n): string {\n  // First remove loading markers (preserve content)\n  let cleaned = removeLoadingMarkers(content, loadingMarkers);\n\n  // Then remove content markers (remove everything)\n  cleaned = removeContentMarkers(cleaned, contentMarkers);\n\n  return cleaned;\n}\n","/**\n * Marker Cleaner Facade\n * Provides convenient API using pure functions from markerOperations\n */\n\nimport { MARKERS } from \"./markerDefinitions\";\nimport { getGeneralLoadingMarkers, getContentMarkers } from \"./markerUtils\";\nimport { removeLoadingMarkers, removeAllMarkers } from \"./markerOperations\";\n\n/**\n * Pre-computed marker sets for performance\n */\nconst GENERAL_LOADING_MARKERS = getGeneralLoadingMarkers(MARKERS);\nconst CONTENT_MARKERS = getContentMarkers(MARKERS);\n\n/**\n * Remove only loading markers (preserves content between them)\n * Used when processing complete loading blocks\n */\nexport function removeOnlyLoadingMarkers(content: string): string {\n  return removeLoadingMarkers(content, GENERAL_LOADING_MARKERS);\n}\n\n/**\n * Remove complete markers (with both start and end)\n * Preserves incomplete loading markers (only start, no end)\n * Used for cleaning text before matches\n */\nexport function removeCompleteMarkers(content: string): string {\n  return removeAllMarkers(content, GENERAL_LOADING_MARKERS, CONTENT_MARKERS);\n}\n","import type { ContentPartType } from \"../../types\";\nimport { CONTENT_PATTERNS } from \"../parsing\";\n\nexport type MatchCandidate = {\n  type: ContentPartType;\n  match: RegExpMatchArray | null;\n  index: number;\n};\n\nexport type ValidMatch = MatchCandidate & { match: RegExpMatchArray };\n\n/**\n * Find all matches in content\n */\nexport function findMatches(content: string): ValidMatch[] {\n  const matches: MatchCandidate[] = CONTENT_PATTERNS.map(({ type, regex }) => {\n    const match = content.match(regex);\n    return {\n      type,\n      match,\n      index: match ? content.indexOf(match[0]) : Infinity,\n    };\n  });\n\n  return matches.filter(\n    (m): m is ValidMatch => m.match !== null && m.index !== Infinity\n  );\n}\n","/**\n * Base Parser Utilities\n * Common logic for all YAML-like parsers\n */\n\n/**\n * Field definition for parsing\n */\nexport type FieldDef = {\n  name: string;\n  type?: \"string\" | \"number\";\n  required?: boolean;\n  defaultValue?: any; // Default value if extraction fails\n};\n\n/**\n * Create a regex pattern to extract a field value\n * Uses lookahead to match until next field or end\n * Handles multi-line values with indentation and zero-width spaces\n */\nfunction createFieldPattern(\n  fieldName: string,\n  allFieldNames: string[]\n): RegExp {\n  // Create lookahead for all other fields\n  const otherFields = allFieldNames\n    .filter((f) => f !== fieldName)\n    .map((f) => `${f}:`)\n    .join(\"|\");\n\n  // Pattern that:\n  // 1. Matches fieldName:\n  // 2. Captures value (including spaces, zero-width spaces, newlines with indentation)\n  // 3. Stops at next field (at start of line or after spaces) or end of block\n\n  // Match value until we see another field at any position or end of string\n  const pattern = `${fieldName}:\\\\s*([\\\\s\\\\S]*?)(?=\\\\s*(?:${otherFields})|$)`;\n  return new RegExp(pattern, \"m\");\n}\n\n/**\n * Extract field value from block using regex\n * Cleans zero-width spaces and trims whitespace\n */\nfunction extractField(\n  block: string,\n  fieldName: string,\n  allFieldNames: string[]\n): string {\n  const pattern = createFieldPattern(fieldName, allFieldNames);\n  const match = block.match(pattern);\n\n  if (!match || !match[1]) {\n    return \"\";\n  }\n\n  let value = match[1];\n\n  // Remove zero-width spaces (\\u200b)\n  value = value.replace(/\\u200b/g, \"\");\n\n  // For single-line fields, get only the first line\n  const firstLine = value.split(\"\\n\")[0];\n\n  return firstLine.trim();\n}\n\n/**\n * Parse YAML-like list format into array of objects\n *\n * @example\n * ```\n * - field1: value1\n *   field2: value2\n * - field1: value3  field2: value4\n * ```\n */\nexport function parseYamlList<T>(\n  payload: string,\n  fields: FieldDef[],\n  mapper: (extracted: Record<string, any>) => T\n): T[] {\n  const fieldNames = fields.map((f) => f.name);\n\n  const blocks = payload\n    .split(\"- \")\n    .map((block) => block.trim())\n    .filter((block) => block);\n\n  const results = blocks.map((block) => {\n    const extracted: Record<string, any> = {};\n\n    // Extract all fields\n    for (const field of fields) {\n      const value = extractField(block, field.name, fieldNames);\n\n      // Type conversion with fallback to default\n      if (field.type === \"number\") {\n        const num = parseInt(value, 10);\n        extracted[field.name] = Number.isFinite(num)\n          ? num\n          : field.defaultValue !== undefined\n          ? field.defaultValue\n          : undefined;\n      } else {\n        // Use extracted value, or default value, or empty string for required, or undefined\n        extracted[field.name] =\n          value ||\n          (field.defaultValue !== undefined\n            ? field.defaultValue\n            : field.required\n            ? \"\"\n            : undefined);\n      }\n    }\n\n    // Map to final type\n    return mapper(extracted);\n  });\n\n  return results;\n}\n\n/**\n * Parse simple key-value format\n *\n * @example\n * ```\n * key1: value1\n * key2: value2\n * ```\n */\nexport function parseKeyValue(\n  payload: string,\n  fields: string[]\n): Record<string, string> {\n  const result: Record<string, string> = {};\n\n  for (const field of fields) {\n    const pattern = createFieldPattern(field, fields);\n    const match = payload.match(pattern);\n    result[field] = match?.[1]?.trim() || \"\";\n  }\n\n  return result;\n}\n","import type { CardData } from \"../../types\";\nimport { parseYamlList, type FieldDef } from \"./baseParser\";\n\n/**\n * Parse card data from YAML-like format\n *\n * @template\n * - photo: https://example.com/image.jpg\n *   header: Card Title\n *   subheader: Card Subtitle\n */\nconst CARD_FIELDS: FieldDef[] = [\n  {\n    name: \"photo\",\n    required: true,\n    defaultValue: \"https://via.placeholder.com/300x200\",\n  },\n  { name: \"header\", required: true, defaultValue: \"Card Title\" },\n  { name: \"subheader\", defaultValue: \"\" },\n];\n\nexport function parseCard(payload: string): CardData[] {\n  return parseYamlList(payload, CARD_FIELDS, (data) => ({\n    photo: data.photo || \"\",\n    header: data.header || \"\",\n    subheader: data.subheader || \"\",\n  }));\n}\n","import type { ButtonData } from \"../../types\";\nimport { parseYamlList, type FieldDef } from \"./baseParser\";\n\n/**\n * Parse button data from YAML-like format\n *\n * @template\n * - type: action\n *   label: Get More Info\n *   id: 1\n *   row: 1\n *   color: blue\n */\nconst BUTTON_FIELDS: FieldDef[] = [\n  { name: \"type\", required: true, defaultValue: \"action\" },\n  { name: \"label\", required: true, defaultValue: \"Button\" },\n  { name: \"url\", defaultValue: undefined },\n  { name: \"id\", type: \"number\", defaultValue: undefined },\n  { name: \"color\", defaultValue: \"primary\" },\n  { name: \"row\", type: \"number\", defaultValue: 1 },\n];\n\nexport function parseButton(payload: string): ButtonData[] {\n  const result = parseYamlList(payload, BUTTON_FIELDS, (data) => {\n    const type: ButtonData[\"type\"] = data.type === \"link\" ? \"link\" : \"action\";\n\n    return {\n      type,\n      label: data.label || \"\",\n      url: data.url,\n      id: data.id,\n      color: data.color,\n      row: data.row,\n    };\n  });\n\n  return result;\n}\n","import type { AudioData } from \"../../types\";\nimport { parseYamlList, type FieldDef } from \"./baseParser\";\n\n/**\n * Parse audio data from YAML-like format\n *\n * @template\n * - label: Sample Audio 1\n *   url: https://example.com/audio1.mp3\n *   type: audio/mpeg\n */\nconst AUDIO_FIELDS: FieldDef[] = [\n  { name: \"label\", required: true, defaultValue: \"Audio Track\" },\n  { name: \"url\", required: true, defaultValue: \"\" },\n  { name: \"type\", required: true, defaultValue: \"audio/mpeg\" },\n];\n\nexport function parseAudio(payload: string): AudioData[] {\n  return parseYamlList(payload, AUDIO_FIELDS, (data) => ({\n    label: data.label || \"\",\n    url: data.url || \"\",\n    type: data.type || \"\",\n  }));\n}\n","import type { ContentPart, ContentPartType } from \"../../types\";\nimport {\n  parseCard,\n  parseButton,\n  parseAudio,\n  parseLocation,\n  parseTracing,\n} from \"../parsers\";\n\n/**\n * Check if content type is loading type\n * Based on naming convention: all loading types end with \"-loading\"\n */\nfunction isLoadingType(type: ContentPartType): boolean {\n  return type.includes(\"-loading\");\n}\n\n/**\n * Content Type Categories\n */\nconst SIMPLE_CONTENT_TYPES = [\"image\", \"video\", \"youtube\", \"html\"] as const;\n\ntype SimpleContentType = (typeof SIMPLE_CONTENT_TYPES)[number];\n\n/**\n * Parser mapping for complex content types\n */\nconst PARSER_MAP: Record<string, (payload: string) => any> = {\n  card: parseCard,\n  location: parseLocation,\n  buttons: parseButton,\n  tracing: parseTracing,\n  audio: parseAudio,\n};\n\n/**\n * Process match and return content part\n *\n * @param type - Content type to process\n * @param payload - Content payload\n * @returns ContentPart or null for loading types\n */\nexport function processMatch(\n  type: ContentPartType,\n  payload: string\n): ContentPart | null {\n  // All loading types are handled separately (return null)\n  if (isLoadingType(type)) {\n    return null;\n  }\n\n  // Simple content types (URL strings)\n  if (SIMPLE_CONTENT_TYPES.includes(type as SimpleContentType)) {\n    return { type, content: payload } as ContentPart;\n  }\n\n  // Complex content types (use parser)\n  const parser = PARSER_MAP[type];\n  if (parser) {\n    const content = parser(payload);\n    return { type, content };\n  }\n  return null;\n}\n","import type { LocationData } from \"../../types\";\n\n/**\n * Parse location data from comma-separated coordinates\n *\n * @template\n * 35.6892, 51.3890\n *\n * @example\n * \"35.6892, 51.3890\" -> { latitude: 35.6892, longitude: 51.3890 }\n */\nexport function parseLocation(payload: string): LocationData {\n  const [latitude, longitude] = payload.split(\",\").map((coord) => coord.trim());\n  const parsedLatitude = parseFloat(latitude);\n  const parsedLongitude = parseFloat(longitude);\n  return {\n    latitude: Number.isFinite(parsedLatitude) ? parsedLatitude : 0,\n    longitude: Number.isFinite(parsedLongitude) ? parsedLongitude : 0,\n  };\n}\n","import type { TracingData } from \"../../types\";\n\n/**\n * Parse tracing data from YAML-like format\n *\n * @template\n * visibility: all\n * content: {\"request_id\": \"req_123\", \"status\": \"success\"}\n */\nexport function parseTracing(payload: string): TracingData {\n  // Extract visibility (single line)\n  const visibilityMatch = payload.match(/visibility:\\s*(\\w+)/);\n  const visibility =\n    (visibilityMatch?.[1] as TracingData[\"visibility\"]) || \"all\";\n\n  // Extract content (everything after \"content:\")\n  const contentMatch = payload.match(/content:\\s*([\\s\\S]*)/);\n  const content = contentMatch?.[1]?.trim() || payload;\n\n  return {\n    visibility,\n    content,\n    rawContent: payload,\n  };\n}\n","import type { ContentPart, ContentPartType } from \"../../types\";\nimport { removeCompleteMarkers } from \"../parsing\";\nimport { GENERAL_LOADING_TYPES } from \"../parsing/markerDefinitions\";\nimport { findMatches } from \"./matchFinder\";\nimport { processMatch } from \"./matchProcessor\";\n\n/**\n * Check if type is a general loading type\n * Uses the centralized list from parsing/markerDefinitions\n */\nfunction isGeneralLoadingType(type: ContentPartType): boolean {\n  return GENERAL_LOADING_TYPES.includes(type as any);\n}\n\n/**\n * Parse content recursively to extract all parts\n * Used when extracting content from inside loading markers\n */\nexport function parseContentRecursively(content: string): ContentPart[] {\n  const parts: ContentPart[] = [];\n  let remainingContent = content;\n  let iteration = 0;\n  const maxIterations = 100;\n\n  while (remainingContent.length > 0 && iteration < maxIterations) {\n    iteration++;\n    const matches = findMatches(remainingContent);\n\n    if (matches.length === 0) {\n      const cleanText = removeCompleteMarkers(remainingContent).trim();\n      if (cleanText) {\n        parts.push({ type: \"text\", content: cleanText });\n      }\n      break;\n    }\n\n    const firstMatch = matches.reduce((prev, current) =>\n      prev.index < current.index ? prev : current\n    );\n\n    const shouldSkip = isGeneralLoadingType(firstMatch.type);\n\n    const textBefore = remainingContent.substring(0, firstMatch.index);\n    const cleanTextBefore = removeCompleteMarkers(textBefore).trim();\n    if (cleanTextBefore) {\n      parts.push({ type: \"text\", content: cleanTextBefore });\n    }\n\n    if (!shouldSkip) {\n      const matchPayload = (firstMatch.match[1] ?? \"\").trim();\n      const part = processMatch(firstMatch.type, matchPayload);\n      if (part) {\n        parts.push(part);\n      }\n    }\n\n    const matchEnd = firstMatch.index + firstMatch.match[0].length;\n    remainingContent = remainingContent.substring(matchEnd);\n  }\n\n  return parts;\n}\n","import { computed, unref, type ComputedRef, type MaybeRef } from \"vue\";\nimport type { ContentPart } from \"../types\";\nimport {\n  removeCompleteMarkers,\n  removeOnlyLoadingMarkers,\n  MARKERS,\n} from \"./parsing\";\nimport { findMatches, processMatch, parseContentRecursively } from \"./core\";\n\n/**\n * Composable for parsing Orca content markers\n * Supports both reactive and non-reactive values for streaming compatibility\n */\nexport function useContentParser(\n  description: MaybeRef<string>\n): ComputedRef<ContentPart[]> {\n  return computed<ContentPart[]>(() => {\n    const content = unref(description);\n    return parseContent(content || \"\");\n  });\n}\n\n/**\n * Strip trailing incomplete marker blocks during streaming.\n * If content has [orca.X.start] without a matching [orca.X.end],\n * remove everything from that opening marker onwards so the user\n * doesn't see raw marker text / JSON building up char by char.\n */\nfunction stripIncompleteMarkers(content: string): string {\n  let result = content;\n  for (const marker of MARKERS) {\n    const startIdx = result.lastIndexOf(marker.start);\n    if (startIdx === -1) continue;\n    // Check if there's a matching end marker after this start\n    const afterStart = result.substring(startIdx + marker.start.length);\n    if (!afterStart.includes(marker.end)) {\n      // Incomplete block: strip from the start marker onwards\n      result = result.substring(0, startIdx);\n    }\n  }\n  return result;\n}\n\n/**\n * Parse content into parts\n * Extracted for testability\n */\nexport function parseContent(content: string): ContentPart[] {\n  const parts: ContentPart[] = [];\n  let remainingContent = stripIncompleteMarkers(content);\n  let iteration = 0;\n  const MAX_ITERATIONS = 100;\n\n  while (remainingContent.length > 0 && iteration < MAX_ITERATIONS) {\n    iteration++;\n\n    const matches = findMatches(remainingContent);\n\n    // No matches: add remaining text and exit\n    if (matches.length === 0) {\n      addCleanTextIfExists(parts, remainingContent);\n      break;\n    }\n\n    // Get earliest match\n    const firstMatch = matches.reduce((prev, current) =>\n      prev.index < current.index ? prev : current\n    );\n\n    // Add text before match\n    const textBefore = remainingContent.substring(0, firstMatch.index);\n    addCleanTextIfExists(parts, textBefore);\n\n    // Process the match\n    processMatchAndAddParts(parts, firstMatch);\n\n    // Move to next section\n    const matchEnd = firstMatch.index + firstMatch.match[0].length;\n    remainingContent = remainingContent.substring(matchEnd);\n  }\n\n  return parts;\n}\n\n/**\n * Add cleaned text to parts if it exists\n */\nfunction addCleanTextIfExists(parts: ContentPart[], text: string): void {\n  const cleanText = removeCompleteMarkers(text).trim();\n  if (cleanText) {\n    parts.push({ type: \"text\", content: cleanText });\n  }\n}\n\n/**\n * Process match and add resulting parts\n */\nfunction processMatchAndAddParts(\n  parts: ContentPart[],\n  match: { type: any; match: RegExpMatchArray; index: number }\n): void {\n  const matchPayload = (match.match[1] ?? \"\").trim();\n  const isLoadingType = match.type.includes(\"-loading\");\n\n  // Empty loading marker - skip\n  if (isLoadingType && !matchPayload) {\n    return;\n  }\n\n  // Loading marker with content - parse recursively\n  if (isLoadingType && matchPayload) {\n    const cleanPayload = removeOnlyLoadingMarkers(matchPayload);\n    if (cleanPayload.trim()) {\n      const nestedParts = parseContentRecursively(cleanPayload);\n      parts.push(...nestedParts);\n    }\n    return;\n  }\n\n  // Regular content type\n  const part = processMatch(match.type, matchPayload);\n  if (part) {\n    parts.push(part);\n  }\n}\n","import { computed, ref, unref, watch, type MaybeRef } from \"vue\";\n\n/**\n * Loading marker patterns for detection\n */\nconst LOADING_PATTERNS = {\n  general: {\n    start: \"[orca.loading.start]\",\n    end: \"[orca.loading.end]\",\n  },\n  thinking: {\n    start: \"[orca.loading.thinking.start]\",\n    end: \"[orca.loading.thinking.end]\",\n  },\n  searching: {\n    start: \"[orca.loading.searching.start]\",\n    end: \"[orca.loading.searching.end]\",\n  },\n  coding: {\n    start: \"[orca.loading.coding.start]\",\n    end: \"[orca.loading.coding.end]\",\n  },\n  analyzing: {\n    start: \"[orca.loading.analyzing.start]\",\n    end: \"[orca.loading.analyzing.end]\",\n  },\n  generating: {\n    start: \"[orca.loading.generating.start]\",\n    end: \"[orca.loading.generating.end]\",\n  },\n  custom: {\n    start: \"[orca.loading.custom.start]\",\n    end: \"[orca.loading.custom.end]\",\n  },\n  image: {\n    start: \"[orca.loading.image.start]\",\n    end: \"[orca.loading.image.end]\",\n    actual: /\\[orca\\.image\\.start\\](.*?)\\[orca\\.image\\.end\\]/s,\n  },\n  video: {\n    start: \"[orca.loading.video.start]\",\n    end: \"[orca.loading.video.end]\",\n    actual: /\\[orca\\.video\\.start\\](.*?)\\[orca\\.video\\.end\\]/s,\n  },\n  youtube: {\n    start: \"[orca.loading.youtube.start]\",\n    end: \"[orca.loading.youtube.end]\",\n    actual: /\\[orca\\.youtube\\.start\\](.*?)\\[orca\\.youtube\\.end\\]/s,\n  },\n  card: {\n    start: \"[orca.loading.card.start]\",\n    end: \"[orca.loading.card.end]\",\n    actual: /\\[orca\\.list\\.card\\.start\\](.*?)\\[orca\\.list\\.card\\.end\\]/s,\n  },\n  map: {\n    start: \"[orca.loading.map.start]\",\n    end: \"[orca.loading.map.end]\",\n    actual: /\\[orca\\.location\\.start\\](.*?)\\[orca\\.location\\.end\\]/s,\n  },\n} as const;\n\n/**\n * Loading messages for different types\n */\nconst LOADING_MESSAGES: Record<string, string> = {\n  \"general-loading\": \"â³ Loading...\",\n  \"thinking-loading\": \"ğŸ¤” Thinking...\",\n  \"searching-loading\": \"ğŸ” Searching...\",\n  \"coding-loading\": \"ğŸ’» Coding...\",\n  \"analyzing-loading\": \"ğŸ“Š Analyzing...\",\n  \"generating-loading\": \"âœ¨ Generating...\",\n  \"custom-loading\": \"â³ Processing...\",\n  \"image-loading\": \"ğŸ–¼ï¸ Loading image...\",\n  \"video-loading\": \"ğŸ¥ Loading video...\",\n  \"youtube-loading\": \"ğŸ“º Loading YouTube video...\",\n  \"card-loading\": \"ğŸƒ Loading cards...\",\n  \"map-loading\": \"ğŸ—ºï¸ Loading map...\",\n} as const;\n\n/**\n * Check if a loading state is active (start exists, end doesn't exist)\n */\nfunction isActiveLoading(\n  content: string,\n  startPattern: string,\n  endPattern: string\n): boolean {\n  const hasStart = content.includes(startPattern);\n  const hasEnd = content.includes(endPattern);\n  return hasStart && !hasEnd;\n}\n\n/**\n * Check if a content-specific loading state is active\n */\nfunction isActiveContentLoading(\n  content: string,\n  startPattern: string,\n  endPattern: string,\n  actualPattern?: RegExp\n): boolean {\n  const hasStart = content.includes(startPattern);\n  const hasEnd = content.includes(endPattern);\n  const hasActual = actualPattern ? actualPattern.test(content) : false;\n  return hasStart && !hasEnd && !hasActual;\n}\n\n/**\n * Composable for managing loading states\n * Optimized with computed properties and memoization\n */\nexport function useLoadingStates(description: MaybeRef<string>) {\n  const isLoading = ref(false);\n  const isImageLoading = ref(false);\n  const isVideoLoading = ref(false);\n  const isCardLoading = ref(false);\n  const isLocationLoading = ref(false);\n\n  // Memoized computed for description value\n  const descriptionValue = computed(() => {\n    return unref(description);\n  });\n\n  // Watch for general and semantic loading states\n  watch(\n    descriptionValue,\n    (val) => {\n      if (!val) {\n        isLoading.value = false;\n        return;\n      }\n\n      // Check all semantic loading types\n      const hasActiveLoading =\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.general.start,\n          LOADING_PATTERNS.general.end\n        ) ||\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.thinking.start,\n          LOADING_PATTERNS.thinking.end\n        ) ||\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.searching.start,\n          LOADING_PATTERNS.searching.end\n        ) ||\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.coding.start,\n          LOADING_PATTERNS.coding.end\n        ) ||\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.analyzing.start,\n          LOADING_PATTERNS.analyzing.end\n        ) ||\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.generating.start,\n          LOADING_PATTERNS.generating.end\n        ) ||\n        isActiveLoading(\n          val,\n          LOADING_PATTERNS.custom.start,\n          LOADING_PATTERNS.custom.end\n        );\n\n      isLoading.value = hasActiveLoading;\n    },\n    { immediate: true }\n  );\n\n  // Watch for image loading\n  watch(\n    descriptionValue,\n    (val) => {\n      isImageLoading.value = isActiveContentLoading(\n        val,\n        LOADING_PATTERNS.image.start,\n        LOADING_PATTERNS.image.end,\n        LOADING_PATTERNS.image.actual\n      );\n    },\n    { immediate: true }\n  );\n\n  // Watch for video loading (includes YouTube)\n  watch(\n    descriptionValue,\n    (val) => {\n      const videoLoading = isActiveContentLoading(\n        val,\n        LOADING_PATTERNS.video.start,\n        LOADING_PATTERNS.video.end,\n        LOADING_PATTERNS.video.actual\n      );\n      const youtubeLoading = isActiveContentLoading(\n        val,\n        LOADING_PATTERNS.youtube.start,\n        LOADING_PATTERNS.youtube.end,\n        LOADING_PATTERNS.youtube.actual\n      );\n      isVideoLoading.value = videoLoading || youtubeLoading;\n    },\n    { immediate: true }\n  );\n\n  // Watch for card loading\n  watch(\n    descriptionValue,\n    (val) => {\n      isCardLoading.value = isActiveContentLoading(\n        val,\n        LOADING_PATTERNS.card.start,\n        LOADING_PATTERNS.card.end,\n        LOADING_PATTERNS.card.actual\n      );\n    },\n    { immediate: true }\n  );\n\n  // Watch for location/map loading\n  watch(\n    descriptionValue,\n    (val) => {\n      isLocationLoading.value = isActiveContentLoading(\n        val,\n        LOADING_PATTERNS.map.start,\n        LOADING_PATTERNS.map.end,\n        LOADING_PATTERNS.map.actual\n      );\n    },\n    { immediate: true }\n  );\n\n  /**\n   * Get loading message for a specific type\n   */\n  const getLoadingMessage = (loadingType: string): string => {\n    return LOADING_MESSAGES[loadingType] || LOADING_MESSAGES[\"general-loading\"];\n  };\n\n  return {\n    isLoading,\n    isImageLoading,\n    isVideoLoading,\n    isCardLoading,\n    isLocationLoading,\n    getLoadingMessage,\n  };\n}\n","import { nextTick, onMounted, type Ref } from \"vue\";\n\n/**\n * SVG icons for code buttons\n */\nconst COPY_ICON = `\n  <div class=\"d-flex align-center\">\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect x=\"6.66675\" y=\"6.66675\" width=\"10\" height=\"10\" rx=\"2\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.9\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M13.3333 6.66659V4.99992C13.3333 4.07944 12.5871 3.33325 11.6666 3.33325H4.99992C4.07944 3.33325 3.33325 4.07944 3.33325 4.99992V11.6666C3.33325 12.5871 4.07944 13.3333 4.99992 13.3333H6.66659\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.9\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n    <span style=\"color:rgb(var(--v-theme-on-surface)); font-feature-settings: 'liga' off, 'clig' off; font-family: Inter; font-size: 12px; font-style: normal; font-weight: 400; line-height: 24px;\">Copy</span>\n  </div>\n`;\n\nconst COPIED_ICON = `\n  <div class=\"d-flex align-center\">\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M4.16663 9.99992L8.33329 14.1666L16.6666 5.83325\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.5\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n    <span style=\"color: rgb(var(--v-theme-on-surface)); font-feature-settings: 'liga' off, 'clig' off; font-family: Inter; font-size: 12px; font-style: normal; font-weight: 400; line-height: 24px;\"> Copied</span>\n  </div>\n`;\n\nconst COLLAPSE_ICON = `\n  <div class=\"d-flex align-center\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n      <path d=\"M7.5 14.1667L10 11.6667L12.5 14.1667\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.9\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M7.5 5.83325L10 8.33325L12.5 5.83325\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.9\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n    <span style=\"color: rgb(var(--v-theme-on-surface)); font-feature-settings: 'liga' off, 'clig' off; font-family: Inter; font-size: 12px; font-style: normal; font-weight: 400; line-height: 24px;\"> Collapse</span>\n  </div>\n`;\n\nconst EXPAND_ICON = `\n  <div class=\"d-flex align-center\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n      <path d=\"M7.5 14.1667L10 11.6667L12.5 14.1667\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.9\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      <path d=\"M7.5 5.83325L10 8.33325L12.5 5.83325\" stroke=\"rgb(var(--v-theme-on-surface))\" stroke-opacity=\"0.9\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n    <span style=\"color: rgb(var(--v-theme-on-surface)); font-feature-settings: 'liga' off, 'clig' off; font-family: Inter; font-size: 12px; font-style: normal; font-weight: 400; line-height: 24px;\"> Expand</span>\n  </div>\n`;\n\n/**\n * Copy code to clipboard with visual feedback\n */\nasync function copyToClipboard(\n  text: string,\n  button: HTMLElement\n): Promise<void> {\n  try {\n    await navigator.clipboard.writeText(text);\n    button.innerHTML = COPIED_ICON;\n    setTimeout(() => {\n      button.innerHTML = COPY_ICON;\n    }, 2000);\n  } catch (error) {\n    console.error(\"Failed to copy code:\", error);\n  }\n}\n\n/**\n * Toggle code block collapse/expand\n */\nfunction toggleCodeBlock(wrapper: HTMLElement, button: HTMLElement): void {\n  const isCollapsed = wrapper.classList.contains(\"collapsed\");\n  if (isCollapsed) {\n    wrapper.classList.remove(\"collapsed\");\n    wrapper.style.maxHeight = \"\";\n    wrapper.style.overflow = \"\";\n    button.innerHTML = COLLAPSE_ICON;\n  } else {\n    wrapper.classList.add(\"collapsed\");\n    const height = wrapper.scrollHeight;\n    wrapper.style.maxHeight = `${height}px`;\n    // Force reflow\n    wrapper.offsetHeight;\n    wrapper.style.maxHeight = \"0px\";\n    wrapper.style.overflow = \"hidden\";\n    button.innerHTML = EXPAND_ICON;\n  }\n}\n\n/**\n * Create and attach code buttons to a code block\n */\nfunction attachCodeButtons(block: Element): void {\n  if (block.closest(\".code-container\")) return;\n\n  const codeContainer = document.createElement(\"div\");\n  codeContainer.className = \"code-container\";\n\n  const codeWrapper = document.createElement(\"div\");\n  codeWrapper.className = \"code-wrapper\";\n  codeWrapper.style.transition = \"max-height 0.3s ease, opacity 0.3s ease\";\n  codeWrapper.style.overflow = \"hidden\";\n  codeWrapper.appendChild(block.cloneNode(true));\n\n  const buttonsContainer = document.createElement(\"div\");\n  buttonsContainer.className = \"buttons-container\";\n\n  // Copy button\n  const copyButton = document.createElement(\"button\");\n  copyButton.innerHTML = COPY_ICON;\n  copyButton.className = \"copy-btn\";\n  copyButton.onclick = () => {\n    const code = block.querySelector(\"code\")?.innerText || \"\";\n    copyToClipboard(code, copyButton);\n  };\n\n  // Collapse button\n  const collapseButton = document.createElement(\"button\");\n  collapseButton.innerHTML = COLLAPSE_ICON;\n  collapseButton.className = \"collapse-btn\";\n  collapseButton.onclick = () => {\n    toggleCodeBlock(codeWrapper, collapseButton);\n  };\n\n  buttonsContainer.appendChild(collapseButton);\n  buttonsContainer.appendChild(copyButton);\n  codeContainer.appendChild(buttonsContainer);\n  codeContainer.appendChild(codeWrapper);\n  block.replaceWith(codeContainer);\n}\n\n/**\n * Composable for managing code block copy/collapse buttons\n * Optimized with debouncing and efficient DOM manipulation\n */\nexport function useCodeButtons(\n  containerRef: Ref<HTMLElement | null>,\n  shouldAddButtons: () => boolean\n) {\n  /**\n   * Add copy and collapse buttons to all code blocks\n   */\n  const addCodeButtons = () => {\n    nextTick(() => {\n      if (!containerRef.value || !shouldAddButtons()) return;\n\n      const codeBlocks = containerRef.value.querySelectorAll(\"pre\");\n      codeBlocks.forEach((block) => {\n        attachCodeButtons(block);\n      });\n    });\n  };\n\n  // Initialize on mount\n  onMounted(() => {\n    addCodeButtons();\n  });\n\n  return {\n    addCodeButtons,\n  };\n}\n","/**\n * Loading content part types that should be filtered out\n * These are handled separately in the loading indicators section\n */\nexport const LOADING_CONTENT_TYPES = [\n  \"general-loading\",\n  \"thinking-loading\",\n  \"searching-loading\",\n  \"coding-loading\",\n  \"analyzing-loading\",\n  \"generating-loading\",\n  \"custom-loading\",\n  \"image-loading\",\n  \"video-loading\",\n  \"youtube-loading\",\n  \"card-loading\",\n  \"map-loading\",\n] as const;\n\n/**\n * Type guard to check if a content part is a loading type\n */\nexport function isLoadingType(\n  type: string\n): type is (typeof LOADING_CONTENT_TYPES)[number] {\n  return LOADING_CONTENT_TYPES.includes(type as any);\n}\n","/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(func, thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    return func.apply(thisArg, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(Func) {\n  return function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return construct(Func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'search', 'section', 'select', 'shadow', 'slot', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'enterkeyhint', 'exportparts', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'inputmode', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'part', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'exportparts', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inert', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'part', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'slot', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'mask-type', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.3.1';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Config object to store ADD_TAGS/ADD_ATTR functions (when used as functions) */\n  const EXTRA_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    }\n  }));\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (Â§7.3.3)\n   *   - DOM Tree Accessors (Â§3.1.5)\n   *   - Form Element Parent-Child Relations (Â§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (Â§4.8.5)\n   *   - HTMLCollection (Â§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (typeof cfg.ADD_TAGS === 'function') {\n        EXTRA_ELEMENT_HANDLING.tagCheck = cfg.ADD_TAGS;\n      } else {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_ATTR) {\n      if (typeof cfg.ADD_ATTR === 'function') {\n        EXTRA_ELEMENT_HANDLING.attributeCheck = cfg.ADD_ATTR;\n      } else {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    if (cfg.ADD_FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.ADD_FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!(EXTRA_ELEMENT_HANDLING.tagCheck instanceof Function && EXTRA_ELEMENT_HANDLING.tagCheck(tagName)) && (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName])) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (EXTRA_ELEMENT_HANDLING.attributeCheck instanceof Function && EXTRA_ELEMENT_HANDLING.attributeCheck(lcName, lcTag)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName, lcTag)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title|textarea)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Make sure we cannot easily use animated hrefs, even if animations are allowed */\n      if (lcName === 'attributename' && stringMatch(value, 'href')) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","import MarkdownIt from \"markdown-it\";\nimport hljs from \"highlight.js\";\nimport markdownItLinkAttributes from \"markdown-it-link-attributes\";\nimport markdownItKatex from \"markdown-it-katex\";\nimport DOMPurify from \"dompurify\";\nimport \"highlight.js/styles/stackoverflow-light.css\";\nimport \"katex/dist/katex.min.css\";\n\n// Simple HTML escape function\nconst escapeCodeHtml = (value: string): string => {\n  const map: Record<string, string> = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#039;\",\n  };\n  return value.replace(/[&<>\"']/g, (m) => map[m]);\n};\n\n// Initialize markdown parser once\nconst md = new MarkdownIt({\n  html: true,\n  linkify: true,\n  typographer: true,\n  highlight: (str, lang) => {\n    if (lang && hljs.getLanguage(lang)) {\n      try {\n        return `<pre><code class=\"hljs\">${\n          hljs.highlight(str, { language: lang }).value\n        }</code></pre>`;\n      } catch {\n        // Fallback to escaped HTML\n      }\n    }\n    return `<pre><code class=\"hljs\">${escapeCodeHtml(str)}</code></pre>`;\n  },\n})\n  .use(markdownItKatex)\n  .use(markdownItLinkAttributes, {\n    pattern: /^https?:\\/\\//,\n    attrs: {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n    },\n  });\n\n/**\n * Composable for rendering markdown with KaTeX support\n */\nexport function useMarkdown() {\n  /**\n   * Render markdown text to HTML\n   * @param text - Markdown text to render\n   * @returns Rendered HTML\n   */\n  const render = (text: string): string => {\n    const cleanText = text.replace(/\\[orca\\..*?\\]/g, \"\").trim();\n    if (!cleanText) return \"\";\n    const rawHtml = md.render(cleanText);\n    return DOMPurify.sanitize(rawHtml, {\n      ADD_ATTR: [\"style\"],\n    });\n  };\n\n  return { render };\n}\n","<template>\n  <div class=\"image-container tw-my-4\">\n    <div class=\"image-wrapper\">\n      <img\n        :src=\"url\"\n        alt=\"Generated image\"\n        class=\"orca-image\"\n        loading=\"lazy\"\n        @click=\"openModal\"\n      />\n      <div class=\"image-overlay\">\n        <div class=\"zoom-icon\">\n          <svg\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          >\n            <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n            <path d=\"m21 21-4.35-4.35\"></path>\n            <line x1=\"11\" y1=\"8\" x2=\"11\" y2=\"14\"></line>\n            <line x1=\"8\" y1=\"11\" x2=\"14\" y2=\"11\"></line>\n          </svg>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/**\n * OrcaImage - Renders image content\n * Displays images with modal zoom functionality and modern UI\n */\nconst props = defineProps<{\n  url: string;\n}>();\n\nconst emit = defineEmits<{\n  (e: \"open-modal\", url: string): void;\n}>();\n\nconst openModal = () => {\n  emit(\"open-modal\", props.url);\n};\n</script>\n\n<style scoped>\n.image-container {\n  display: inline-block;\n}\n\n.image-wrapper {\n  position: relative;\n  display: inline-block;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n}\n\n.image-wrapper:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n}\n\n.orca-image {\n  width: 300px;\n  height: 300px;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.image-wrapper:hover .orca-image {\n  transform: scale(1.05);\n}\n\n.image-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.3s ease;\n  pointer-events: none;\n}\n\n.image-wrapper:hover .image-overlay {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n.zoom-icon {\n  color: white;\n  opacity: 0;\n  transform: scale(0.8);\n  transition: all 0.3s ease;\n}\n\n.image-wrapper:hover .zoom-icon {\n  opacity: 1;\n  transform: scale(1);\n}\n\n@media (min-width: 1024px) {\n  .orca-image {\n    width: 303px;\n    height: 303px;\n  }\n}\n</style>\n","<template>\n  <div class=\"orca-video-container\">\n    <div class=\"video-wrapper\">\n      <video-player\n        :options=\"{\n          ...videoOptions,\n          sources: [\n            {\n              type: 'video/mp4',\n              src: url,\n            },\n          ],\n        }\"\n        class=\"video-player-custom\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { VideoPlayer } from \"@videojs-player/vue\";\nimport \"video.js/dist/video-js.css\";\nimport type { VideoPlayerOptions } from \"../../types\";\n\n/**\n * OrcaVideo - Renders video content using Video.js\n * Provides professional video playback with controls\n */\nconst props = defineProps<{\n  url: string;\n}>();\n\nconst videoOptions = ref<VideoPlayerOptions>({\n  autoplay: false,\n  controls: true,\n  responsive: true,\n  fluid: true,\n  sources: [\n    {\n      type: \"video/mp4\",\n      src: \"\",\n    },\n  ],\n});\n</script>\n\n<style scoped>\n.orca-video-container {\n  margin: 24px 0;\n}\n\n.video-wrapper {\n  width: 100%;\n  max-width: 500px;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: #000;\n}\n\n.video-wrapper:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15),\n    0 10px 10px -5px rgba(0, 0, 0, 0.06);\n}\n\n.video-player-custom {\n  width: 100%;\n  max-width: 100%;\n  border-radius: 16px;\n  overflow: hidden;\n}\n</style>\n","<template>\n  <div class=\"orca-youtube-container\">\n    <div class=\"youtube-wrapper\">\n      <iframe\n        width=\"100%\"\n        height=\"100%\"\n        :src=\"embedUrl\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        allowfullscreen\n        class=\"youtube-iframe\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { getYouTubeId } from \"../../utils/helpers\";\n\n/**\n * OrcaYouTube - Renders YouTube video embed\n * Converts YouTube URLs to embed format and displays in iframe\n */\nconst props = defineProps<{\n  url: string;\n}>();\n\nconst embedUrl = computed(() => {\n  const videoId = getYouTubeId(props.url);\n  return `https://www.youtube.com/embed/${videoId}`;\n});\n</script>\n\n<style scoped>\n.orca-youtube-container {\n  margin: 24px 0;\n}\n\n.youtube-wrapper {\n  width: 100%;\n  max-width: 500px;\n  height: 300px;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: #000;\n}\n\n.youtube-wrapper:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15),\n    0 10px 10px -5px rgba(0, 0, 0, 0.06);\n}\n\n.youtube-iframe {\n  border-radius: 16px;\n  display: block;\n}\n\n@media (min-width: 1024px) {\n  .youtube-wrapper {\n    height: 350px;\n  }\n}\n</style>\n","<template>\n  <div class=\"orca-audio-container\">\n    <div class=\"audio-list\">\n      <div\n        v-for=\"(audio, audioIndex) in audioItems\"\n        :key=\"audioIndex\"\n        class=\"audio-item\"\n      >\n        <div class=\"audio-icon-wrapper\">\n          <svg\n            class=\"audio-icon\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              d=\"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3\"\n            />\n          </svg>\n        </div>\n        <div class=\"audio-content\">\n          <p class=\"audio-label\">{{ audio.label }}</p>\n          <audio controls class=\"audio-player\" :type=\"audio.type\">\n            <source :src=\"audio.url\" :type=\"audio.type\" />\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { AudioData } from \"../../types\";\n\n/**\n * OrcaAudio - Renders audio player content\n * Displays multiple audio tracks with modern UI design\n */\ndefineProps<{\n  audioItems: AudioData[];\n}>();\n</script>\n\n<style scoped>\n.orca-audio-container {\n  margin: 24px 0;\n}\n\n.audio-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.audio-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n  padding: 16px;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 12px;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.audio-item:hover {\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  transform: translateY(-2px);\n  border-color: rgba(0, 0, 0, 0.1);\n}\n\n.audio-icon-wrapper {\n  flex-shrink: 0;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(59, 130, 246, 0.3);\n}\n\n.audio-icon {\n  width: 24px;\n  height: 24px;\n  color: white;\n}\n\n.audio-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.audio-label {\n  font-size: 14px;\n  font-weight: 600;\n  color: #1f2937;\n  margin-bottom: 12px;\n  line-height: 1.4;\n}\n\n.audio-player {\n  width: 100%;\n  height: 40px;\n  border-radius: 8px;\n  outline: none;\n}\n\n.audio-player::-webkit-media-controls-panel {\n  background-color: white;\n  border-radius: 8px;\n}\n\n.audio-player::-webkit-media-controls-play-button {\n  background-color: #3b82f6;\n  border-radius: 50%;\n}\n</style>\n","<template>\n  <div class=\"orca-location-container\">\n    <!-- MAPBOX FUNCTIONALITY DISABLED - token removed for security -->\n    <div class=\"map-placeholder\">\n      <svg\n        width=\"48\"\n        height=\"48\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"#94a3b8\"\n        stroke-width=\"1.5\"\n      >\n        <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\n        <circle cx=\"12\" cy=\"10\" r=\"3\" />\n      </svg>\n      <span class=\"placeholder-text\">Map view temporarily unavailable</span>\n    </div>\n    <div class=\"location-info\">\n      <div class=\"location-icon\">\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\n          <circle cx=\"12\" cy=\"10\" r=\"3\" />\n        </svg>\n      </div>\n      <span class=\"location-text\">\n        {{ latitude.toFixed(6) }}, {{ longitude.toFixed(6) }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/**\n * OrcaLocation - Renders location content\n * Mapbox integration disabled â€” displays coordinates only\n */\ndefineProps<{\n  latitude: number;\n  longitude: number;\n  mapboxToken?: string;\n}>();\n</script>\n\n<style scoped>\n.orca-location-container {\n  margin: 24px 0;\n}\n\n.map-placeholder {\n  width: 100%;\n  max-width: 500px;\n  height: 300px;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n}\n\n.placeholder-text {\n  font-size: 14px;\n  color: #94a3b8;\n  font-weight: 500;\n}\n\n.location-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-top: 12px;\n  padding: 8px 12px;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 8px;\n  width: fit-content;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n.location-icon {\n  width: 16px;\n  height: 16px;\n  color: #3b82f6;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.location-text {\n  font-size: 13px;\n  font-weight: 500;\n  color: #4b5563;\n  font-family: \"Monaco\", \"Menlo\", \"Ubuntu Mono\", monospace;\n}\n</style>\n","<template>\n  <div class=\"orca-card-container\">\n    <VCard v-for=\"(card, i) in cards\" :key=\"i\" class=\"orca-card\" elevation=\"2\">\n      <div v-if=\"card.photo\" class=\"card-image-wrapper\">\n        <VImg :src=\"card.photo\" height=\"223\" cover class=\"card-image\" />\n      </div>\n      <VCardItem class=\"card-content\">\n        <VCardTitle v-if=\"card.header\" class=\"card-header\">\n          {{ card.header }}\n        </VCardTitle>\n        <span v-if=\"card.subheader\" class=\"card-subheader\">{{\n          card.subheader\n        }}</span>\n        <p v-if=\"card.text\" class=\"card-text\">\n          {{ card.text }}\n        </p>\n      </VCardItem>\n    </VCard>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { VCard, VCardItem, VCardTitle, VImg } from \"vuetify/components\";\nimport type { CardData } from \"../../types\";\n\n/**\n * OrcaCardList - Renders card list content\n * Displays multiple cards in a responsive grid layout with modern UI\n */\ndefineProps<{\n  cards: CardData[];\n}>();\n</script>\n\n<style scoped>\n.orca-card-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n  gap: 20px;\n  margin: 24px 0;\n}\n\n@media (min-width: 1024px) {\n  .orca-card-container {\n    grid-template-columns: repeat(auto-fill, minmax(311px, 1fr));\n  }\n}\n\n.orca-card {\n  width: 100%;\n  border-radius: 16px;\n  overflow: hidden;\n  background: white;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n}\n\n.orca-card:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  border-color: rgba(0, 0, 0, 0.12);\n}\n\n.card-image-wrapper {\n  overflow: hidden;\n  background: #f5f5f5;\n}\n\n.card-image {\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  padding: 16px;\n  border-radius: 8px;\n}\n\n.orca-card:hover .card-image {\n  transform: scale(1.05);\n}\n\n.card-content {\n  padding: 16px;\n}\n\n.card-header {\n  font-weight: 600;\n  font-size: 16px;\n  color: #1f2937;\n  margin-bottom: 4px;\n  line-height: 1.4;\n}\n\n.card-subheader {\n  display: block;\n  color: #6b7280;\n  font-size: 14px;\n  margin-bottom: 8px;\n  line-height: 1.5;\n}\n\n.card-text {\n  color: #4b5563;\n  font-size: 14px;\n  margin-top: 8px;\n  line-height: 1.6;\n}\n</style>\n","<template>\n  <div class=\"orca-buttons-container tw-my-4\">\n    <div\n      v-for=\"(row, rowIndex) in groupedButtons\"\n      :key=\"rowIndex\"\n      class=\"button-row\"\n    >\n      <VBtn\n        :disabled=\"disabled\"\n        v-for=\"(button, index) in row\"\n        :key=\"index\"\n        :class=\"['orca-button', 'custom-outlined-button']\"\n        :style=\"getOutlinedButtonStyle(button.color)\"\n        variant=\"text\"\n        rounded=\"xl\"\n        :target=\"button.type === 'link' ? '_blank' : undefined\"\n        :href=\"button.type === 'link' ? button.url : undefined\"\n        @click=\"handleButtonClick(button)\"\n      >\n        <template #append v-if=\"button.type === 'link'\">\n          <VIcon\n            icon=\"tabler-external-link\"\n            :style=\"getAppendIconStyle(button.color)\"\n            size=\"small\"\n          />\n        </template>\n        <span :style=\"getOutlinedButtonTextStyle(button.color)\">{{\n          button.label\n        }}</span>\n      </VBtn>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\nimport { VBtn, VIcon } from \"vuetify/components\";\nimport type { ButtonData } from \"../../types\";\nimport {\n  getGroupedButtons,\n  getOutlinedButtonStyle,\n  getOutlinedButtonTextStyle,\n  getAppendIconStyle,\n} from \"../../utils/helpers\";\n\n/**\n * OrcaButtons - Renders interactive buttons\n * Supports both action buttons (emit events) and link buttons (open URLs)\n */\nconst props = defineProps<{\n  buttons: ButtonData[];\n  disabled?: boolean;\n}>();\n\nconst emit = defineEmits<{\n  (e: \"button-click\", button: ButtonData): void;\n}>();\n\nconst groupedButtons = computed(() => getGroupedButtons(props.buttons));\n\nconst handleButtonClick = (button: ButtonData) => {\n  if (button.type === \"action\" && !props.disabled) {\n    emit(\"button-click\", button);\n  }\n};\n</script>\n\n<style scoped>\n.orca-buttons-container {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.button-row {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  width: fit-content;\n}\n\n.orca-button {\n  position: relative;\n  overflow: hidden;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  font-weight: 500;\n  letter-spacing: 0.01em;\n  min-height: 40px;\n  padding: 0 20px;\n}\n\n.orca-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.orca-button:active:not(:disabled) {\n  transform: translateY(0);\n}\n\n.orca-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n@media (max-width: 640px) {\n  .button-row {\n    flex-direction: column;\n    width: 100%;\n  }\n\n  .orca-button {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"shouldShow\" class=\"orca-trace-container\">\n    <VCard class=\"trace-card\" elevation=\"2\">\n      <!-- Header -->\n      <div class=\"trace-header\">\n        <div class=\"trace-header-content\">\n          <div class=\"trace-icon\">\n            <svg\n              width=\"20\"\n              height=\"20\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"\n            >\n              <path\n                d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"\n              />\n            </svg>\n          </div>\n          <strong class=\"trace-title\">Trace Log</strong>\n        </div>\n        <VBtn\n          size=\"small\"\n          variant=\"tonal\"\n          color=\"primary\"\n          class=\"trace-toggle-btn\"\n          @click=\"toggleTrace\"\n        >\n          {{ isVisible ? \"Hide\" : \"Show\" }}\n        </VBtn>\n      </div>\n\n      <!-- Body -->\n      <VExpandTransition>\n        <div v-if=\"isVisible\" class=\"trace-content\">\n          <pre class=\"trace-pre\">{{ tracingContent }}</pre>\n        </div>\n      </VExpandTransition>\n    </VCard>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from \"vue\";\nimport { VBtn, VCard, VExpandTransition } from \"vuetify/components\";\nimport type { TracingData } from \"../../types\";\n\n/**\n * OrcaTracing - Renders tracing/debug log content\n * Displays trace logs with expand/collapse functionality\n */\nconst props = defineProps<{\n  tracingData: TracingData | TracingData[];\n  visibility?: \"all\" | \"admin\";\n  isAdmin?: boolean;\n}>();\n\nconst traceVisible = ref(false);\n\nconst isVisible = computed(() => traceVisible.value);\n\nconst shouldShow = computed(() => {\n  if (Array.isArray(props.tracingData)) {\n    return props.tracingData.some(\n      (item) =>\n        item.visibility === \"all\" ||\n        (item.visibility === \"admin\" && props.isAdmin)\n    );\n  }\n\n  return (\n    props.tracingData.visibility === \"all\" ||\n    (props.tracingData.visibility === \"admin\" && props.isAdmin)\n  );\n});\n\nconst tracingContent = computed(() => {\n  if (Array.isArray(props.tracingData)) {\n    return props.tracingData\n      .map((item) => item.content || item.rawContent)\n      .join(\"\\n\\n\");\n  }\n\n  return props.tracingData.content || props.tracingData.rawContent || \"\";\n});\n\nconst toggleTrace = () => {\n  traceVisible.value = !traceVisible.value;\n};\n</script>\n\n<style scoped>\n.orca-trace-container {\n  margin: 24px 0;\n}\n\n.trace-card {\n  border-radius: 12px;\n  overflow: hidden;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  max-width: 100%;\n}\n\n@media (min-width: 768px) {\n  .trace-card {\n    max-width: 600px;\n  }\n}\n\n.trace-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.trace-header-content {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.trace-icon {\n  width: 24px;\n  height: 24px;\n  color: #3b82f6;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.trace-title {\n  font-size: 13px;\n  font-weight: 600;\n  color: #1f2937;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.trace-toggle-btn {\n  font-weight: 500;\n  text-transform: none;\n  letter-spacing: 0;\n}\n\n.trace-content {\n  padding: 16px;\n  background: #fafafa;\n}\n\n.trace-pre {\n  white-space: pre-wrap;\n  font-family: \"Monaco\", \"Menlo\", \"Ubuntu Mono\", \"Consolas\", \"source-code-pro\",\n    monospace;\n  font-size: 12px;\n  line-height: 1.6;\n  color: #374151;\n  margin: 0;\n  padding: 12px;\n  background: white;\n  border-radius: 8px;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  overflow-x: auto;\n}\n</style>\n","<template>\n  <div class=\"orca-html-container\">\n    <div class=\"html-wrapper\">\n      <iframe\n        ref=\"iframeRef\"\n        :srcdoc=\"wrappedHtml\"\n        sandbox=\"allow-scripts\"\n        class=\"html-iframe\"\n        @load=\"handleIframeLoad\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from \"vue\";\n\n/**\n * OrcaHtml - Renders HTML content in a sandboxed iframe\n * Used for interactive content like matplotlib plots, Plotly charts, etc.\n * \n * Security: Uses sandbox=\"allow-scripts\" which allows JavaScript execution\n * but prevents access to parent page cookies, localStorage, and DOM.\n */\nconst props = defineProps<{\n  content: string;\n}>();\n\nconst iframeRef = ref<HTMLIFrameElement | null>(null);\nconst iframeHeight = ref(400);\n\n/**\n * Sanitize HTML content by removing XML declarations and DOCTYPE\n * that would be invalid inside an HTML document body.\n * This is needed for matplotlib SVG output which includes these.\n */\nconst sanitizeContent = (content: string): string => {\n  // Remove XML declaration (e.g., <?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?>)\n  let sanitized = content.replace(/<\\?xml[^?]*\\?>/gi, '');\n  \n  // Remove DOCTYPE declarations (e.g., <!DOCTYPE svg PUBLIC ...>)\n  sanitized = sanitized.replace(/<!DOCTYPE[^>]*>/gi, '');\n  \n  return sanitized.trim();\n};\n\n/**\n * Wrap the HTML content with proper styling and resize script\n */\nconst wrappedHtml = computed(() => {\n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    * {\n      box-sizing: border-box;\n    }\n    html, body {\n      margin: 0;\n      padding: 0;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;\n      background: transparent;\n      overflow: hidden;\n    }\n    body {\n      padding: 8px;\n    }\n    /* SVG responsiveness for matplotlib */\n    svg {\n      max-width: 100%;\n      height: auto;\n    }\n    /* Plotly container responsiveness */\n    .plotly-graph-div {\n      width: 100% !important;\n    }\n  </style>\n</head>\n<body>\n  ${sanitizeContent(props.content)}\n  <script>\n    // Auto-resize iframe based on content\n    function sendHeight() {\n      const height = Math.max(\n        document.body.scrollHeight,\n        document.body.offsetHeight,\n        document.documentElement.scrollHeight,\n        document.documentElement.offsetHeight\n      );\n      window.parent.postMessage({ type: 'orca-html-resize', height: height + 16 }, '*');\n    }\n    \n    // Initial send\n    setTimeout(sendHeight, 100);\n    \n    // Send on resize\n    window.addEventListener('resize', sendHeight);\n    \n    // Send when images/content loads\n    document.addEventListener('DOMContentLoaded', sendHeight);\n    window.addEventListener('load', sendHeight);\n    \n    // Observe DOM changes for dynamic content (like Plotly)\n    const observer = new MutationObserver(sendHeight);\n    observer.observe(document.body, { childList: true, subtree: true, attributes: true });\n  <\\/script>\n</body>\n</html>`;\n});\n\n/**\n * Handle iframe load event\n */\nconst handleIframeLoad = () => {\n  // Initial height adjustment attempt\n  adjustHeight();\n};\n\n/**\n * Adjust iframe height based on content\n */\nconst adjustHeight = () => {\n  if (iframeRef.value) {\n    try {\n      // Try to get content height (may fail due to cross-origin)\n      const doc = iframeRef.value.contentDocument;\n      if (doc && doc.body) {\n        const height = Math.max(doc.body.scrollHeight, doc.body.offsetHeight);\n        if (height > 0) {\n          iframeHeight.value = height + 16;\n        }\n      }\n    } catch (e) {\n      // Cross-origin, rely on postMessage\n    }\n  }\n};\n\n/**\n * Listen for resize messages from iframe\n */\nconst handleMessage = (event: MessageEvent) => {\n  if (event.data && event.data.type === 'orca-html-resize') {\n    const newHeight = event.data.height;\n    if (newHeight && newHeight > 0) {\n      iframeHeight.value = Math.min(newHeight, 800); // Max height cap\n    }\n  }\n};\n\nonMounted(() => {\n  window.addEventListener('message', handleMessage);\n});\n\nonUnmounted(() => {\n  window.removeEventListener('message', handleMessage);\n});\n</script>\n\n<style scoped>\n.orca-html-container {\n  margin: 16px 0;\n}\n\n.html-wrapper {\n  width: 100%;\n  max-width: 100%;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  background: #ffffff;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.html-wrapper:hover {\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),\n    0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n\n.html-iframe {\n  width: 100%;\n  height: v-bind(iframeHeight + 'px');\n  min-height: 200px;\n  max-height: 800px;\n  border: none;\n  display: block;\n  background: transparent;\n}\n\n@media (prefers-color-scheme: dark) {\n  .html-wrapper {\n    background: #1f2937;\n  }\n}\n</style>\n","<template>\n  <div>\n    <!-- Text Content -->\n    <div\n      v-if=\"element.type === 'text'\"\n      class=\"text-content\"\n      v-html=\"renderText(element.content)\"\n    />\n\n    <!-- Image -->\n    <OrcaImage\n      v-else-if=\"element.type === 'image'\"\n      :url=\"element.content\"\n      @open-modal=\"handleImageModal\"\n    />\n\n    <!-- Video -->\n    <OrcaVideo v-else-if=\"element.type === 'video'\" :url=\"element.content\" />\n\n    <!-- YouTube -->\n    <OrcaYouTube\n      v-else-if=\"element.type === 'youtube'\"\n      :url=\"element.content\"\n    />\n\n    <!-- Audio -->\n    <OrcaAudio\n      v-else-if=\"element.type === 'audio'\"\n      :audio-items=\"element.content\"\n    />\n\n    <!-- Location -->\n    <OrcaLocation\n      v-else-if=\"element.type === 'location'\"\n      :latitude=\"element.content.latitude\"\n      :longitude=\"element.content.longitude\"\n      :mapbox-token=\"mapboxToken\"\n    />\n\n    <!-- Card List -->\n    <OrcaCardList\n      v-else-if=\"element.type === 'card'\"\n      :cards=\"element.content\"\n    />\n\n    <!-- Buttons -->\n    <OrcaButtons\n      v-else-if=\"element.type === 'buttons'\"\n      :buttons=\"element.content\"\n      :disabled=\"disabledButton\"\n      @button-click=\"handleButtonClick\"\n    />\n\n    <!-- Tracing -->\n    <OrcaTracing\n      v-else-if=\"element.type === 'tracing'\"\n      :tracing-data=\"element.content\"\n      :visibility=\"visibility\"\n      :is-admin=\"isAdmin\"\n    />\n\n    <!-- HTML Content (matplotlib, plotly, etc.) -->\n    <OrcaHtml\n      v-else-if=\"element.type === 'html'\"\n      :content=\"element.content\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useMarkdown } from \"../composables/useMarkdown\";\nimport OrcaImage from \"./renderers/OrcaImage.vue\";\nimport OrcaVideo from \"./renderers/OrcaVideo.vue\";\nimport OrcaYouTube from \"./renderers/OrcaYouTube.vue\";\nimport OrcaAudio from \"./renderers/OrcaAudio.vue\";\nimport OrcaLocation from \"./renderers/OrcaLocation.vue\";\nimport OrcaCardList from \"./renderers/OrcaCardList.vue\";\nimport OrcaButtons from \"./renderers/OrcaButtons.vue\";\nimport OrcaTracing from \"./renderers/OrcaTracing.vue\";\nimport OrcaHtml from \"./renderers/OrcaHtml.vue\";\nimport type { ContentPart, ButtonData } from \"../types\";\n\n/**\n * ContentElement - Router component for different content types\n * Automatically renders the appropriate component based on element type\n */\nconst props = defineProps<{\n  element: ContentPart;\n  disabledButton?: boolean;\n  visibility?: \"all\" | \"admin\";\n  isAdmin?: boolean;\n  mapboxToken?: string;\n}>();\n\nconst emit = defineEmits<{\n  (e: \"image-modal\", url: string): void;\n  (e: \"button-click\", button: ButtonData): void;\n}>();\n\nconst { render: renderText } = useMarkdown();\n\nconst handleImageModal = (url: string) => {\n  emit(\"image-modal\", url);\n};\n\nconst handleButtonClick = (button: ButtonData) => {\n  emit(\"button-click\", button);\n};\n</script>\n","<template>\n  <Transition name=\"fade\" mode=\"out-in\">\n    <div v-if=\"isLoading\" class=\"general-loading-container\">\n      <div class=\"loading-content\">\n        <VProgressCircular\n          indeterminate\n          :size=\"24\"\n          :width=\"3\"\n          color=\"primary\"\n          class=\"loading-spinner\"\n        />\n        <span class=\"loading-text\">\n          {{ message }}\n        </span>\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { VProgressCircular } from \"vuetify/components\";\n\n/**\n * GeneralLoading - Displays general loading indicator\n * Positioned inline in the chat flow\n */\ndefineProps<{\n  isLoading: boolean;\n  message: string;\n}>();\n</script>\n\n<style scoped>\n.general-loading-container {\n  padding: 14px 20px;\n  margin: 24px 0;\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n  border-radius: 12px;\n  display: inline-flex;\n  align-items: center;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  pointer-events: none;\n}\n\n.loading-content {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.loading-spinner {\n  flex-shrink: 0;\n}\n\n.loading-text {\n  color: #4b5563;\n  font-size: 14px;\n  font-weight: 500;\n  letter-spacing: 0.01em;\n  white-space: nowrap;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n</style>\n","<template>\n  <Transition name=\"fade\" mode=\"out-in\">\n    <div v-if=\"isLoading\" class=\"image-loading-placeholder\">\n      <div class=\"loading-skeleton-image\">\n        <VProgressCircular\n          indeterminate\n          :size=\"48\"\n          :width=\"4\"\n          color=\"primary\"\n          class=\"loading-spinner-large\"\n        />\n        <span class=\"loading-skeleton-text\">ğŸ–¼ï¸ Loading image...</span>\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { VProgressCircular } from \"vuetify/components\";\n\n/**\n * ImageLoading - Displays image loading placeholder\n */\ndefineProps<{\n  isLoading: boolean;\n}>();\n</script>\n\n<style scoped>\n.image-loading-placeholder {\n  width: 300px;\n  height: 300px;\n  border-radius: 16px;\n  overflow: hidden;\n  margin: 24px 0;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n@media (min-width: 1024px) {\n  .image-loading-placeholder {\n    width: 303px;\n    height: 303px;\n  }\n}\n\n.loading-skeleton-image {\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n}\n\n.loading-spinner-large {\n  flex-shrink: 0;\n}\n\n.loading-skeleton-text {\n  color: #6b7280;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n</style>\n","<template>\n  <Transition name=\"fade\" mode=\"out-in\">\n    <div v-if=\"isLoading\" class=\"video-loading-placeholder\">\n      <div class=\"loading-skeleton-video\">\n        <VProgressCircular\n          indeterminate\n          :size=\"48\"\n          :width=\"4\"\n          color=\"primary\"\n          class=\"loading-spinner-large\"\n        />\n        <div class=\"loading-skeleton-text\">ğŸ¥ Loading video...</div>\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { VProgressCircular } from \"vuetify/components\";\n\n/**\n * VideoLoading - Displays video loading placeholder\n */\ndefineProps<{\n  isLoading: boolean;\n}>();\n</script>\n\n<style scoped>\n.video-loading-placeholder {\n  margin: 24px 0;\n}\n\n.loading-skeleton-video {\n  width: 100%;\n  max-width: 500px;\n  height: 300px;\n  border-radius: 16px;\n  overflow: hidden;\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n@media (min-width: 1024px) {\n  .loading-skeleton-video {\n    height: 350px;\n  }\n}\n\n.loading-spinner-large {\n  flex-shrink: 0;\n}\n\n.loading-skeleton-text {\n  color: #6b7280;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n</style>\n","<template>\n  <Transition name=\"fade\" mode=\"out-in\">\n    <div v-if=\"isLoading\" class=\"card-loading-placeholder\">\n      <VSkeletonLoader\n        class=\"card-skeleton\"\n        width=\"311\"\n        type=\"image, article\"\n      ></VSkeletonLoader>\n      <span class=\"loading-skeleton-text\">ğŸƒ Loading cards...</span>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { components as vuetifyLabsComponents } from \"vuetify/dist/vuetify-labs.esm.js\";\nconst VSkeletonLoader = vuetifyLabsComponents.VSkeletonLoader;\n\n/**\n * CardLoading - Displays card loading placeholder\n */\ndefineProps<{\n  isLoading: boolean;\n}>();\n</script>\n\n<style scoped>\n.card-loading-placeholder {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin: 24px 0;\n}\n\n.card-skeleton {\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.loading-skeleton-text {\n  color: #6b7280;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n</style>\n","<template>\n  <Transition name=\"fade\" mode=\"out-in\">\n    <div v-if=\"isLoading\" class=\"map-loading-placeholder\">\n      <VSkeletonLoader\n        class=\"map-skeleton\"\n        width=\"500\"\n        height=\"300\"\n        type=\"image\"\n      ></VSkeletonLoader>\n      <span class=\"loading-skeleton-text\">ğŸ—ºï¸ Loading map...</span>\n    </div>\n  </Transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { components as vuetifyLabsComponents } from \"vuetify/dist/vuetify-labs.esm.js\";\nconst VSkeletonLoader = vuetifyLabsComponents.VSkeletonLoader;\n\n/**\n * MapLoading - Displays map loading placeholder\n */\ndefineProps<{\n  isLoading: boolean;\n}>();\n</script>\n\n<style scoped>\n.map-loading-placeholder {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin: 24px 0;\n}\n\n.map-skeleton {\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.loading-skeleton-text {\n  color: #6b7280;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n</style>\n","<script lang=\"ts\" setup>\nimport { computed, ref, watch } from \"vue\";\nimport \"highlight.js/styles/stackoverflow-light.css\";\nimport \"katex/dist/katex.min.css\";\nimport { VDialog, VImg, VBtn } from \"vuetify/components\";\nimport \"../styles/tailwind.css\";\nimport type {\n  ButtonData,\n  OrcaMarkdownEmits,\n  OrcaMarkdownProps,\n} from \"../types\";\nimport { isImageFile, getFileNameFromUrl } from \"../utils/helpers\";\nimport { useContentParser } from \"../composables/useContentParser\";\nimport { useLoadingStates } from \"../composables/useLoadingStates\";\nimport { useCodeButtons } from \"../composables/useCodeButtons\";\nimport { useImageModal } from \"../composables/useImageModal\";\nimport { isLoadingType } from \"../constants/loadingTypes\";\nimport ContentElement from \"./ContentElement.vue\";\nimport GeneralLoading from \"./loading/GeneralLoading.vue\";\nimport ImageLoading from \"./loading/ImageLoading.vue\";\nimport VideoLoading from \"./loading/VideoLoading.vue\";\nimport CardLoading from \"./loading/CardLoading.vue\";\nimport MapLoading from \"./loading/MapLoading.vue\";\n\nconst props = withDefaults(defineProps<OrcaMarkdownProps>(), {\n  fileAttachments: () => [],\n  isLastMessage: false,\n  visibility: \"all\",\n});\n\nconst emit = defineEmits<OrcaMarkdownEmits>();\n\n// Refs\nconst messageContentRef = ref<HTMLElement | null>(null);\n\n// Composables\nconst { modalVisible, currentImage, openModal, closeModal } = useImageModal();\nconst contentParts = useContentParser(computed(() => props.description));\nconst {\n  isLoading,\n  isImageLoading,\n  isVideoLoading,\n  isCardLoading,\n  isLocationLoading,\n  getLoadingMessage,\n} = useLoadingStates(computed(() => props.description));\n\n// Computed properties\nconst imageFiles = computed(() => {\n  return props.fileAttachments.filter((file) => file && isImageFile(file));\n});\n\nconst nonImageFiles = computed(() => {\n  return props.fileAttachments.filter((file) => file && !isImageFile(file));\n});\n\nconst disabledButton = computed(() => {\n  return props.role !== \"assistant\" || !props.isLastMessage || isAdminPage();\n});\n\nconst isAdminPage = () => {\n  return props.visibility === \"admin\";\n};\n\n// Get active loading type and message\nconst getActiveLoadingType = computed(() => {\n  const desc = props.description || \"\";\n\n  // Check each loading type to see which one is active\n  if (\n    desc.includes(\"[orca.loading.thinking.start]\") &&\n    !desc.includes(\"[orca.loading.thinking.end]\")\n  ) {\n    return \"thinking-loading\";\n  }\n  if (\n    desc.includes(\"[orca.loading.searching.start]\") &&\n    !desc.includes(\"[orca.loading.searching.end]\")\n  ) {\n    return \"searching-loading\";\n  }\n  if (\n    desc.includes(\"[orca.loading.coding.start]\") &&\n    !desc.includes(\"[orca.loading.coding.end]\")\n  ) {\n    return \"coding-loading\";\n  }\n  if (\n    desc.includes(\"[orca.loading.analyzing.start]\") &&\n    !desc.includes(\"[orca.loading.analyzing.end]\")\n  ) {\n    return \"analyzing-loading\";\n  }\n  if (\n    desc.includes(\"[orca.loading.generating.start]\") &&\n    !desc.includes(\"[orca.loading.generating.end]\")\n  ) {\n    return \"generating-loading\";\n  }\n  if (\n    desc.includes(\"[orca.loading.custom.start]\") &&\n    !desc.includes(\"[orca.loading.custom.end]\")\n  ) {\n    return \"custom-loading\";\n  }\n  if (\n    desc.includes(\"[orca.loading.start]\") &&\n    !desc.includes(\"[orca.loading.end]\")\n  ) {\n    return \"general-loading\";\n  }\n\n  return null;\n});\n\n// Get current loading message\nconst getCurrentLoadingMessage = computed(() => {\n  if (isLoading.value) {\n    const activeType = getActiveLoadingType.value;\n    if (activeType) {\n      return getLoadingMessage(activeType);\n    }\n    return \"â³ Loading...\";\n  }\n  return \"â³ Loading...\";\n});\n\n// Code buttons composable\nconst { addCodeButtons } = useCodeButtons(\n  messageContentRef,\n  () => props.role !== \"user\"\n);\n\n// Watch content parts to update code buttons\nwatch(contentParts, () => {\n  addCodeButtons();\n});\n\n/**\n * Handle button click - emit event to parent component\n */\nconst handleButtonClick = async (button: ButtonData) => {\n  if (button.type === \"action\" && !disabledButton.value) {\n    try {\n      emit(\"send-message\", {\n        message: button.label,\n        buttonData: button,\n        type: \"button-action\",\n      });\n    } catch (error) {\n      console.error(\"Error emitting button click:\", error);\n    }\n  }\n};\n\n/**\n * Handle image modal open\n */\nconst handleImageModal = (url: string) => {\n  openModal(url);\n};\n</script>\n\n<template>\n  <div class=\"message-content\">\n    <div ref=\"messageContentRef\" class=\"content-wrapper\">\n      <!-- Process content parts sequentially -->\n      <template v-for=\"(part, index) in contentParts\" :key=\"index\">\n        <!-- Skip loading parts - they're handled separately -->\n        <ContentElement\n          v-if=\"!isLoadingType(part.type)\"\n          :element=\"part\"\n          :disabled-button=\"disabledButton\"\n          :visibility=\"props.visibility as 'all' | 'admin' | undefined\"\n          :is-admin=\"isAdminPage()\"\n          @image-modal=\"handleImageModal\"\n          @button-click=\"handleButtonClick\"\n        />\n      </template>\n\n      <!-- Content-specific loading placeholders -->\n      <GeneralLoading\n        :isLoading=\"isLoading\"\n        :message=\"getCurrentLoadingMessage\"\n      />\n      <ImageLoading :isLoading=\"isImageLoading\" />\n      <VideoLoading :isLoading=\"isVideoLoading\" />\n      <CardLoading :isLoading=\"isCardLoading\" />\n      <MapLoading :isLoading=\"isLocationLoading\" />\n\n      <!-- File Attachments Section -->\n      <div\n        v-if=\"\n          props.fileAttachments &&\n          props.fileAttachments.length > 0 &&\n          props.role === 'user'\n        \"\n        class=\"tw-flex tw-flex-wrap tw-gap-4 tw-mt-4 tw-mb-4\"\n      >\n        <!-- Image files -->\n        <img\n          v-for=\"file in imageFiles\"\n          :key=\"file\"\n          :src=\"file\"\n          class=\"tw-w-[300px] lg:tw-w-[303px] tw-h-[300px] lg:tw-h-[303px] tw-object-cover tw-rounded-lg tw-cursor-pointer\"\n          @click=\"openModal(file)\"\n        />\n\n        <!-- Non-image files -->\n        <VBtn\n          v-for=\"file in nonImageFiles\"\n          :key=\"file\"\n          class=\"text-center text-sm\"\n          variant=\"tonal\"\n          color=\"grey-500\"\n          :href=\"file\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {{ getFileNameFromUrl(file) }}\n        </VBtn>\n      </div>\n    </div>\n  </div>\n\n  <VDialog\n    v-model=\"modalVisible\"\n    fullscreen\n    class=\"image-modal\"\n    scrim=\"rgba(0, 0, 0, 0.85)\"\n    @click=\"closeModal\"\n    transition=\"fade-transition\"\n  >\n    <div class=\"modal-close-btn\" @click.stop=\"closeModal\">\n      <button class=\"close-button\" aria-label=\"Close image\">\n        <svg\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2.5\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n        </svg>\n      </button>\n    </div>\n    <div class=\"modal-content\">\n      <VImg :src=\"currentImage\" class=\"modal-image\" contain />\n    </div>\n  </VDialog>\n</template>\n\n<style lang=\"scss\" scoped>\n.message-content {\n  width: 100%;\n  position: relative;\n}\n\n.content-wrapper {\n  position: relative;\n  min-height: 60px;\n}\n\n.text-content {\n  width: 100%;\n  margin-bottom: 0.5rem;\n}\n\nimg.zoom-image {\n  max-width: 300px;\n  max-height: 300px;\n  width: auto;\n  height: auto;\n  object-fit: contain;\n  border-radius: 16px;\n  cursor: zoom-in;\n  transition: transform 0.2s ease;\n  margin: 0.5rem 0;\n\n  &:hover {\n    transform: scale(1.02);\n  }\n\n  @media (min-width: 1024px) {\n    max-width: 303px;\n    max-height: 303px;\n  }\n}\n\n.image-loading-placeholder {\n  width: 300px;\n  height: 300px;\n  border-radius: 16px;\n  background: linear-gradient(135deg, #fff 0%, #e3e8f0 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  color: #666;\n  margin: 0.5rem 0;\n\n  @media (min-width: 1024px) {\n    width: 303px;\n    height: 303px;\n  }\n\n  .loading-spinner {\n    width: 40px;\n    height: 40px;\n    border: 3px solid #f3f3f3;\n    border-top: 3px solid #007bff;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n}\n\n.image-container {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0.5rem 0;\n}\n\n.modal-image {\n  max-width: 100%;\n  max-height: 100%;\n}\n\n::v-deep(.close-btn) {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background-color: #fff;\n  border: none;\n  padding: 5px;\n  cursor: pointer;\n}\n\n::v-deep(.code-container) {\n  padding: 0;\n  border: unset !important;\n  margin: 1.5rem 0;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);\n  background: #ffffff;\n  border: 1px solid #e5e7eb;\n  transition: box-shadow 0.3s ease;\n}\n\n::v-deep(.code-container:hover) {\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.06);\n}\n\n::v-deep(.buttons-container) {\n  display: flex;\n  padding: 12px 16px;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 10px;\n  background: linear-gradient(135deg, #fafbfc 0%, #f8f9fa 100%);\n  border-bottom: 1px solid #e5e7eb;\n  backdrop-filter: blur(8px);\n}\n\n::v-deep(.copy-btn),\n::v-deep(.collapse-btn) {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  background: #ffffff;\n  color: #374151;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", sans-serif;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n  user-select: none;\n}\n\n::v-deep(.copy-btn:hover),\n::v-deep(.collapse-btn:hover) {\n  background: #f9fafb;\n  border-color: #9ca3af;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);\n  color: #111827;\n}\n\n::v-deep(.copy-btn:active),\n::v-deep(.collapse-btn:active) {\n  transform: translateY(0);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  background: #f3f4f6;\n}\n\n::v-deep(.message-content) {\n  pre {\n    position: relative;\n    margin: 0;\n    padding: 0;\n  }\n\n  table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-bottom: 16px;\n  }\n}\n\n::v-deep(.code-container) {\n  .code-wrapper {\n    background: #0f172a;\n    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;\n    overflow: hidden;\n    position: relative;\n\n    &.collapsed {\n      opacity: 0.85;\n    }\n\n    pre {\n      margin: 0;\n      padding: 20px;\n      background: #0f172a;\n      border-radius: 0;\n      overflow-x: auto;\n      position: relative;\n\n      /* Custom scrollbar */\n      &::-webkit-scrollbar {\n        height: 8px;\n      }\n\n      &::-webkit-scrollbar-track {\n        background: #1e293b;\n        border-radius: 4px;\n      }\n\n      &::-webkit-scrollbar-thumb {\n        background: #475569;\n        border-radius: 4px;\n      }\n\n      &::-webkit-scrollbar-thumb:hover {\n        background: #64748b;\n      }\n    }\n\n    code {\n      border: none;\n      background: transparent;\n      color: #e2e8f0;\n      font-family: \"Fira Code\", \"JetBrains Mono\", \"Consolas\", \"Monaco\",\n        \"Courier New\", monospace;\n      font-size: 14px;\n      line-height: 1.7;\n      padding: 0;\n      display: block;\n      white-space: pre;\n      tab-size: 2;\n      letter-spacing: 0.01em;\n    }\n\n    .hljs {\n      background: #0f172a;\n      color: #e2e8f0;\n\n      /* Syntax highlighting improvements */\n      .hljs-keyword,\n      .hljs-selector-tag,\n      .hljs-built_in,\n      .hljs-name,\n      .hljs-tag {\n        color: #c792ea;\n        font-weight: 500;\n      }\n\n      .hljs-string,\n      .hljs-title,\n      .hljs-section,\n      .hljs-attribute,\n      .hljs-literal,\n      .hljs-template-tag,\n      .hljs-template-variable,\n      .hljs-type,\n      .hljs-addition {\n        color: #c3e88d;\n      }\n\n      .hljs-comment,\n      .hljs-quote,\n      .hljs-deletion,\n      .hljs-meta {\n        color: #546e7a;\n        font-style: italic;\n      }\n\n      .hljs-number,\n      .hljs-regexp,\n      .hljs-symbol,\n      .hljs-variable,\n      .hljs-template-variable,\n      .hljs-link,\n      .hljs-selector-attr,\n      .hljs-selector-pseudo {\n        color: #f78c6c;\n      }\n\n      .hljs-function,\n      .hljs-title.function_ {\n        color: #82aaff;\n      }\n\n      .hljs-class,\n      .hljs-title.class_ {\n        color: #ffcb6b;\n      }\n    }\n  }\n}\n\n::v-deep(table) {\n  width: 100%;\n  margin-bottom: 16px;\n\n  th,\n  td {\n    border: 1px solid #dcdcdc;\n    padding: 12px;\n    text-align: left;\n  }\n\n  tr {\n    background: #ffffff;\n  }\n\n  th {\n    background: #f2f2f2;\n  }\n\n  th:first-child {\n    border-top-left-radius: 16px;\n  }\n\n  th:last-child {\n    border-top-right-radius: 16px;\n  }\n\n  tbody > tr:last-child {\n    td:first-child {\n      border-bottom-left-radius: 16px;\n    }\n\n    td:last-child {\n      border-bottom-right-radius: 16px;\n    }\n  }\n\n  tr:nth-child(even) {\n    background-color: #f8f9fa !important;\n  }\n}\n\n::v-deep(ol, ul) {\n  padding-left: 40px;\n  margin: 8px 0;\n  li {\n    margin-bottom: 6px;\n  }\n}\n\n::v-deep(p) {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n::v-deep(h2, h3, h1, h4, h5, h6) {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n::v-deep(hr) {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n::v-deep(ul) {\n  li {\n    margin-top: 0.5rem;\n  }\n}\n::v-deep(h1, h2, h3, h4, h5, h6) {\n  margin: 1rem 0;\n  font-weight: 600;\n  line-height: 1.2;\n  color: #111;\n  font-family: inherit;\n}\n\n::v-deep(h1) {\n  font-size: 2.5rem;\n}\n::v-deep(h2) {\n  font-size: 2rem;\n}\n::v-deep(h3) {\n  font-size: 1.75rem;\n}\n::v-deep(h4) {\n  font-size: 1.5rem;\n}\n::v-deep(h5) {\n  font-size: 1.25rem;\n}\n::v-deep(h6) {\n  font-size: 1rem;\n}\n\n::v-deep(ul) {\n  list-style: disc;\n}\n::v-deep(ol) {\n  list-style: decimal;\n}\n::v-deep(a) {\n  color: blue !important;\n}\n\n.image-modal {\n  backdrop-filter: blur(12px);\n}\n\n.modal-close-btn {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  z-index: 10;\n}\n\n.close-button {\n  background: rgba(255, 255, 255, 0.98) !important;\n  backdrop-filter: blur(12px);\n  border-radius: 50%;\n  width: 44px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  cursor: pointer;\n  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n  color: #1f2937 !important;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08);\n  padding: 0;\n  margin: 0;\n}\n\n.close-button:hover {\n  background: rgba(255, 255, 255, 1) !important;\n  transform: scale(1.08) rotate(90deg);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.16), 0 4px 12px rgba(0, 0, 0, 0.1);\n  color: #111827 !important;\n}\n\n.close-button:active {\n  transform: scale(1.05) rotate(90deg);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n}\n\n.close-button svg {\n  width: 20px;\n  height: 20px;\n}\n\n.modal-content {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 40px;\n}\n\n.modal-image {\n  max-height: 90vh;\n  max-width: 90vw;\n  border-radius: 16px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  transition: transform 0.3s ease;\n}\n\n.modal-image:hover {\n  transform: scale(1.02);\n}\n\n.video-container,\n.youtube-container {\n  margin: 1rem 0;\n}\n\n.video-player-custom {\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n::v-deep(.video-js) {\n  width: 100%;\n  height: 100%;\n  border-radius: 12px;\n}\n\n.card-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n  justify-content: flex-start;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin: 16px 0;\n}\n\n.button-row {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.action-button {\n  flex: 1;\n  min-width: 120px;\n  white-space: nowrap;\n}\n\n@media (max-width: 600px) {\n  .button-row {\n    flex-direction: column;\n  }\n\n  .action-button {\n    width: 100%;\n  }\n}\n\n/* Fade transitions for loading states */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n/* Smooth transitions for content */\n.message-content {\n  animation: fadeIn 0.3s ease-in;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n</style>\n","import { ref } from \"vue\";\n\n/**\n * Composable for managing image modal state\n * Provides clean API for opening/closing image modals\n */\nexport function useImageModal() {\n  const modalVisible = ref(false);\n  const currentImage = ref(\"\");\n\n  /**\n   * Open modal with specified image URL\n   */\n  const openModal = (imageUrl: string) => {\n    currentImage.value = imageUrl;\n    modalVisible.value = true;\n  };\n\n  /**\n   * Close modal\n   */\n  const closeModal = () => {\n    modalVisible.value = false;\n    // Clear image after animation completes\n    setTimeout(() => {\n      currentImage.value = \"\";\n    }, 300);\n  };\n\n  return {\n    modalVisible,\n    currentImage,\n    openModal,\n    closeModal,\n  };\n}\n","/**\n * Orca Components\n * Native components for rendering special content markers\n * @packageDocumentation\n */\n\n// Import Tailwind CSS\nimport \"./styles/tailwind.css\";\n\n// Export main component\nexport { default as OrcaMarkdown } from \"./components/OrcaMarkdown.vue\";\n\n// Export types\nexport type {\n  AudioData,\n  ButtonData,\n  CardData,\n  ContentPart,\n  ContentPartType,\n  GetFileNameFromUrlFn,\n  GetYouTubeIdFn,\n  IsImageFileFn,\n  OrcaMarkdownEmits,\n  OrcaMarkdownProps,\n  LocationData,\n  MapboxConfig,\n  SendMessageData,\n  TracingData,\n  VideoPlayerOptions,\n} from \"./types\";\n\n// Export utility functions\nexport {\n  cleanOrcaMarkers,\n  generateMapId,\n  getAppendIconStyle,\n  getFileNameFromUrl,\n  getGroupedButtons,\n  getOutlinedButtonStyle,\n  getOutlinedButtonTextStyle,\n  getVuetifyColor,\n  getYouTubeId,\n  hasLoadingMarkers,\n  isImageFile,\n} from \"./utils/helpers\";\n\n// Package version\nexport const version = \"1.0.2\";\n\n// Package info\nexport const packageInfo = {\n  name: \"@orca-pt/orca-components\",\n  undefined,\n  description: \"Orca native components for rendering special content markers\",\n  author: \"Orca Team\",\n};\n"],"names":["isImageFile","url","imageExtensions","pathname","URL","toLowerCase","some","ext","endsWith","e","getFileNameFromUrl","encodedFileName","split","pop","decodeURIComponent","getYouTubeId","match","length","getVuetifyColor","colorName","colorMap","primary","secondary","success","info","warning","error","accent","getGroupedButtons","buttons","rows","forEach","button","row","push","Object","keys","sort","a","b","parseInt","map","getOutlinedButtonStyle","color","hexColor","border","getOutlinedButtonTextStyle","getAppendIconStyle","fill","MARKERS","type","start","end","GENERAL_LOADING_TYPES","escapeRegex","str","replace","createMarkerPattern","config","RegExp","CONTENT_PATTERNS","marker","regex","filterMarkers","markers","predicate","filter","removeByPattern","content","pattern","preserveContent","removeMarkers","cleaned","removeLoadingMarkers","loadingMarkers","removeAllMarkers","contentMarkers","removeContentMarkers","GENERAL_LOADING_MARKERS","m","isGeneralLoadingType","includes","getGeneralLoadingMarkers","CONTENT_MARKERS","getContentMarkers","removeCompleteMarkers","findMatches","index","indexOf","Infinity","extractField","block","fieldName","allFieldNames","otherFields","f","join","createFieldPattern","value","trim","parseYamlList","payload","fields","mapper","fieldNames","name","extracted","field","num","Number","isFinite","defaultValue","required","CARD_FIELDS","BUTTON_FIELDS","AUDIO_FIELDS","SIMPLE_CONTENT_TYPES","PARSER_MAP","card","data","photo","header","subheader","location","latitude","longitude","coord","parsedLatitude","parseFloat","parsedLongitude","label","id","tracing","visibilityMatch","visibility","contentMatch","_a","rawContent","audio","processMatch","isLoadingType","parser","useContentParser","description","computed","parts","remainingContent","result","startIdx","lastIndexOf","substring","stripIncompleteMarkers","iteration","MAX_ITERATIONS","matches","addCleanTextIfExists","firstMatch","reduce","prev","current","processMatchAndAddParts","matchEnd","parseContent","unref","text","cleanText","matchPayload","cleanPayload","nestedParts","shouldSkip","cleanTextBefore","part","parseContentRecursively","LOADING_PATTERNS","actual","LOADING_MESSAGES","isActiveLoading","startPattern","endPattern","hasStart","hasEnd","isActiveContentLoading","actualPattern","hasActual","test","COPY_ICON","COLLAPSE_ICON","attachCodeButtons","closest","codeContainer","document","createElement","className","codeWrapper","style","transition","overflow","appendChild","cloneNode","buttonsContainer","copyButton","innerHTML","onclick","async","navigator","clipboard","writeText","setTimeout","copyToClipboard","querySelector","innerText","collapseButton","wrapper","classList","contains","remove","maxHeight","add","height","scrollHeight","offsetHeight","toggleCodeBlock","replaceWith","LOADING_CONTENT_TYPES","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","apply","construct","Reflect","x","func","thisArg","_len","arguments","args","Array","_key","Func","_len2","_key2","arrayForEach","unapply","prototype","arrayLastIndexOf","arrayPop","arrayPush","arraySplice","splice","stringToLowerCase","String","stringToString","toString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","hasOwnProperty","regExpTest","typeErrorCreate","TypeError","_len4","_key4","lastIndex","_len3","_key3","addToSet","set","array","transformCaseFunc","l","element","lcElement","cleanArray","clone","object","newObject","property","isArray","constructor","lookupGetter","prop","desc","get","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","__proto__","NODE_TYPE","purify","createDOMPurify","window","DOMPurify","root","version","removed","nodeType","Element","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","trustedTypes","ElementPrototype","getNextSibling","getChildNodes","getParentNode","template","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","afterSanitizeAttributes","afterSanitizeElements","afterSanitizeShadowDOM","beforeSanitizeAttributes","beforeSanitizeElements","beforeSanitizeShadowDOM","uponSanitizeAttribute","uponSanitizeElement","uponSanitizeShadowNode","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","EXTRA_ELEMENT_HANDLING","tagCheck","attributeCheck","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","Function","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","ADD_FORBID_CONTENTS","table","tbody","TRUSTED_TYPES_POLICY","createHTML","createScriptURL","purifyHostElement","createPolicy","suffix","ATTR_NAME","hasAttribute","getAttribute","policyName","scriptUrl","_","_createTrustedTypesPolicy","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","node","removeChild","_removeAttribute","attribute","getAttributeNode","from","removeAttribute","setAttribute","_initDocument","dirty","doc","leadingWhitespace","dirtyPayload","parseFromString","documentElement","createDocument","body","insertBefore","createTextNode","childNodes","call","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","nodeName","textContent","attributes","namespaceURI","hasChildNodes","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","tagName","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","i","childClone","__removalCount","parent","parentTagName","Boolean","_checkValidNamespace","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","forceKeepAttr","attr","initValue","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","tag","addHook","entryPoint","hookFunction","removeHook","removeHooks","removeAllHooks","md","MarkdownIt","linkify","typographer","highlight","lang","hljs","getLanguage","language","escapeCodeHtml","use","markdownItKatex","markdownItLinkAttributes","attrs","target","rel","props","__props","emit","__emit","openModal","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","src","alt","class","loading","onClick","videoOptions","ref","autoplay","controls","responsive","fluid","sources","_createVNode","_unref","VideoPlayer","options","embedUrl","width","frameborder","allow","allowfullscreen","_Fragment","_renderList","audioItems","audioIndex","key","stroke","viewBox","d","_hoisted_3","_hoisted_4","_toDisplayString","cx","cy","r","toFixed","cards","_createBlock","VCard","elevation","VImg","cover","VCardItem","VCardTitle","_createTextVNode","groupedButtons","rowIndex","VBtn","disabled","_normalizeStyle","variant","rounded","href","$event","handleButtonClick","VIcon","icon","size","traceVisible","isVisible","shouldShow","tracingData","item","isAdmin","tracingContent","toggleTrace","VExpandTransition","iframeRef","iframeHeight","wrappedHtml","sanitized","sanitizeContent","handleIframeLoad","adjustHeight","contentDocument","Math","max","handleMessage","event","newHeight","min","onMounted","addEventListener","onUnmounted","removeEventListener","srcdoc","sandbox","onLoad","render","renderText","rawHtml","handleImageModal","OrcaImage","onOpenModal","OrcaVideo","OrcaYouTube","OrcaAudio","OrcaLocation","mapboxToken","OrcaCardList","OrcaButtons","disabledButton","onButtonClick","OrcaTracing","OrcaHtml","_Transition","mode","isLoading","VProgressCircular","indeterminate","message","_cache","VSkeletonLoader","vuetifyLabsComponents","messageContentRef","modalVisible","currentImage","closeModal","imageUrl","useImageModal","contentParts","isImageLoading","isVideoLoading","isCardLoading","isLocationLoading","getLoadingMessage","descriptionValue","watch","val","hasActiveLoading","immediate","videoLoading","youtubeLoading","loadingType","useLoadingStates","imageFiles","fileAttachments","file","nonImageFiles","role","isLastMessage","isAdminPage","getActiveLoadingType","getCurrentLoadingMessage","activeType","addCodeButtons","containerRef","shouldAddButtons","nextTick","querySelectorAll","useCodeButtons","buttonData","ContentElement","onImageModal","GeneralLoading","ImageLoading","VideoLoading","CardLoading","MapLoading","VDialog","fullscreen","scrim","_withModifiers","x1","y1","x2","y2","contain","Date","now","random","substr","undefined","author"],"mappings":"mwBASO,SAASA,EAAYC,GAC1B,MAAMC,EAAkB,CACtB,OACA,QACA,OACA,OACA,QACA,OACA,QAEF,IACE,MACMC,EADS,IAAIC,IAAIH,GACCE,SAASE,cACjC,OAAOH,EAAgBI,KAAMC,GAAQJ,EAASK,SAASD,GACzD,OAASE,GACP,OAAO,CACT,CACF,CAKO,SAASC,EAAmBT,GACjC,IACE,MACME,EADS,IAAIC,IAAIH,GACCE,SAElBQ,EADWR,EAASS,MAAM,KACCC,OAAS,GAC1C,OAAOC,mBAAmBH,EAC5B,OAASF,GACP,OAAO,IACT,CACF,CAKO,SAASM,EAAad,GAC3B,MAEMe,EAAQf,EAAIe,MADhB,6EAEF,OAAOA,GAA6B,KAApBA,EAAM,GAAGC,OAAgBD,EAAM,GAAK,EACtD,CAKO,SAASE,EAAgBC,GAC9B,IAAKA,EAAW,MAAO,UAGvB,MAAMC,EAAmC,CACvCC,QAAS,UACTC,UAAW,UACXC,QAAS,UACTC,KAAM,UACNC,QAAS,UACTC,MAAO,UACPC,OAAQ,WAIV,OAAIP,EAASD,EAAUd,eACde,EAASD,EAAUd,eAIrBc,CACT,CAKO,SAASS,EAAkBC,GAChC,MAAMC,EAAqC,CAAA,EAW3C,OATAD,EAAQE,QAASC,IACf,MAAMC,EAAMD,EAAOC,KAAO,EACrBH,EAAKG,KACRH,EAAKG,GAAO,IAEdH,EAAKG,GAAKC,KAAKF,KAIVG,OAAOC,KAAKN,GAChBO,KAAK,CAACC,EAAGC,IAAMC,SAASF,GAAKE,SAASD,IACtCE,IAAKR,GAAQH,EAAKU,SAASP,IAChC,CA8BO,SAASS,EAAuBC,GACrC,IAAKA,EAAO,MAAO,CAAA,EACnB,MAAMC,EAAW1B,EAAgByB,GACjC,MAAO,CACLE,OAAQ,aAAaD,IACrBD,MAAOC,EACP,mBAAoB,cAExB,CAKO,SAASE,EACdH,GAEA,IAAKA,EAAO,MAAO,CAAA,EAEnB,MAAO,CACLA,MAFezB,EAAgByB,GAG/B,mBAAoB,cAExB,CAKO,SAASI,EAAmBJ,GACjC,IAAKA,EAAO,MAAO,CAAA,EACnB,MAAMC,EAAW1B,EAAgByB,GACjC,MAAO,CACLA,MAAOC,EACPI,KAAMJ,EAEV,CChJO,MAAMK,EAA0B,CAErC,CACEC,KAAM,kBACNC,MAAO,uBACPC,IAAK,sBAEP,CACEF,KAAM,mBACNC,MAAO,gCACPC,IAAK,+BAEP,CACEF,KAAM,oBACNC,MAAO,iCACPC,IAAK,gCAEP,CACEF,KAAM,iBACNC,MAAO,8BACPC,IAAK,6BAEP,CACEF,KAAM,oBACNC,MAAO,iCACPC,IAAK,gCAEP,CACEF,KAAM,qBACNC,MAAO,kCACPC,IAAK,iCAEP,CACEF,KAAM,iBACNC,MAAO,8BACPC,IAAK,6BAIP,CACEF,KAAM,gBACNC,MAAO,6BACPC,IAAK,4BAEP,CACEF,KAAM,gBACNC,MAAO,6BACPC,IAAK,4BAEP,CACEF,KAAM,kBACNC,MAAO,+BACPC,IAAK,8BAEP,CACEF,KAAM,eACNC,MAAO,iCACPC,IAAK,gCAEP,CACEF,KAAM,cACNC,MAAO,2BACPC,IAAK,0BAEP,CACEF,KAAM,eACNC,MAAO,4BACPC,IAAK,2BAIP,CAAEF,KAAM,QAASC,MAAO,qBAAsBC,IAAK,oBACnD,CAAEF,KAAM,QAASC,MAAO,qBAAsBC,IAAK,oBACnD,CACEF,KAAM,UACNC,MAAO,uBACPC,IAAK,sBAEP,CACEF,KAAM,OACNC,MAAO,yBACPC,IAAK,wBAEP,CACEF,KAAM,WACNC,MAAO,wBACPC,IAAK,uBAEP,CACEF,KAAM,UACNC,MAAO,uBACPC,IAAK,sBAEP,CACEF,KAAM,UACNC,MAAO,uBACPC,IAAK,sBAEP,CAAEF,KAAM,QAASC,MAAO,qBAAsBC,IAAK,oBACnD,CAAEF,KAAM,OAAQC,MAAO,oBAAqBC,IAAK,oBAOtCC,EAAwB,CACnC,kBACA,mBACA,oBACA,iBACA,oBACA,qBACA,kBCnHK,SAASC,EAAYC,GAC1B,OAAOA,EAAIC,QAAQ,sBAAuB,OAC5C,CAKO,SAASC,EAAoBC,GAClC,MAAMP,EAAQG,EAAYI,EAAOP,OAC3BC,EAAME,EAAYI,EAAON,KAC/B,OAAO,IAAIO,OAAO,GAAGR,SAAaC,IAAO,IAC3C,CAuBO,MAAMQ,EAAyDX,EATrDR,IAAKoB,IAAA,CAClBX,KAAMW,EAAOX,KACbY,MAAOL,EAAoBI,MAYxB,SAASE,EACdC,EACAC,GAEA,OAAOD,EAAQE,OAAOD,EACxB,CC7CA,SAASE,EACPC,EACAC,EACAC,GAEA,OAAOF,EAAQZ,QAAQa,EAASC,EAAkB,KAAO,GAC3D,CAQO,SAASC,EACdH,EACAJ,EACAM,GAA2B,GAE3B,IAAIE,EAAUJ,EAEd,IAAA,MAAWP,KAAUG,EAAS,CAE5BQ,EAAUL,EAAgBK,EADVf,EAAoBI,GACQS,EAC9C,CAEA,OAAOE,CACT,CAKO,SAASC,EACdL,EACAM,GAEA,OAAOH,EAAcH,EAASM,GAAgB,EAChD,CAkBO,SAASC,EACdP,EACAM,EACAE,GAGA,IAAIJ,EAAUC,EAAqBL,EAASM,GAK5C,OAFAF,EAtBK,SACLJ,EACAQ,GAEA,OAAOL,EAAcH,EAASQ,GAAgB,EAChD,CAiBYC,CAAqBL,EAASI,GAEjCJ,CACT,CCrEA,MAAMM,EF0FC,SACLd,GAEA,OAAOD,EAAcC,EAAUe,IAAMC,OAvBF9B,EAuBuB6B,EAAE7B,KAtBrDG,EAAsB4B,SAAS/B,GADjC,IAA8BA,GAwBrC,CE9FgCgC,CAAyBjC,GACnDkC,EFkGC,SAA2BnB,GAChC,OAAOD,EAAcC,EAAUe,IAAqBA,EAAE7B,KArC1C+B,SAAS,YAsCvB,CEpGwBG,CAAkBnC,GAenC,SAASoC,EAAsBjB,GACpC,OAAOO,EAAiBP,EAASU,EAAyBK,EAC5D,CChBO,SAASG,EAAYlB,GAU1B,OATkCR,EAAiBnB,IAAI,EAAGS,OAAMY,YAC9D,MAAM9C,EAAQoD,EAAQpD,MAAM8C,GAC5B,MAAO,CACLZ,OACAlC,QACAuE,MAAOvE,EAAQoD,EAAQoB,QAAQxE,EAAM,IAAMyE,OAIhCvB,OACZa,GAAmC,OAAZA,EAAE/D,OAAkB+D,EAAEQ,QAAUE,IAE5D,CCiBA,SAASC,EACPC,EACAC,EACAC,GAEA,MAAMxB,EA7BR,SACEuB,EACAC,GAGA,MAAMC,EAAcD,EACjB3B,OAAQ6B,GAAMA,IAAMH,GACpBnD,IAAKsD,GAAM,GAAGA,MACdC,KAAK,KASR,OAAO,IAAIrC,OADK,GAAGiC,+BAAuCE,QAC/B,IAC7B,CAWkBG,CAAmBL,EAAWC,GACxC7E,EAAQ2E,EAAM3E,MAAMqD,GAE1B,IAAKrD,IAAUA,EAAM,GACnB,MAAO,GAGT,IAAIkF,EAAQlF,EAAM,GAGlBkF,EAAQA,EAAM1C,QAAQ,UAAW,IAKjC,OAFkB0C,EAAMtF,MAAM,MAAM,GAEnBuF,MACnB,CAYO,SAASC,EACdC,EACAC,EACAC,GAEA,MAAMC,EAAaF,EAAO7D,IAAKsD,GAAMA,EAAEU,MAsCvC,OApCeJ,EACZzF,MAAM,MACN6B,IAAKkD,GAAUA,EAAMQ,QACrBjC,OAAQyB,GAAUA,GAEElD,IAAKkD,IAC1B,MAAMe,EAAiC,CAAA,EAGvC,IAAA,MAAWC,KAASL,EAAQ,CAC1B,MAAMJ,EAAQR,EAAaC,EAAOgB,EAAMF,KAAMD,GAG9C,GAAmB,WAAfG,EAAMzD,KAAmB,CAC3B,MAAM0D,EAAMpE,SAAS0D,EAAO,IAC5BQ,EAAUC,EAAMF,MAAQI,OAAOC,SAASF,GACpCA,OACuB,IAAvBD,EAAMI,aACNJ,EAAMI,kBACN,CACN,MAEEL,EAAUC,EAAMF,MACdP,SACwB,IAAvBS,EAAMI,aACHJ,EAAMI,aACNJ,EAAMK,SACN,QACA,EAEV,CAGA,OAAOT,EAAOG,IAIlB,CC9GA,MAAMO,EAA0B,CAC9B,CACER,KAAM,QACNO,UAAU,EACVD,aAAc,uCAEhB,CAAEN,KAAM,SAAUO,UAAU,EAAMD,aAAc,cAChD,CAAEN,KAAM,YAAaM,aAAc,KCLrC,MAAMG,EAA4B,CAChC,CAAET,KAAM,OAAQO,UAAU,EAAMD,aAAc,UAC9C,CAAEN,KAAM,QAASO,UAAU,EAAMD,aAAc,UAC/C,CAAEN,KAAM,MAAOM,kBAAc,GAC7B,CAAEN,KAAM,KAAMvD,KAAM,SAAU6D,kBAAc,GAC5C,CAAEN,KAAM,QAASM,aAAc,WAC/B,CAAEN,KAAM,MAAOvD,KAAM,SAAU6D,aAAc,ICR/C,MAAMI,EAA2B,CAC/B,CAAEV,KAAM,QAASO,UAAU,EAAMD,aAAc,eAC/C,CAAEN,KAAM,MAAOO,UAAU,EAAMD,aAAc,IAC7C,CAAEN,KAAM,OAAQO,UAAU,EAAMD,aAAc,eCMhD,MAAMK,EAAuB,CAAC,QAAS,QAAS,UAAW,QAOrDC,EAAuD,CAC3DC,KHPK,SAAmBjB,GACxB,OAAOD,EAAcC,EAASY,EAAcM,IAAA,CAC1CC,MAAOD,EAAKC,OAAS,GACrBC,OAAQF,EAAKE,QAAU,GACvBC,UAAWH,EAAKG,WAAa,KAEjC,EGEEC,SClBK,SAAuBtB,GAC5B,MAAOuB,EAAUC,GAAaxB,EAAQzF,MAAM,KAAK6B,IAAKqF,GAAUA,EAAM3B,QAChE4B,EAAiBC,WAAWJ,GAC5BK,EAAkBD,WAAWH,GACnC,MAAO,CACLD,SAAUf,OAAOC,SAASiB,GAAkBA,EAAiB,EAC7DF,UAAWhB,OAAOC,SAASmB,GAAmBA,EAAkB,EAEpE,EDWEpG,QFRK,SAAqBwE,GAc1B,OAbeD,EAAcC,EAASa,EAAgBK,IAG7C,CACLrE,KAH6C,SAAdqE,EAAKrE,KAAkB,OAAS,SAI/DgF,MAAOX,EAAKW,OAAS,GACrBjI,IAAKsH,EAAKtH,IACVkI,GAAIZ,EAAKY,GACTxF,MAAO4E,EAAK5E,MACZV,IAAKsF,EAAKtF,MAKhB,EENEmG,QEtBK,SAAsB/B,SAE3B,MAAMgC,EAAkBhC,EAAQrF,MAAM,uBAChCsH,SACHD,WAAkB,KAAoC,MAGnDE,EAAelC,EAAQrF,MAAM,wBAGnC,MAAO,CACLsH,aACAlE,SAJc,OAAAoE,EAAA,MAAAD,OAAA,EAAAA,EAAe,SAAf,EAAAC,EAAmBrC,SAAUE,EAK3CoC,WAAYpC,EAEhB,EFQEqC,MDfK,SAAoBrC,GACzB,OAAOD,EAAcC,EAASc,EAAeI,IAAA,CAC3CW,MAAOX,EAAKW,OAAS,GACrBjI,IAAKsH,EAAKtH,KAAO,GACjBiD,KAAMqE,EAAKrE,MAAQ,KAEvB,GCmBO,SAASyF,EACdzF,EACAmD,GAGA,GAlCF,SAAuBnD,GACrB,OAAOA,EAAK+B,SAAS,WACvB,CAgCM2D,CAAc1F,GAChB,OAAO,KAIT,GAAIkE,EAAqBnC,SAAS/B,GAChC,MAAO,CAAEA,OAAMkB,QAASiC,GAI1B,MAAMwC,EAASxB,EAAWnE,GAC1B,GAAI2F,EAAQ,CAEV,MAAO,CAAE3F,OAAMkB,QADCyE,EAAOxC,GAEzB,CACA,OAAO,IACT,CGrDA,SAASrB,EAAqB9B,GAC5B,OAAOG,EAAsB4B,SAAS/B,EACxC,CCCO,SAAS4F,EACdC,GAEA,OAAOC,EAAAA,SAAwB,IA+B1B,SAAsB5E,GAC3B,MAAM6E,EAAuB,GAC7B,IAAIC,EArBN,SAAgC9E,GAC9B,IAAI+E,EAAS/E,EACb,IAAA,MAAWP,KAAUZ,EAAS,CAC5B,MAAMmG,EAAWD,EAAOE,YAAYxF,EAAOV,OAC3C,IAAiB,IAAbiG,EAAiB,SAEFD,EAAOG,UAAUF,EAAWvF,EAAOV,MAAMlC,QAC5CgE,SAASpB,EAAOT,OAE9B+F,EAASA,EAAOG,UAAU,EAAGF,GAEjC,CACA,OAAOD,CACT,CAQyBI,CAAuBnF,GAC1CoF,EAAY,EAChB,MAAMC,EAAiB,IAEvB,KAAOP,EAAiBjI,OAAS,GAAKuI,EAAYC,GAAgB,CAChED,IAEA,MAAME,EAAUpE,EAAY4D,GAG5B,GAAuB,IAAnBQ,EAAQzI,OAAc,CACxB0I,EAAqBV,EAAOC,GAC5B,KACF,CAGA,MAAMU,EAAaF,EAAQG,OAAO,CAACC,EAAMC,IACvCD,EAAKvE,MAAQwE,EAAQxE,MAAQuE,EAAOC,GAKtCJ,EAAqBV,EADFC,EAAiBI,UAAU,EAAGM,EAAWrE,QAI5DyE,EAAwBf,EAAOW,GAG/B,MAAMK,EAAWL,EAAWrE,MAAQqE,EAAW5I,MAAM,GAAGC,OACxDiI,EAAmBA,EAAiBI,UAAUW,EAChD,CAEA,OAAOhB,CACT,CAhEWiB,CADSC,EAAAA,MAAMpB,IACS,IAEnC,CAmEA,SAASY,EAAqBV,EAAsBmB,GAClD,MAAMC,EAAYhF,EAAsB+E,GAAMjE,OAC1CkE,GACFpB,EAAM/G,KAAK,CAAEgB,KAAM,OAAQkB,QAASiG,GAExC,CAKA,SAASL,EACPf,EACAjI,GAEA,MAAMsJ,GAAgBtJ,EAAMA,MAAM,IAAM,IAAImF,OACtCyC,EAAgB5H,EAAMkC,KAAK+B,SAAS,YAG1C,GAAI2D,IAAkB0B,EACpB,OAIF,GAAI1B,GAAiB0B,EAAc,CACjC,MAAMC,EV3FD9F,EU2FyC6F,EV3FXxF,GU4FnC,GAAIyF,EAAapE,OAAQ,CACvB,MAAMqE,ED/FL,SAAiCpG,GACtC,MAAM6E,EAAuB,GAC7B,IAAIC,EAAmB9E,EACnBoF,EAAY,EAGhB,KAAON,EAAiBjI,OAAS,GAAKuI,EAFhB,KAE2C,CAC/DA,IACA,MAAME,EAAUpE,EAAY4D,GAE5B,GAAuB,IAAnBQ,EAAQzI,OAAc,CACxB,MAAMoJ,EAAYhF,EAAsB6D,GAAkB/C,OACtDkE,GACFpB,EAAM/G,KAAK,CAAEgB,KAAM,OAAQkB,QAASiG,IAEtC,KACF,CAEA,MAAMT,EAAaF,EAAQG,OAAO,CAACC,EAAMC,IACvCD,EAAKvE,MAAQwE,EAAQxE,MAAQuE,EAAOC,GAGhCU,EAAazF,EAAqB4E,EAAW1G,MAG7CwH,EAAkBrF,EADL6D,EAAiBI,UAAU,EAAGM,EAAWrE,QACFY,OAK1D,GAJIuE,GACFzB,EAAM/G,KAAK,CAAEgB,KAAM,OAAQkB,QAASsG,KAGjCD,EAAY,CACf,MAAMH,GAAgBV,EAAW5I,MAAM,IAAM,IAAImF,OAC3CwE,EAAOhC,EAAaiB,EAAW1G,KAAMoH,GACvCK,GACF1B,EAAM/G,KAAKyI,EAEf,CAEA,MAAMV,EAAWL,EAAWrE,MAAQqE,EAAW5I,MAAM,GAAGC,OACxDiI,EAAmBA,EAAiBI,UAAUW,EAChD,CAEA,OAAOhB,CACT,CCoD0B2B,CAAwBL,GAC5CtB,EAAM/G,QAAQsI,EAChB,CACA,MACF,CAGA,MAAMG,EAAOhC,EAAa3H,EAAMkC,KAAMoH,GAClCK,GACF1B,EAAM/G,KAAKyI,EAEf,CCvHA,MAAME,EACK,CACP1H,MAAO,uBACPC,IAAK,sBAHHyH,EAKM,CACR1H,MAAO,gCACPC,IAAK,+BAPHyH,EASO,CACT1H,MAAO,iCACPC,IAAK,gCAXHyH,EAaI,CACN1H,MAAO,8BACPC,IAAK,6BAfHyH,EAiBO,CACT1H,MAAO,iCACPC,IAAK,gCAnBHyH,EAqBQ,CACV1H,MAAO,kCACPC,IAAK,iCAvBHyH,EAyBI,CACN1H,MAAO,8BACPC,IAAK,6BA3BHyH,EA6BG,CACL1H,MAAO,6BACPC,IAAK,2BACL0H,OAAQ,oDAhCND,EAkCG,CACL1H,MAAO,6BACPC,IAAK,2BACL0H,OAAQ,oDArCND,EAuCK,CACP1H,MAAO,+BACPC,IAAK,6BACL0H,OAAQ,wDA1CND,EA4CE,CACJ1H,MAAO,4BACPC,IAAK,0BACL0H,OAAQ,8DA/CND,GAiDC,CACH1H,MAAO,2BACPC,IAAK,yBACL0H,OAAQ,0DAONC,GAA2C,CAC/C,kBAAmB,eACnB,mBAAoB,iBACpB,oBAAqB,kBACrB,iBAAkB,eAClB,oBAAqB,kBACrB,qBAAsB,kBACtB,iBAAkB,kBAClB,gBAAiB,uBACjB,gBAAiB,sBACjB,kBAAmB,8BACnB,eAAgB,sBAChB,cAAe,sBAMjB,SAASC,GACP5G,EACA6G,EACAC,GAEA,MAAMC,EAAW/G,EAAQa,SAASgG,GAC5BG,EAAShH,EAAQa,SAASiG,GAChC,OAAOC,IAAaC,CACtB,CAKA,SAASC,GACPjH,EACA6G,EACAC,EACAI,GAEA,MAAMH,EAAW/G,EAAQa,SAASgG,GAC5BG,EAAShH,EAAQa,SAASiG,GAC1BK,IAAYD,GAAgBA,EAAcE,KAAKpH,GACrD,OAAO+G,IAAaC,IAAWG,CACjC,CCpGA,MAAME,GAAY,k5BAmBZC,GAAgB,+uBA+DtB,SAASC,GAAkBhG,GACzB,GAAIA,EAAMiG,QAAQ,mBAAoB,OAEtC,MAAMC,EAAgBC,SAASC,cAAc,OAC7CF,EAAcG,UAAY,iBAE1B,MAAMC,EAAcH,SAASC,cAAc,OAC3CE,EAAYD,UAAY,eACxBC,EAAYC,MAAMC,WAAa,0CAC/BF,EAAYC,MAAME,SAAW,SAC7BH,EAAYI,YAAY1G,EAAM2G,WAAU,IAExC,MAAMC,EAAmBT,SAASC,cAAc,OAChDQ,EAAiBP,UAAY,oBAG7B,MAAMQ,EAAaV,SAASC,cAAc,UAC1CS,EAAWC,UAAYhB,GACvBe,EAAWR,UAAY,WACvBQ,EAAWE,QAAU,YA3DvBC,eACEvC,EACApI,GAEA,UACQ4K,UAAUC,UAAUC,UAAU1C,GACpCpI,EAAOyK,UAtCS,kkBAuChBM,WAAW,KACT/K,EAAOyK,UAAYhB,IAClB,IACL,OAAS/J,GAET,CACF,CAgDIsL,EADa,OAAAxE,EAAA7C,EAAMsH,cAAc,kBAASC,YAAa,GACjCV,IAIxB,MAAMW,EAAiBrB,SAASC,cAAc,UAC9CoB,EAAeV,UAAYf,GAC3ByB,EAAenB,UAAY,eAC3BmB,EAAeT,QAAU,MAlD3B,SAAyBU,EAAsBpL,GAE7C,GADoBoL,EAAQC,UAAUC,SAAS,aAE7CF,EAAQC,UAAUE,OAAO,aACzBH,EAAQlB,MAAMsB,UAAY,GAC1BJ,EAAQlB,MAAME,SAAW,GACzBpK,EAAOyK,UAAYf,OACd,CACL0B,EAAQC,UAAUI,IAAI,aACtB,MAAMC,EAASN,EAAQO,aACvBP,EAAQlB,MAAMsB,UAAY,GAAGE,MAE7BN,EAAQQ,aACRR,EAAQlB,MAAMsB,UAAY,MAC1BJ,EAAQlB,MAAME,SAAW,SACzBpK,EAAOyK,UA9CS,4uBA+ClB,CACF,CAkCIoB,CAAgB5B,EAAakB,IAG/BZ,EAAiBF,YAAYc,GAC7BZ,EAAiBF,YAAYG,GAC7BX,EAAcQ,YAAYE,GAC1BV,EAAcQ,YAAYJ,GAC1BtG,EAAMmI,YAAYjC,EACpB,CCxHO,MAAMkC,GAAwB,CACnC,kBACA,mBACA,oBACA,iBACA,oBACA,qBACA,iBACA,gBACA,gBACA,kBACA,eACA,eAMK,SAASnF,GACd1F,GAEA,OAAO6K,GAAsB9I,SAAS/B,EACxC;2LCxBA,MAAM8K,QACJA,GAAAC,eACAA,GAAAC,SACAA,GAAAC,eACAA,GAAAC,yBACAA,IACEjM,OACJ,IAAIkM,OACFA,GAAAC,KACAA,GAAAC,OACAA,IACEpM,QACAqM,MACFA,GAAAC,UACAA,IACqB,oBAAZC,SAA2BA,QACjCL,KACHA,GAAS,SAAgBM,GACvB,OAAOA,CACT,GAEGL,KACHA,GAAO,SAAcK,GACnB,OAAOA,CACT,GAEGH,KACHA,GAAQ,SAAeI,EAAMC,GAC3B,IAAA,IAASC,EAAOC,UAAU9N,OAAQ+N,EAAO,IAAIC,MAAMH,EAAO,EAAIA,EAAO,EAAI,GAAII,EAAO,EAAGA,EAAOJ,EAAMI,IAClGF,EAAKE,EAAO,GAAKH,UAAUG,GAE7B,OAAON,EAAKJ,MAAMK,EAASG,EAC7B,GAEGP,KACHA,GAAY,SAAmBU,GAC7B,IAAA,IAASC,EAAQL,UAAU9N,OAAQ+N,EAAO,IAAIC,MAAMG,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGL,EAAKK,EAAQ,GAAKN,UAAUM,GAE9B,OAAO,IAAIF,KAAQH,EACrB,GAEF,MAAMM,GAAeC,GAAQN,MAAMO,UAAUzN,SACvC0N,GAAmBF,GAAQN,MAAMO,UAAUnG,aAC3CqG,GAAWH,GAAQN,MAAMO,UAAU3O,KACnC8O,GAAYJ,GAAQN,MAAMO,UAAUtN,MACpC0N,GAAcL,GAAQN,MAAMO,UAAUK,QACtCC,GAAoBP,GAAQQ,OAAOP,UAAUnP,aAC7C2P,GAAiBT,GAAQQ,OAAOP,UAAUS,UAC1CC,GAAcX,GAAQQ,OAAOP,UAAUxO,OACvCmP,GAAgBZ,GAAQQ,OAAOP,UAAUhM,SACzC4M,GAAgBb,GAAQQ,OAAOP,UAAUhK,SACzC6K,GAAad,GAAQQ,OAAOP,UAAUrJ,MACtCmK,GAAuBf,GAAQpN,OAAOqN,UAAUe,gBAChDC,GAAajB,GAAQ5L,OAAO6L,UAAUhE,MACtCiF,IAwBetB,GAxBeuB,UAyB3B,WACL,IAAA,IAASC,EAAQ5B,UAAU9N,OAAQ+N,EAAO,IAAIC,MAAM0B,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpF5B,EAAK4B,GAAS7B,UAAU6B,GAE1B,OAAOnC,GAAUU,GAAMH,EACzB,GANF,IAAqBG,GAjBrB,SAASI,GAAQX,GACf,OAAO,SAAUC,GACXA,aAAmBlL,SACrBkL,EAAQgC,UAAY,GAEtB,IAAA,IAASC,EAAQ/B,UAAU9N,OAAQ+N,EAAO,IAAIC,MAAM6B,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxG/B,EAAK+B,EAAQ,GAAKhC,UAAUgC,GAE9B,OAAOvC,GAAMI,EAAMC,EAASG,EAC9B,CACF,CAuBA,SAASgC,GAASC,EAAKC,GACrB,IAAIC,EAAoBpC,UAAU9N,OAAS,QAAsB,IAAjB8N,UAAU,GAAmBA,UAAU,GAAKe,GACxF7B,IAIFA,GAAegD,EAAK,MAEtB,IAAIG,EAAIF,EAAMjQ,OACd,KAAOmQ,KAAK,CACV,IAAIC,EAAUH,EAAME,GACpB,GAAuB,iBAAZC,EAAsB,CAC/B,MAAMC,EAAYH,EAAkBE,GAChCC,IAAcD,IAEXnD,GAASgD,KACZA,EAAME,GAAKE,GAEbD,EAAUC,EAEd,CACAL,EAAII,IAAW,CACjB,CACA,OAAOJ,CACT,CAOA,SAASM,GAAWL,GAClB,IAAA,IAAS3L,EAAQ,EAAGA,EAAQ2L,EAAMjQ,OAAQsE,IAAS,CACzB+K,GAAqBY,EAAO3L,KAElD2L,EAAM3L,GAAS,KAEnB,CACA,OAAO2L,CACT,CAOA,SAASM,GAAMC,GACb,MAAMC,EAAYnD,GAAO,MACzB,IAAA,MAAYoD,EAAUzL,KAAU8H,GAAQyD,GAAS,CACvBnB,GAAqBmB,EAAQE,KAE/C1C,MAAM2C,QAAQ1L,GAChBwL,EAAUC,GAAYJ,GAAWrL,GACxBA,GAA0B,iBAAVA,GAAsBA,EAAM2L,cAAgB1P,OACrEuP,EAAUC,GAAYH,GAAMtL,GAE5BwL,EAAUC,GAAYzL,EAG5B,CACA,OAAOwL,CACT,CAQA,SAASI,GAAaL,EAAQM,GAC5B,KAAkB,OAAXN,GAAiB,CACtB,MAAMO,EAAO5D,GAAyBqD,EAAQM,GAC9C,GAAIC,EAAM,CACR,GAAIA,EAAKC,IACP,OAAO1C,GAAQyC,EAAKC,KAEtB,GAA0B,mBAAfD,EAAK9L,MACd,OAAOqJ,GAAQyC,EAAK9L,MAExB,CACAuL,EAAStD,GAAesD,EAC1B,CAIA,OAHA,WACE,OAAO,IACT,CAEF,CAEA,MAAMS,GAAS7D,GAAO,CAAC,IAAK,OAAQ,UAAW,UAAW,OAAQ,UAAW,QAAS,QAAS,IAAK,MAAO,MAAO,MAAO,QAAS,aAAc,OAAQ,KAAM,SAAU,SAAU,UAAW,SAAU,OAAQ,OAAQ,MAAO,WAAY,UAAW,OAAQ,WAAY,KAAM,YAAa,MAAO,UAAW,MAAO,SAAU,MAAO,MAAO,KAAM,KAAM,UAAW,KAAM,WAAY,aAAc,SAAU,OAAQ,SAAU,OAAQ,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,OAAQ,SAAU,SAAU,KAAM,OAAQ,IAAK,MAAO,QAAS,MAAO,MAAO,QAAS,SAAU,KAAM,OAAQ,MAAO,OAAQ,UAAW,OAAQ,WAAY,QAAS,MAAO,OAAQ,KAAM,WAAY,SAAU,SAAU,IAAK,UAAW,MAAO,WAAY,IAAK,KAAM,KAAM,OAAQ,IAAK,OAAQ,SAAU,UAAW,SAAU,SAAU,OAAQ,QAAS,SAAU,SAAU,OAAQ,SAAU,SAAU,QAAS,MAAO,UAAW,MAAO,QAAS,QAAS,KAAM,WAAY,WAAY,QAAS,KAAM,QAAS,OAAQ,KAAM,QAAS,KAAM,IAAK,KAAM,MAAO,QAAS,QACr/B8D,GAAQ9D,GAAO,CAAC,MAAO,IAAK,WAAY,cAAe,eAAgB,eAAgB,gBAAiB,mBAAoB,SAAU,WAAY,OAAQ,OAAQ,UAAW,eAAgB,cAAe,SAAU,OAAQ,IAAK,QAAS,WAAY,QAAS,QAAS,YAAa,OAAQ,iBAAkB,SAAU,OAAQ,WAAY,QAAS,OAAQ,OAAQ,UAAW,UAAW,WAAY,iBAAkB,OAAQ,OAAQ,QAAS,SAAU,SAAU,OAAQ,WAAY,QAAS,OAAQ,QAAS,OAAQ,UAC/f+D,GAAa/D,GAAO,CAAC,UAAW,gBAAiB,sBAAuB,cAAe,mBAAoB,oBAAqB,oBAAqB,iBAAkB,eAAgB,UAAW,UAAW,UAAW,UAAW,UAAW,iBAAkB,UAAW,UAAW,cAAe,eAAgB,WAAY,eAAgB,qBAAsB,cAAe,SAAU,iBAKhYgE,GAAgBhE,GAAO,CAAC,UAAW,gBAAiB,SAAU,UAAW,YAAa,mBAAoB,iBAAkB,gBAAiB,gBAAiB,gBAAiB,QAAS,YAAa,OAAQ,eAAgB,YAAa,UAAW,gBAAiB,SAAU,MAAO,aAAc,UAAW,QAChTiE,GAAWjE,GAAO,CAAC,OAAQ,WAAY,SAAU,UAAW,QAAS,SAAU,KAAM,aAAc,gBAAiB,KAAM,KAAM,QAAS,UAAW,WAAY,QAAS,OAAQ,KAAM,SAAU,QAAS,SAAU,OAAQ,OAAQ,UAAW,SAAU,MAAO,QAAS,MAAO,SAAU,aAAc,gBAGxSkE,GAAmBlE,GAAO,CAAC,UAAW,cAAe,aAAc,WAAY,YAAa,UAAW,UAAW,SAAU,SAAU,QAAS,YAAa,aAAc,iBAAkB,cAAe,SAC3MjE,GAAOiE,GAAO,CAAC,UAEfmE,GAAOnE,GAAO,CAAC,SAAU,SAAU,QAAS,MAAO,iBAAkB,eAAgB,uBAAwB,WAAY,aAAc,UAAW,SAAU,UAAW,cAAe,cAAe,UAAW,OAAQ,QAAS,QAAS,QAAS,OAAQ,UAAW,WAAY,eAAgB,SAAU,cAAe,WAAY,WAAY,UAAW,MAAO,WAAY,0BAA2B,wBAAyB,WAAY,YAAa,UAAW,eAAgB,cAAe,OAAQ,MAAO,UAAW,SAAU,SAAU,OAAQ,OAAQ,WAAY,KAAM,QAAS,YAAa,YAAa,QAAS,OAAQ,QAAS,OAAQ,OAAQ,UAAW,OAAQ,MAAO,MAAO,YAAa,QAAS,SAAU,MAAO,YAAa,WAAY,QAAS,OAAQ,QAAS,UAAW,aAAc,SAAU,OAAQ,UAAW,OAAQ,UAAW,cAAe,cAAe,UAAW,gBAAiB,sBAAuB,SAAU,UAAW,UAAW,aAAc,WAAY,MAAO,WAAY,MAAO,WAAY,OAAQ,OAAQ,UAAW,aAAc,QAAS,WAAY,QAAS,OAAQ,QAAS,OAAQ,OAAQ,UAAW,QAAS,MAAO,SAAU,OAAQ,QAAS,UAAW,WAAY,QAAS,YAAa,OAAQ,SAAU,SAAU,QAAS,QAAS,OAAQ,QAAS,SACpwCoE,GAAMpE,GAAO,CAAC,gBAAiB,aAAc,WAAY,qBAAsB,YAAa,SAAU,gBAAiB,gBAAiB,UAAW,gBAAiB,iBAAkB,QAAS,OAAQ,KAAM,QAAS,OAAQ,gBAAiB,YAAa,YAAa,QAAS,sBAAuB,8BAA+B,gBAAiB,kBAAmB,KAAM,KAAM,IAAK,KAAM,KAAM,kBAAmB,YAAa,UAAW,UAAW,MAAO,WAAY,YAAa,MAAO,WAAY,OAAQ,eAAgB,YAAa,SAAU,cAAe,cAAe,gBAAiB,cAAe,YAAa,mBAAoB,eAAgB,aAAc,eAAgB,cAAe,KAAM,KAAM,KAAM,KAAM,aAAc,WAAY,gBAAiB,oBAAqB,SAAU,OAAQ,KAAM,kBAAmB,KAAM,MAAO,YAAa,IAAK,KAAM,KAAM,KAAM,KAAM,UAAW,YAAa,aAAc,WAAY,OAAQ,eAAgB,iBAAkB,eAAgB,mBAAoB,iBAAkB,QAAS,aAAc,aAAc,eAAgB,eAAgB,cAAe,cAAe,mBAAoB,YAAa,MAAO,OAAQ,YAAa,QAAS,SAAU,OAAQ,MAAO,OAAQ,aAAc,SAAU,WAAY,UAAW,QAAS,SAAU,cAAe,SAAU,WAAY,cAAe,OAAQ,aAAc,sBAAuB,mBAAoB,eAAgB,SAAU,gBAAiB,sBAAuB,iBAAkB,IAAK,KAAM,KAAM,SAAU,OAAQ,OAAQ,cAAe,YAAa,UAAW,SAAU,SAAU,QAAS,OAAQ,kBAAmB,QAAS,mBAAoB,mBAAoB,eAAgB,cAAe,eAAgB,cAAe,aAAc,eAAgB,mBAAoB,oBAAqB,iBAAkB,kBAAmB,oBAAqB,iBAAkB,SAAU,eAAgB,QAAS,eAAgB,iBAAkB,WAAY,cAAe,UAAW,UAAW,YAAa,mBAAoB,cAAe,kBAAmB,iBAAkB,aAAc,OAAQ,KAAM,KAAM,UAAW,SAAU,UAAW,aAAc,UAAW,aAAc,gBAAiB,gBAAiB,QAAS,eAAgB,OAAQ,eAAgB,mBAAoB,mBAAoB,IAAK,KAAM,KAAM,QAAS,IAAK,KAAM,KAAM,IAAK,eACz0EqE,GAASrE,GAAO,CAAC,SAAU,cAAe,QAAS,WAAY,QAAS,eAAgB,cAAe,aAAc,aAAc,QAAS,MAAO,UAAW,eAAgB,WAAY,QAAS,QAAS,SAAU,OAAQ,KAAM,UAAW,SAAU,gBAAiB,SAAU,SAAU,iBAAkB,YAAa,WAAY,cAAe,UAAW,UAAW,gBAAiB,WAAY,WAAY,OAAQ,WAAY,WAAY,aAAc,UAAW,SAAU,SAAU,cAAe,gBAAiB,uBAAwB,YAAa,YAAa,aAAc,WAAY,iBAAkB,iBAAkB,YAAa,UAAW,QAAS,UACrpBsE,GAAMtE,GAAO,CAAC,aAAc,SAAU,cAAe,YAAa,gBAGlEuE,GAAgBtE,GAAK,6BACrBuE,GAAWvE,GAAK,yBAChBwE,GAAcxE,GAAK,iBACnByE,GAAYzE,GAAK,gCACjB0E,GAAY1E,GAAK,kBACjB2E,GAAiB3E,GAAK,oGAEtB4E,GAAoB5E,GAAK,yBACzB6E,GAAkB7E,GAAK,+DAEvB8E,GAAe9E,GAAK,WACpB+E,GAAiB/E,GAAK,4BAE5B,IAAIgF,UAAkCjF,OAAO,CAC3CkF,UAAW,KACXP,aACAG,mBACAE,kBACAN,aACAK,gBACAP,YACAI,kBACAC,qBACAN,iBACAE,iBAKF,MAAMU,GACK,EADLA,GAGE,EAHFA,GASoB,EATpBA,GAUK,EAVLA,GAWM,EAinCZ,IAAIC,GAtjCJ,SAASC,IACP,IAAIC,EAAS5E,UAAU9N,OAAS,QAAsB,IAAjB8N,UAAU,GAAmBA,UAAU,GAtDnD,oBAAX4E,OAAyB,KAAOA,OAuD9C,MAAMC,EAAYC,GAAQH,EAAgBG,GAG1C,GAFAD,EAAUE,QAAU,QACpBF,EAAUG,QAAU,IACfJ,IAAWA,EAAO7H,UAAY6H,EAAO7H,SAASkI,WAAaR,KAAuBG,EAAOM,QAI5F,OADAL,EAAUM,aAAc,EACjBN,EAET,IACE9H,SAAAA,GACE6H,EACJ,MAAMQ,EAAmBrI,EACnBsI,EAAgBD,EAAiBC,eACjCC,iBACJA,EAAAC,oBACAA,EAAAC,KACAA,EAAAN,QACAA,EAAAO,WACAA,EAAAC,aACAA,EAAed,EAAOc,cAAgBd,EAAOe,gBAAAC,gBAC7CA,EAAAC,UACAA,EAAAC,aACAA,GACElB,EACEmB,EAAmBb,EAAQzE,UAC3BlD,EAAYwF,GAAagD,EAAkB,aAC3CvH,EAASuE,GAAagD,EAAkB,UACxCC,EAAiBjD,GAAagD,EAAkB,eAChDE,EAAgBlD,GAAagD,EAAkB,cAC/CG,EAAgBnD,GAAagD,EAAkB,cAOrD,GAAmC,mBAAxBR,EAAoC,CAC7C,MAAMY,EAAWpJ,EAASC,cAAc,YACpCmJ,EAAS9Q,SAAW8Q,EAAS9Q,QAAQ+Q,gBACvCrJ,EAAWoJ,EAAS9Q,QAAQ+Q,cAEhC,CACA,IAAIC,EACAC,EAAY,GAChB,MAAMC,eACJA,EAAAC,mBACAA,EAAAC,uBACAA,EAAAC,qBACAA,GACE3J,GACE4J,WACJA,GACEvB,EACJ,IAAIwB,EApEG,CACLC,wBAAyB,GACzBC,sBAAuB,GACvBC,uBAAwB,GACxBC,yBAA0B,GAC1BC,uBAAwB,GACxBC,wBAAyB,GACzBC,sBAAuB,GACvBC,oBAAqB,GACrBC,uBAAwB,IA+D1BxC,EAAUM,YAAiC,mBAAZlG,IAAmD,mBAAlBiH,GAAgCK,QAAwD,IAAtCA,EAAee,mBACjI,MACEzD,cAAAA,EACAC,SAAAA,EACAC,YAAAA,EACAC,UAAAA,EACAC,UAAAA,EACAE,kBAAAA,EACAC,gBAAAA,EACAE,eAAAA,GACEC,GACJ,IACEL,eAAgBqD,GACdhD,GAMAiD,EAAe,KACnB,MAAMC,EAAuBxF,GAAS,CAAA,EAAI,IAAIkB,MAAWC,MAAUC,MAAeE,MAAalI,KAE/F,IAAIqM,EAAe,KACnB,MAAMC,EAAuB1F,GAAS,CAAA,EAAI,IAAIwB,MAASC,MAAQC,MAAWC,KAO1E,IAAIgE,EAA0BxU,OAAOmM,KAAKC,GAAO,KAAM,CACrDqI,aAAc,CACZC,UAAU,EACVC,cAAc,EACdC,YAAY,EACZ7Q,MAAO,MAET8Q,mBAAoB,CAClBH,UAAU,EACVC,cAAc,EACdC,YAAY,EACZ7Q,MAAO,MAET+Q,+BAAgC,CAC9BJ,UAAU,EACVC,cAAc,EACdC,YAAY,EACZ7Q,OAAO,MAIPgR,EAAc,KAEdC,EAAc,KAElB,MAAMC,EAAyBjV,OAAOmM,KAAKC,GAAO,KAAM,CACtD8I,SAAU,CACRR,UAAU,EACVC,cAAc,EACdC,YAAY,EACZ7Q,MAAO,MAEToR,eAAgB,CACdT,UAAU,EACVC,cAAc,EACdC,YAAY,EACZ7Q,MAAO,SAIX,IAAIqR,GAAkB,EAElBC,GAAkB,EAElBC,GAA0B,EAG1BC,GAA2B,EAI3BC,GAAqB,EAIrBC,GAAe,EAEfC,GAAiB,EAEjBC,GAAa,EAGbC,IAAa,EAKbC,IAAa,EAGbC,IAAsB,EAGtBC,IAAsB,EAItBC,IAAe,EAcfC,IAAuB,EAGvBC,IAAe,EAGfC,IAAW,EAEXC,GAAe,CAAA,EAEfC,GAAkB,KACtB,MAAMC,GAA0BzH,GAAS,CAAA,EAAI,CAAC,iBAAkB,QAAS,WAAY,OAAQ,gBAAiB,OAAQ,SAAU,OAAQ,KAAM,KAAM,KAAM,KAAM,QAAS,UAAW,WAAY,WAAY,YAAa,SAAU,QAAS,MAAO,WAAY,QAAS,QAAS,QAAS,QAE1R,IAAI0H,GAAgB,KACpB,MAAMC,GAAwB3H,GAAS,CAAA,EAAI,CAAC,QAAS,QAAS,MAAO,SAAU,QAAS,UAExF,IAAI4H,GAAsB,KAC1B,MAAMC,GAA8B7H,GAAS,GAAI,CAAC,MAAO,QAAS,MAAO,KAAM,QAAS,OAAQ,UAAW,cAAe,OAAQ,UAAW,QAAS,QAAS,QAAS,UAClK8H,GAAmB,qCACnBC,GAAgB,6BAChBC,GAAiB,+BAEvB,IAAIC,GAAYD,GACZE,IAAiB,EAEjBC,GAAqB,KACzB,MAAMC,GAA6BpI,GAAS,GAAI,CAAC8H,GAAkBC,GAAeC,IAAiBhJ,IACnG,IAAIqJ,GAAiCrI,GAAS,CAAA,EAAI,CAAC,KAAM,KAAM,KAAM,KAAM,UACvEsI,GAA0BtI,GAAS,GAAI,CAAC,mBAK5C,MAAMuI,GAA+BvI,GAAS,CAAA,EAAI,CAAC,QAAS,QAAS,OAAQ,IAAK,WAElF,IAAIwI,GAAoB,KACxB,MAAMC,GAA+B,CAAC,wBAAyB,aAE/D,IAAItI,GAAoB,KAEpBuI,GAAS,KAGb,MAAMC,GAAc7N,EAASC,cAAc,QACrC6N,GAAoB,SAA2BC,GACnD,OAAOA,aAAqBlW,QAAUkW,aAAqBC,QAC7D,EAOMC,GAAe,WACnB,IAAIC,EAAMjL,UAAU9N,OAAS,QAAsB,IAAjB8N,UAAU,GAAmBA,UAAU,GAAK,CAAA,EAC9E,IAAI2K,IAAUA,KAAWM,EAAzB,CAoIA,GAhIKA,GAAsB,iBAARA,IACjBA,EAAM,CAAA,GAGRA,EAAMxI,GAAMwI,GACZR,IAEgE,IAAhEC,GAA6BjU,QAAQwU,EAAIR,mBA7BT,YA6BiEQ,EAAIR,kBAErGrI,GAA0C,0BAAtBqI,GAAgDxJ,GAAiBF,GAErFyG,EAAejG,GAAqB0J,EAAK,gBAAkBhJ,GAAS,CAAA,EAAIgJ,EAAIzD,aAAcpF,IAAqBqF,EAC/GC,EAAenG,GAAqB0J,EAAK,gBAAkBhJ,GAAS,CAAA,EAAIgJ,EAAIvD,aAActF,IAAqBuF,EAC/GyC,GAAqB7I,GAAqB0J,EAAK,sBAAwBhJ,GAAS,CAAA,EAAIgJ,EAAIb,mBAAoBnJ,IAAkBoJ,GAC9HR,GAAsBtI,GAAqB0J,EAAK,qBAAuBhJ,GAASQ,GAAMqH,IAA8BmB,EAAIC,kBAAmB9I,IAAqB0H,GAChKH,GAAgBpI,GAAqB0J,EAAK,qBAAuBhJ,GAASQ,GAAMmH,IAAwBqB,EAAIE,kBAAmB/I,IAAqBwH,GACpJH,GAAkBlI,GAAqB0J,EAAK,mBAAqBhJ,GAAS,CAAA,EAAIgJ,EAAIxB,gBAAiBrH,IAAqBsH,GACxHvB,EAAc5G,GAAqB0J,EAAK,eAAiBhJ,GAAS,GAAIgJ,EAAI9C,YAAa/F,IAAqBK,GAAM,CAAA,GAClH2F,EAAc7G,GAAqB0J,EAAK,eAAiBhJ,GAAS,GAAIgJ,EAAI7C,YAAahG,IAAqBK,GAAM,CAAA,GAClH+G,KAAejI,GAAqB0J,EAAK,iBAAkBA,EAAIzB,aAC/DhB,GAA0C,IAAxByC,EAAIzC,gBACtBC,GAA0C,IAAxBwC,EAAIxC,gBACtBC,EAA0BuC,EAAIvC,0BAA2B,EACzDC,GAA4D,IAAjCsC,EAAItC,yBAC/BC,EAAqBqC,EAAIrC,qBAAsB,EAC/CC,GAAoC,IAArBoC,EAAIpC,aACnBC,EAAiBmC,EAAInC,iBAAkB,EACvCG,GAAagC,EAAIhC,aAAc,EAC/BC,GAAsB+B,EAAI/B,sBAAuB,EACjDC,GAAsB8B,EAAI9B,sBAAuB,EACjDH,GAAaiC,EAAIjC,aAAc,EAC/BI,IAAoC,IAArB6B,EAAI7B,aACnBC,GAAuB4B,EAAI5B,uBAAwB,EACnDC,IAAoC,IAArB2B,EAAI3B,aACnBC,GAAW0B,EAAI1B,WAAY,EAC3BhC,EAAmB0D,EAAIG,oBAAsBlH,GAC7CgG,GAAYe,EAAIf,WAAaD,GAC7BK,GAAiCW,EAAIX,gCAAkCA,GACvEC,GAA0BU,EAAIV,yBAA2BA,GACzD3C,EAA0BqD,EAAIrD,yBAA2B,CAAA,EACrDqD,EAAIrD,yBAA2BiD,GAAkBI,EAAIrD,wBAAwBC,gBAC/ED,EAAwBC,aAAeoD,EAAIrD,wBAAwBC,cAEjEoD,EAAIrD,yBAA2BiD,GAAkBI,EAAIrD,wBAAwBK,sBAC/EL,EAAwBK,mBAAqBgD,EAAIrD,wBAAwBK,oBAEvEgD,EAAIrD,yBAAiG,kBAA/DqD,EAAIrD,wBAAwBM,iCACpEN,EAAwBM,+BAAiC+C,EAAIrD,wBAAwBM,gCAEnFU,IACFH,GAAkB,GAEhBS,KACFD,IAAa,GAGXO,KACFhC,EAAevF,GAAS,CAAA,EAAI5G,IAC5BqM,EAAe,IACW,IAAtB8B,GAAa/F,OACfxB,GAASuF,EAAcrE,IACvBlB,GAASyF,EAAcjE,MAEA,IAArB+F,GAAa9F,MACfzB,GAASuF,EAAcpE,IACvBnB,GAASyF,EAAchE,IACvBzB,GAASyF,EAAc9D,MAEO,IAA5B4F,GAAanG,aACfpB,GAASuF,EAAcnE,IACvBpB,GAASyF,EAAchE,IACvBzB,GAASyF,EAAc9D,MAEG,IAAxB4F,GAAa7F,SACf1B,GAASuF,EAAcjE,IACvBtB,GAASyF,EAAc/D,IACvB1B,GAASyF,EAAc9D,MAIvBqH,EAAII,WACsB,mBAAjBJ,EAAII,SACbhD,EAAuBC,SAAW2C,EAAII,UAElC7D,IAAiBC,IACnBD,EAAe/E,GAAM+E,IAEvBvF,GAASuF,EAAcyD,EAAII,SAAUjJ,MAGrC6I,EAAIK,WACsB,mBAAjBL,EAAIK,SACbjD,EAAuBE,eAAiB0C,EAAIK,UAExC5D,IAAiBC,IACnBD,EAAejF,GAAMiF,IAEvBzF,GAASyF,EAAcuD,EAAIK,SAAUlJ,MAGrC6I,EAAIC,mBACNjJ,GAAS4H,GAAqBoB,EAAIC,kBAAmB9I,IAEnD6I,EAAIxB,kBACFA,KAAoBC,KACtBD,GAAkBhH,GAAMgH,KAE1BxH,GAASwH,GAAiBwB,EAAIxB,gBAAiBrH,KAE7C6I,EAAIM,sBACF9B,KAAoBC,KACtBD,GAAkBhH,GAAMgH,KAE1BxH,GAASwH,GAAiBwB,EAAIM,oBAAqBnJ,KAGjDkH,KACF9B,EAAa,UAAW,GAGtBsB,GACF7G,GAASuF,EAAc,CAAC,OAAQ,OAAQ,SAGtCA,EAAagE,QACfvJ,GAASuF,EAAc,CAAC,iBACjBW,EAAYsD,OAEjBR,EAAIS,qBAAsB,CAC5B,GAAmD,mBAAxCT,EAAIS,qBAAqBC,WAClC,MAAMjK,GAAgB,+EAExB,GAAwD,mBAA7CuJ,EAAIS,qBAAqBE,gBAClC,MAAMlK,GAAgB,oFAGxB2E,EAAqB4E,EAAIS,qBAEzBpF,EAAYD,EAAmBsF,WAAW,GAC5C,WAE6B,IAAvBtF,IACFA,EAza0B,SAAmCP,EAAc+F,GACjF,GAA4B,iBAAjB/F,GAAkE,mBAA9BA,EAAagG,aAC1D,OAAO,KAKT,IAAIC,EAAS,KACb,MAAMC,EAAY,wBACdH,GAAqBA,EAAkBI,aAAaD,KACtDD,EAASF,EAAkBK,aAAaF,IAE1C,MAAMG,EAAa,aAAeJ,EAAS,IAAMA,EAAS,IAC1D,IACE,OAAOjG,EAAagG,aAAaK,EAAY,CAC3CR,WAAWlI,GACFA,EAETmI,gBAAgBQ,GACPA,GAGb,OAASC,GAKP,OAAO,IACT,CACF,CA4Y6BC,CAA0BxG,EAAcT,IAGpC,OAAvBgB,GAAoD,iBAAdC,IACxCA,EAAYD,EAAmBsF,WAAW,KAK1CrM,IACFA,GAAO2L,GAETN,GAASM,CA5JT,CA6JF,EAIMsB,GAAetK,GAAS,GAAI,IAAImB,MAAUC,MAAeC,KACzDkJ,GAAkBvK,GAAS,CAAA,EAAI,IAAIsB,MAAaC,KAoFhDiJ,GAAe,SAAsBC,GACzC9L,GAAUiE,EAAUG,QAAS,CAC3B1C,QAASoK,IAEX,IAEExG,EAAcwG,GAAMC,YAAYD,EAClC,OAASL,GACP7N,EAAOkO,EACT,CACF,EAOME,GAAmB,SAA0BlV,EAAM4K,GACvD,IACE1B,GAAUiE,EAAUG,QAAS,CAC3B6H,UAAWvK,EAAQwK,iBAAiBpV,GACpCqV,KAAMzK,GAEV,OAAS+J,GACPzL,GAAUiE,EAAUG,QAAS,CAC3B6H,UAAW,KACXE,KAAMzK,GAEV,CAGA,GAFAA,EAAQ0K,gBAAgBtV,GAEX,OAATA,EACF,GAAIuR,IAAcC,GAChB,IACEuD,GAAanK,EACf,OAAS+J,GAAI,MAEb,IACE/J,EAAQ2K,aAAavV,EAAM,GAC7B,OAAS2U,GAAI,CAGnB,EAOMa,GAAgB,SAAuBC,GAE3C,IAAIC,EAAM,KACNC,EAAoB,KACxB,GAAIrE,GACFmE,EAAQ,oBAAsBA,MACzB,CAEL,MAAMxS,EAAUwG,GAAYgM,EAAO,eACnCE,EAAoB1S,GAAWA,EAAQ,EACzC,CAC0B,0BAAtB8P,IAAiDP,KAAcD,KAEjEkD,EAAQ,iEAAmEA,EAAQ,kBAErF,MAAMG,EAAejH,EAAqBA,EAAmBsF,WAAWwB,GAASA,EAKjF,GAAIjD,KAAcD,GAChB,IACEmD,GAAM,IAAIvH,GAAY0H,gBAAgBD,EAAc7C,GACtD,OAAS4B,GAAI,CAGf,IAAKe,IAAQA,EAAII,gBAAiB,CAChCJ,EAAM7G,EAAekH,eAAevD,GAAW,WAAY,MAC3D,IACEkD,EAAII,gBAAgB9P,UAAYyM,GAAiB7D,EAAYgH,CAC/D,OAASjB,GAET,CACF,CACA,MAAMqB,EAAON,EAAIM,MAAQN,EAAII,gBAK7B,OAJIL,GAASE,GACXK,EAAKC,aAAa5Q,EAAS6Q,eAAeP,GAAoBK,EAAKG,WAAW,IAAM,MAGlF3D,KAAcD,GACTvD,EAAqBoH,KAAKV,EAAKtE,EAAiB,OAAS,QAAQ,GAEnEA,EAAiBsE,EAAII,gBAAkBE,CAChD,EAOMK,GAAsB,SAA6BjJ,GACvD,OAAO0B,EAAmBsH,KAAKhJ,EAAKsB,eAAiBtB,EAAMA,EAE3DW,EAAWuI,aAAevI,EAAWwI,aAAexI,EAAWyI,UAAYzI,EAAW0I,4BAA8B1I,EAAW2I,mBAAoB,KACrJ,EAOMC,GAAe,SAAsB/L,GACzC,OAAOA,aAAmBsD,IAAgD,iBAArBtD,EAAQgM,UAAwD,iBAAxBhM,EAAQiM,aAA2D,mBAAxBjM,EAAQqK,eAAgCrK,EAAQkM,sBAAsB9I,IAAoD,mBAA5BpD,EAAQ0K,iBAAkE,mBAAzB1K,EAAQ2K,cAA+D,iBAAzB3K,EAAQmM,cAA6D,mBAAzBnM,EAAQqL,cAAgE,mBAA1BrL,EAAQoM,cACza,EAOMC,GAAU,SAAiBxX,GAC/B,MAAuB,mBAATqO,GAAuBrO,aAAiBqO,CACxD,EACA,SAASoJ,GAAchI,EAAOiI,EAAarW,GACzC+H,GAAaqG,EAAOkI,IAClBA,EAAKhB,KAAKjJ,EAAWgK,EAAarW,EAAMmS,KAE5C,CAUA,MAAMoE,GAAoB,SAA2BF,GACnD,IAAIxZ,EAAU,KAId,GAFAuZ,GAAchI,EAAMK,uBAAwB4H,EAAa,MAErDR,GAAaQ,GAEf,OADApC,GAAaoC,IACN,EAGT,MAAMG,EAAU5M,GAAkByM,EAAYP,UAO9C,GALAM,GAAchI,EAAMQ,oBAAqByH,EAAa,CACpDG,UACAC,YAAazH,IAGXqB,GAAgBgG,EAAYH,kBAAoBC,GAAQE,EAAYK,oBAAsBzN,GAAW,WAAYoN,EAAYnR,YAAc+D,GAAW,WAAYoN,EAAYN,aAEhL,OADA9B,GAAaoC,IACN,EAGT,GAAIA,EAAY5J,WAAaR,GAE3B,OADAgI,GAAaoC,IACN,EAGT,GAAIhG,GAAgBgG,EAAY5J,WAAaR,IAAqBhD,GAAW,UAAWoN,EAAYrW,MAElG,OADAiU,GAAaoC,IACN,EAGT,KAAMxG,EAAuBC,oBAAoByC,UAAY1C,EAAuBC,SAAS0G,OAAexH,EAAawH,IAAY7G,EAAY6G,IAAW,CAE1J,IAAK7G,EAAY6G,IAAYG,GAAsBH,GAAU,CAC3D,GAAIpH,EAAwBC,wBAAwBjT,QAAU6M,GAAWmG,EAAwBC,aAAcmH,GAC7G,OAAO,EAET,GAAIpH,EAAwBC,wBAAwBkD,UAAYnD,EAAwBC,aAAamH,GACnG,OAAO,CAEX,CAEA,GAAI1F,KAAiBG,GAAgBuF,GAAU,CAC7C,MAAMI,EAAalJ,EAAc2I,IAAgBA,EAAYO,WACvDvB,EAAa5H,EAAc4I,IAAgBA,EAAYhB,WAC7D,GAAIA,GAAcuB,EAAY,CAE5B,IAAA,IAASC,EADUxB,EAAW3b,OACJ,EAAGmd,GAAK,IAAKA,EAAG,CACxC,MAAMC,EAAa/R,EAAUsQ,EAAWwB,IAAI,GAC5CC,EAAWC,gBAAkBV,EAAYU,gBAAkB,GAAK,EAChEH,EAAWzB,aAAa2B,EAAYtJ,EAAe6I,GACrD,CACF,CACF,CAEA,OADApC,GAAaoC,IACN,CACT,CAEA,OAAIA,aAAuB3J,IAhRA,SAA8B5C,GACzD,IAAIkN,EAAStJ,EAAc5D,GAGtBkN,GAAWA,EAAOR,UACrBQ,EAAS,CACPf,aAAcvE,GACd8E,QAAS,aAGb,MAAMA,EAAUjO,GAAkBuB,EAAQ0M,SACpCS,EAAgB1O,GAAkByO,EAAOR,SAC/C,QAAK5E,GAAmB9H,EAAQmM,gBAG5BnM,EAAQmM,eAAiBzE,GAIvBwF,EAAOf,eAAiBxE,GACP,QAAZ+E,EAKLQ,EAAOf,eAAiB1E,GACP,QAAZiF,IAAwC,mBAAlBS,GAAsCnF,GAA+BmF,IAI7FC,QAAQnD,GAAayC,IAE1B1M,EAAQmM,eAAiB1E,GAIvByF,EAAOf,eAAiBxE,GACP,SAAZ+E,EAILQ,EAAOf,eAAiBzE,GACP,SAAZgF,GAAsBzE,GAAwBkF,GAIhDC,QAAQlD,GAAgBwC,IAE7B1M,EAAQmM,eAAiBxE,KAIvBuF,EAAOf,eAAiBzE,KAAkBO,GAAwBkF,OAGlED,EAAOf,eAAiB1E,KAAqBO,GAA+BmF,MAKxEjD,GAAgBwC,KAAaxE,GAA6BwE,KAAazC,GAAayC,MAGpE,0BAAtBvE,KAAiDL,GAAmB9H,EAAQmM,eAQlF,CAyMyCkB,CAAqBd,IAC1DpC,GAAaoC,IACN,GAGQ,aAAZG,GAAsC,YAAZA,GAAqC,aAAZA,IAA2BvN,GAAW,8BAA+BoN,EAAYnR,YAKrIkL,GAAsBiG,EAAY5J,WAAaR,KAEjDpP,EAAUwZ,EAAYN,YACtBhO,GAAa,CAACsD,EAAeC,EAAUC,GAAc6L,IACnDva,EAAU+L,GAAc/L,EAASua,EAAM,OAErCf,EAAYN,cAAgBlZ,IAC9BuL,GAAUiE,EAAUG,QAAS,CAC3B1C,QAASuM,EAAYtR,cAEvBsR,EAAYN,YAAclZ,IAI9BuZ,GAAchI,EAAME,sBAAuB+H,EAAa,OACjD,IAnBLpC,GAAaoC,IACN,EAmBX,EAUMgB,GAAoB,SAA2BC,EAAOC,EAAQ5Y,GAElE,GAAIiS,KAA4B,OAAX2G,GAA8B,SAAXA,KAAuB5Y,KAAS4F,GAAY5F,KAASyT,IAC3F,OAAO,EAMT,GAAInC,IAAoBL,EAAY2H,IAAWtO,GAAWuC,EAAW+L,SAAS,GAAWvH,GAAmB/G,GAAWwC,EAAW8L,SAAS,GAAW1H,EAAuBE,0BAA0BwC,UAAY1C,EAAuBE,eAAewH,EAAQD,SAAQ,IAAYpI,EAAaqI,IAAW3H,EAAY2H,IACvT,KAIAZ,GAAsBW,KAAWlI,EAAwBC,wBAAwBjT,QAAU6M,GAAWmG,EAAwBC,aAAciI,IAAUlI,EAAwBC,wBAAwBkD,UAAYnD,EAAwBC,aAAaiI,MAAYlI,EAAwBK,8BAA8BrT,QAAU6M,GAAWmG,EAAwBK,mBAAoB8H,IAAWnI,EAAwBK,8BAA8B8C,UAAYnD,EAAwBK,mBAAmB8H,EAAQD,KAG/e,OAAXC,GAAmBnI,EAAwBM,iCAAmCN,EAAwBC,wBAAwBjT,QAAU6M,GAAWmG,EAAwBC,aAAc1Q,IAAUyQ,EAAwBC,wBAAwBkD,UAAYnD,EAAwBC,aAAa1Q,KAClS,OAAO,OAGX,GAAW0S,GAAoBkG,SAAS,GAAWtO,GAAW8F,EAAkBnG,GAAcjK,EAAOiN,EAAiB,WAAM,GAAuB,QAAX2L,GAA+B,eAAXA,GAAsC,SAAXA,GAAgC,WAAVD,GAAwD,IAAlCzO,GAAclK,EAAO,WAAkBwS,GAAcmG,IAAQ,GAAWpH,IAA4BjH,GAAW0C,EAAmB/C,GAAcjK,EAAOiN,EAAiB,WAAM,GAAWjN,EAC1Z,OAAO,OAET,OAAO,CACT,EASMgY,GAAwB,SAA+BH,GAC3D,MAAmB,mBAAZA,GAAgC7N,GAAY6N,EAAS1K,EAC9D,EAWM0L,GAAsB,SAA6BnB,GAEvDD,GAAchI,EAAMI,yBAA0B6H,EAAa,MAC3D,MAAML,WACJA,GACEK,EAEJ,IAAKL,GAAcH,GAAaQ,GAC9B,OAEF,MAAMoB,EAAY,CAChBC,SAAU,GACVC,UAAW,GACXC,UAAU,EACVC,kBAAmB3I,EACnB4I,mBAAe,GAEjB,IAAIjO,EAAImM,EAAWtc,OAEnB,KAAOmQ,KAAK,CACV,MAAMkO,EAAO/B,EAAWnM,IAClB3K,KACJA,EAAA+W,aACAA,EACAtX,MAAOgZ,GACLI,EACER,EAAS3N,GAAkB1K,GAC3B8Y,EAAYL,EAClB,IAAIhZ,EAAiB,UAATO,EAAmB8Y,EAAYlP,GAAWkP,GAkBtD,GAhBAP,EAAUC,SAAWH,EACrBE,EAAUE,UAAYhZ,EACtB8Y,EAAUG,UAAW,EACrBH,EAAUK,mBAAgB,EAC1B1B,GAAchI,EAAMO,sBAAuB0H,EAAaoB,GACxD9Y,EAAQ8Y,EAAUE,WAId9G,IAAoC,OAAX0G,GAA8B,SAAXA,IAE9CnD,GAAiBlV,EAAMmX,GAEvB1X,EA/mB8B,gBA+mBQA,GAGpC0R,GAAgBpH,GAAW,yCAA0CtK,GAAQ,CAC/EyV,GAAiBlV,EAAMmX,GACvB,QACF,CAEA,GAAe,kBAAXkB,GAA8B5O,GAAYhK,EAAO,QAAS,CAC5DyV,GAAiBlV,EAAMmX,GACvB,QACF,CAEA,GAAIoB,EAAUK,cACZ,SAGF,IAAKL,EAAUG,SAAU,CACvBxD,GAAiBlV,EAAMmX,GACvB,QACF,CAEA,IAAKlG,GAA4BlH,GAAW,OAAQtK,GAAQ,CAC1DyV,GAAiBlV,EAAMmX,GACvB,QACF,CAEIjG,GACFrI,GAAa,CAACsD,EAAeC,EAAUC,GAAc6L,IACnDzY,EAAQiK,GAAcjK,EAAOyY,EAAM,OAIvC,MAAME,EAAQ1N,GAAkByM,EAAYP,UAC5C,GAAKuB,GAAkBC,EAAOC,EAAQ5Y,GAAtC,CAKA,GAAIkP,GAA8C,iBAAjBP,GAAsE,mBAAlCA,EAAa2K,iBAChF,GAAIhC,QACF,OAAQ3I,EAAa2K,iBAAiBX,EAAOC,IAC3C,IAAK,cAED5Y,EAAQkP,EAAmBsF,WAAWxU,GACtC,MAEJ,IAAK,mBAEDA,EAAQkP,EAAmBuF,gBAAgBzU,GAOrD,GAAIA,IAAUqZ,EACZ,IACM/B,EACFI,EAAY6B,eAAejC,EAAc/W,EAAMP,GAG/C0X,EAAY5B,aAAavV,EAAMP,GAE7BkX,GAAaQ,GACfpC,GAAaoC,GAEblO,GAASkE,EAAUG,QAEvB,OAASqH,GACPO,GAAiBlV,EAAMmX,EACzB,CAlCF,MAFEjC,GAAiBlV,EAAMmX,EAsC3B,CAEAD,GAAchI,EAAMC,wBAAyBgI,EAAa,KAC5D,EAMM8B,GAAqB,SAASA,EAAmBC,GACrD,IAAIC,EAAa,KACjB,MAAMC,EAAiB/C,GAAoB6C,GAG3C,IADAhC,GAAchI,EAAMM,wBAAyB0J,EAAU,MAChDC,EAAaC,EAAeC,YAEjCnC,GAAchI,EAAMS,uBAAwBwJ,EAAY,MAExD9B,GAAkB8B,GAElBb,GAAoBa,GAEhBA,EAAWxb,mBAAmBiQ,GAChCqL,EAAmBE,EAAWxb,SAIlCuZ,GAAchI,EAAMG,uBAAwB6J,EAAU,KACxD,EA0KA,OAxKA/L,EAAUmM,SAAW,SAAU7D,GAC7B,IAAIlC,EAAMjL,UAAU9N,OAAS,QAAsB,IAAjB8N,UAAU,GAAmBA,UAAU,GAAK,CAAA,EAC1E0N,EAAO,KACPuD,EAAe,KACfpC,EAAc,KACdqC,EAAa,KASjB,GALA/G,IAAkBgD,EACdhD,KACFgD,EAAQ,eAGW,iBAAVA,IAAuBwB,GAAQxB,GAAQ,CAChD,GAA8B,mBAAnBA,EAAMjM,SAMf,MAAMQ,GAAgB,8BAJtB,GAAqB,iBADrByL,EAAQA,EAAMjM,YAEZ,MAAMQ,GAAgB,kCAK5B,CAEA,IAAKmD,EAAUM,YACb,OAAOgI,EAYT,GATKpE,GACHiC,GAAaC,GAGfpG,EAAUG,QAAU,GAEC,iBAAVmI,IACT5D,IAAW,GAETA,IAEF,GAAI4D,EAAMmB,SAAU,CAClB,MAAMU,EAAU5M,GAAkB+K,EAAMmB,UACxC,IAAK9G,EAAawH,IAAY7G,EAAY6G,GACxC,MAAMtN,GAAgB,0DAE1B,OACF,GAAWyL,aAAiB3H,EAG1BkI,EAAOR,GAAc,iBACrB+D,EAAevD,EAAKtH,cAAcO,WAAWwG,GAAO,GAChD8D,EAAahM,WAAaR,IAA+C,SAA1BwM,EAAa3C,UAG3B,SAA1B2C,EAAa3C,SADtBZ,EAAOuD,EAKPvD,EAAKpQ,YAAY2T,OAEd,CAEL,IAAKhI,KAAeL,IAAuBE,IAEpB,IAAvBqE,EAAM1W,QAAQ,KACZ,OAAO4P,GAAsB8C,GAAsB9C,EAAmBsF,WAAWwB,GAASA,EAK5F,GAFAO,EAAOR,GAAcC,IAEhBO,EACH,OAAOzE,GAAa,KAAOE,GAAsB7C,EAAY,EAEjE,CAEIoH,GAAQ1E,IACVyD,GAAaiB,EAAKyD,YAGpB,MAAMC,EAAerD,GAAoBxE,GAAW4D,EAAQO,GAE5D,KAAOmB,EAAcuC,EAAaL,YAEhChC,GAAkBF,GAElBmB,GAAoBnB,GAEhBA,EAAYxZ,mBAAmBiQ,GACjCqL,GAAmB9B,EAAYxZ,SAInC,GAAIkU,GACF,OAAO4D,EAGT,GAAIlE,GAAY,CACd,GAAIC,GAEF,IADAgI,EAAazK,EAAuBqH,KAAKJ,EAAKtH,eACvCsH,EAAKyD,YAEVD,EAAW5T,YAAYoQ,EAAKyD,iBAG9BD,EAAaxD,EAYf,OAVIhG,EAAa2J,YAAc3J,EAAa4J,kBAQ1CJ,EAAavK,EAAWmH,KAAK1I,EAAkB8L,GAAY,IAEtDA,CACT,CACA,IAAIK,EAAiBzI,EAAiB4E,EAAK8D,UAAY9D,EAAKhQ,UAW5D,OATIoL,GAAkBtB,EAAa,aAAekG,EAAKtH,eAAiBsH,EAAKtH,cAAcqL,SAAW/D,EAAKtH,cAAcqL,QAAQ/Z,MAAQ+J,GAAW4C,GAAcqJ,EAAKtH,cAAcqL,QAAQ/Z,QAC3L6Z,EAAiB,aAAe7D,EAAKtH,cAAcqL,QAAQ/Z,KAAO,MAAQ6Z,GAGxE3I,GACFrI,GAAa,CAACsD,EAAeC,EAAUC,GAAc6L,IACnD2B,EAAiBnQ,GAAcmQ,EAAgB3B,EAAM,OAGlDvJ,GAAsB8C,GAAsB9C,EAAmBsF,WAAW4F,GAAkBA,CACrG,EACA1M,EAAU6M,UAAY,WAEpB1G,GADUhL,UAAU9N,OAAS,QAAsB,IAAjB8N,UAAU,GAAmBA,UAAU,GAAK,CAAA,GAE9E+I,GAAa,CACf,EACAlE,EAAU8M,YAAc,WACtBhH,GAAS,KACT5B,GAAa,CACf,EACAlE,EAAU+M,iBAAmB,SAAUC,EAAKtB,EAAMpZ,GAE3CwT,IACHK,GAAa,CAAA,GAEf,MAAM8E,EAAQ1N,GAAkByP,GAC1B9B,EAAS3N,GAAkBmO,GACjC,OAAOV,GAAkBC,EAAOC,EAAQ5Y,EAC1C,EACA0N,EAAUiN,QAAU,SAAUC,EAAYC,GACZ,mBAAjBA,GAGXpR,GAAUgG,EAAMmL,GAAaC,EAC/B,EACAnN,EAAUoN,WAAa,SAAUF,EAAYC,GAC3C,QAAqB,IAAjBA,EAA4B,CAC9B,MAAMxb,EAAQkK,GAAiBkG,EAAMmL,GAAaC,GAClD,OAAiB,IAAVxb,OAAe,EAAYqK,GAAY+F,EAAMmL,GAAavb,EAAO,GAAG,EAC7E,CACA,OAAOmK,GAASiG,EAAMmL,GACxB,EACAlN,EAAUqN,YAAc,SAAUH,GAChCnL,EAAMmL,GAAc,EACtB,EACAlN,EAAUsN,eAAiB,WACzBvL,EA9jCK,CACLC,wBAAyB,GACzBC,sBAAuB,GACvBC,uBAAwB,GACxBC,yBAA0B,GAC1BC,uBAAwB,GACxBC,wBAAyB,GACzBC,sBAAuB,GACvBC,oBAAqB,GACrBC,uBAAwB,GAsjC1B,EACOxC,CACT,CACaF,GC71Cb,MAYMyN,GAAK,IAAIC,EAAW,CACxB5O,MAAM,EACN6O,SAAS,EACTC,aAAa,EACbC,UAAW,CAAChe,EAAKie,KACf,GAAIA,GAAQC,EAAKC,YAAYF,GAC3B,IACE,MAAO,2BACLC,EAAKF,UAAUhe,EAAK,CAAEoe,SAAUH,IAAQtb,oBAE5C,CAAA,MAEA,CAEF,MAAO,2BA1BY,CAACA,IACtB,MAAMzD,EAA8B,CAClC,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,UAEP,OAAOyD,EAAM1C,QAAQ,WAAauB,GAAMtC,EAAIsC,KAkBR6c,CAAere,qBAGlDse,IAAIC,GACJD,IAAIE,EAA0B,CAC7B1d,QAAS,eACT2d,MAAO,CACLC,OAAQ,SACRC,IAAK,kRCLX,MAAMC,EAAQC,EAIRC,EAAOC,EAIPC,EAAY,KAChBF,EAAK,aAAcF,EAAMliB,oBA9CzBuiB,cAAAC,qBA6BM,MA7BNC,GA6BM,CA5BJC,EAAAA,mBA2BM,MA3BNC,GA2BM,CA1BJD,EAAAA,mBAME,MAAA,CALCE,IAAKT,EAAAniB,IACN6iB,IAAI,kBACJC,MAAM,aACNC,QAAQ,OACPC,QAAOV,wsBCyBhB,MAAMW,EAAeC,EAAAA,IAAwB,CAC3CC,UAAU,EACVC,UAAU,EACVC,YAAY,EACZC,OAAO,EACPC,QAAS,CACP,CACEtgB,KAAM,YACN2f,IAAK,qBAxCTL,cAAAC,qBAeM,MAfNC,GAeM,CAdJC,EAAAA,mBAaM,MAbNC,GAaM,CAZJa,cAWEC,EAAAA,MAAAC,EAAAA,aAAA,CAVCC,QAAO,IAAiBV,EAAAhd,qCAAqGkc,EAAAniB,OAS9H8iB,MAAM,wOCWd,MAAMZ,EAAQC,EAIRyB,EAAW7a,EAAAA,SAAS,IAEjB,iCADSjI,EAAaohB,EAAMliB,sBA5BnCuiB,cAAAC,qBAYM,MAZNC,GAYM,CAXJC,EAAAA,mBAUM,MAVNC,GAUM,CATJD,EAAAA,mBAQE,SAAA,CAPAmB,MAAM,OACNpW,OAAO,OACNmV,IAAKgB,EAAA3d,MACN6d,YAAY,IACZC,MAAM,2FACNC,gBAAA,GACAlB,MAAM,uSCTZP,cAAAC,qBA+BM,MA/BNC,GA+BM,CA9BJC,EAAAA,mBA6BM,MA7BNC,GA6BM,EA5BJJ,EAAAA,WAAA,GAAAC,EAAAA,mBA2BMyB,WAAA,KAAAC,EAAAA,WA1B0B/B,EAAAgC,WAAU,CAAhC1b,EAAO2b,mBADjB5B,EAAAA,mBA2BM,MAAA,CAzBH6B,IAAKD,EACNtB,MAAM,2BAENJ,EAAAA,mBAcM,MAAA,CAdDI,MAAM,sBAAoB,CAC7BJ,EAAAA,mBAYM,MAAA,CAXJI,MAAM,aACN/f,KAAK,OACLuhB,OAAO,eACPC,QAAQ,cAER7B,EAAAA,mBAKE,OAAA,CAJA,iBAAe,QACf,kBAAgB,QAChB,eAAa,IACb8B,EAAE,gKAIR9B,EAAAA,mBAMM,MANN+B,GAMM,CALJ/B,EAAAA,mBAA4C,IAA5CgC,GAA4CC,EAAAA,gBAAlBlc,EAAMR,OAAK,GACrCya,EAAAA,mBAGQ,QAAA,CAHDU,SAAA,GAASN,MAAM,eAAgB7f,KAAMwF,EAAMxF,OAChDyf,EAAAA,mBAA8C,SAAA,CAArCE,IAAKna,EAAMzI,IAAMiD,KAAMwF,EAAMxF,+CAAQ,sDAEhD,4QC3BRsf,cAAAC,qBAkCM,MAlCNC,GAkCM,8aAlBJC,EAAAA,mBAiBM,MAjBNC,GAiBM,aAhBJD,EAAAA,mBAYM,MAAA,CAZDI,MAAM,iBAAe,CACxBJ,EAAAA,mBAUM,MAAA,CATJmB,MAAM,KACNpW,OAAO,KACP8W,QAAQ,YACRxhB,KAAK,OACLuhB,OAAO,eACP,eAAa,MAEb5B,EAAAA,mBAA2D,OAAA,CAArD8B,EAAE,mDACR9B,EAAAA,mBAAgC,SAAA,CAAxBkC,GAAG,KAAKC,GAAG,KAAKC,EAAE,cAG9BpC,EAAAA,mBAEO,OAFP+B,GAEOE,EAAAA,gBADFxC,EAAAxa,SAASod,QAAO,IAAM,KAAEJ,EAAAA,gBAAGxC,EAAAva,UAAUmd,QAAO,IAAA,oQC/BrDxC,cAAAC,qBAiBM,MAjBNC,GAiBM,EAhBJF,EAAAA,WAAA,GAAAC,EAAAA,mBAeQyB,WAAA,KAAAC,EAAAA,WAfmB/B,EAAA6C,MAAK,CAAjB3d,EAAM8W,mBAArB8G,EAAAA,YAeQxB,EAAAA,MAAAyB,EAAAA,OAAA,CAf2Bb,IAAKlG,EAAG2E,MAAM,YAAYqC,UAAU,wBACrE,IAEM,CAFK9d,EAAKE,OAAhBgb,EAAAA,YAAAC,EAAAA,mBAEM,MAFNG,GAEM,CADJa,cAAgEC,EAAAA,MAAA2B,EAAAA,MAAA,CAAzDxC,IAAKvb,EAAKE,MAAOkG,OAAO,MAAM4X,MAAA,GAAMvC,MAAM,6DAEnDU,EAAAA,YAUYC,EAAAA,MAAA6B,EAAAA,WAAA,CAVDxC,MAAM,gBAAc,mBAC7B,IAEa,CAFKzb,EAAKG,sBAAvByd,EAAAA,YAEaxB,EAAAA,MAAA8B,EAAAA,YAAA,OAFkBzC,MAAM,kCACnC,IAAiB,CAAd0C,EAAAA,gBAAAb,EAAAA,gBAAAtd,EAAKG,QAAM,6CAEJH,EAAKI,WAAjB8a,EAAAA,YAAAC,EAAAA,mBAES,OAFTiC,GAESE,EAAAA,gBADPtd,EAAKI,WAAS,gCAEPJ,EAAK8C,MAAdoY,EAAAA,YAAAC,EAAAA,mBAEI,IAFJkC,GAEIC,EAAAA,gBADCtd,EAAK8C,MAAI,wRCmCtB,MAAM+X,EAAQC,EAKRC,EAAOC,EAIPoD,EAAiB1c,EAAAA,SAAS,IAAMpH,EAAkBugB,EAAMtgB,wBAzD5D2gB,cAAAC,qBA8BM,MA9BNC,GA8BM,EA7BJF,EAAAA,WAAA,GAAAC,EAAAA,mBA4BMyB,WAAA,KAAAC,EAAAA,WA3BsBuB,EAAAxf,MAAc,CAAhCjE,EAAK0jB,mBADflD,EAAAA,mBA4BM,MAAA,CA1BH6B,IAAKqB,EACN5C,MAAM,gBAENP,aAAA,GAAAC,EAAAA,mBAsBOyB,EAAAA,SAAA,KAAAC,EAAAA,WApBqBliB,EAAG,CAArBD,EAAQuD,mBAFlB2f,EAAAA,YAsBOxB,EAAAA,MAAAkC,EAAAA,MAAA,CArBJC,SAAUzD,EAAAyD,SAEVvB,IAAK/e,EACLwd,uBAAO,CAAA,cAAA,2BACP7W,MAAK4Z,EAAAA,eAAEpC,EAAAA,MAAAhhB,EAAAghB,CAAuB1hB,EAAOW,QACtCojB,QAAQ,OACRC,QAAQ,KACP/D,gBAAQjgB,EAAOkB,mBAA6B,EAC5C+iB,cAAMjkB,EAAOkB,KAAkBlB,EAAO/B,SAAM,EAC5CgjB,QAAKiD,GA2CY,CAAClkB,IACL,WAAhBA,EAAOkB,MAAsBif,EAAM0D,UACrCxD,EAAK,eAAgBrgB,IA7CTmkB,CAAkBnkB,qCAS1B,IAES,CAFT2gB,EAAAA,mBAES,OAAA,CAFFzW,MAAK4Z,EAAAA,eAAEpC,EAAAA,MAAA5gB,EAAA4gB,CAA2B1hB,EAAOW,SAC9CiiB,kBAAA5iB,EAAOkG,OAAK,WARqB,SAAXlG,EAAOkB,WAApB,sBACT,IAIE,CAJFugB,cAIEC,EAAAA,MAAA0C,EAAAA,OAAA,CAHAC,KAAK,uBACJna,MAAK4Z,EAAAA,eAAEpC,EAAAA,MAAA3gB,EAAA2gB,CAAmB1hB,EAAOW,QAClC2jB,KAAK,4YC6BjB,MAAMnE,EAAQC,EAMRmE,EAAepD,EAAAA,KAAI,GAEnBqD,EAAYxd,EAAAA,SAAS,IAAMud,EAAargB,OAExCugB,EAAazd,EAAAA,SAAS,IACtBiG,MAAM2C,QAAQuQ,EAAMuE,aACfvE,EAAMuE,YAAYpmB,KACtBqmB,GACqB,QAApBA,EAAKre,YACgB,UAApBqe,EAAKre,YAA0B6Z,EAAMyE,SAKT,QAAjCzE,EAAMuE,YAAYpe,YACgB,UAAjC6Z,EAAMuE,YAAYpe,YAA0B6Z,EAAMyE,SAIjDC,EAAiB7d,EAAAA,SAAS,IAC1BiG,MAAM2C,QAAQuQ,EAAMuE,aACfvE,EAAMuE,YACVjkB,IAAKkkB,GAASA,EAAKviB,SAAWuiB,EAAKle,YACnCzC,KAAK,QAGHmc,EAAMuE,YAAYtiB,SAAW+d,EAAMuE,YAAYje,YAAc,IAGhEqe,EAAc,KAClBP,EAAargB,OAASqgB,EAAargB,oBAvFxBugB,EAAAvgB,OAAXsc,EAAAA,YAAAC,EAAAA,mBAuCM,MAvCNC,GAuCM,CAtCJe,cAqCQC,EAAAA,MAAAyB,EAAAA,OAAA,CArCDpC,MAAM,aAAaqC,UAAU,wBAElC,IA2BM,CA3BNzC,EAAAA,mBA2BM,MA3BNC,GA2BM,aA1BJD,EAAAA,mBAgBM,MAAA,CAhBDI,MAAM,wBAAsB,CAC/BJ,EAAAA,mBAaM,MAAA,CAbDI,MAAM,cAAY,CACrBJ,EAAAA,mBAWM,MAAA,CAVJmB,MAAM,KACNpW,OAAO,KACP8W,QAAQ,YACRxhB,KAAK,OACLuhB,OAAO,eACP,eAAa,MAEb5B,EAAAA,mBAEE,OAAA,CADA8B,EAAE,sEAIR9B,EAAAA,mBAA8C,SAAA,CAAtCI,MAAM,eAAc,mBAE9BU,cAQOC,EAAAA,MAAAkC,EAAAA,MAAA,CAPLU,KAAK,QACLP,QAAQ,QACRpjB,MAAM,UACNogB,MAAM,mBACLE,QAAO6D,sBAER,IAAiC,qCAA9BN,EAAAtgB,MAAS,OAAA,QAAA,aAKhBud,EAAAA,YAIoBC,EAAAA,MAAAqD,qBAAA,KAAA,mBAHlB,IAEM,CAFKP,EAAAtgB,OAAXsc,EAAAA,YAAAC,EAAAA,mBAEM,MAFNiC,GAEM,CADJ/B,EAAAA,mBAAiD,MAAjDgC,GAAiDC,EAAAA,gBAAvBiC,EAAA3gB,OAAc,mTCZlD,MAAMic,EAAQC,EAIR4E,EAAY7D,EAAAA,IAA8B,MAC1C8D,EAAe9D,EAAAA,IAAI,KAoBnB+D,EAAcle,EAAAA,SAAS,IACpB,+rBAde,CAAC5E,IAEvB,IAAI+iB,EAAY/iB,EAAQZ,QAAQ,mBAAoB,IAKpD,OAFA2jB,EAAYA,EAAU3jB,QAAQ,oBAAqB,IAE5C2jB,EAAUhhB,QAuCfihB,CAAgBjF,EAAM/d,07BAkCpBijB,EAAmB,KAEvBC,KAMIA,EAAe,KACnB,GAAIN,EAAU9gB,MACZ,IAEE,MAAMiW,EAAM6K,EAAU9gB,MAAMqhB,gBAC5B,GAAIpL,GAAOA,EAAIM,KAAM,CACnB,MAAM/O,EAAS8Z,KAAKC,IAAItL,EAAIM,KAAK9O,aAAcwO,EAAIM,KAAK7O,cACpDF,EAAS,IACXuZ,EAAa/gB,MAAQwH,EAAS,GAElC,CACF,OAASjN,GAET,GAOEinB,EAAiBC,IACrB,GAAIA,EAAMpgB,MAA4B,qBAApBogB,EAAMpgB,KAAKrE,KAA6B,CACxD,MAAM0kB,EAAYD,EAAMpgB,KAAKmG,OACzBka,GAAaA,EAAY,IAC3BX,EAAa/gB,MAAQshB,KAAKK,IAAID,EAAW,KAE7C,UAGFE,EAAAA,UAAU,KACRnU,OAAOoU,iBAAiB,UAAWL,KAGrCM,EAAAA,YAAY,KACVrU,OAAOsU,oBAAoB,UAAWP,aA7JtClF,cAAAC,qBAUM,MAVNC,GAUM,CATJC,EAAAA,mBAQM,MARNC,GAQM,CAPJD,EAAAA,mBAME,SAAA,SALI,YAAJQ,IAAI6D,EACHkB,OAAQhB,EAAAhhB,MACTiiB,QAAQ,gBACRpF,MAAM,cACLqF,OAAMf,qRCsFf,MAAMhF,EAAOC,GAKL+F,OAAQC,GVlCP,CAAED,OATOje,IACd,MAAMC,EAAYD,EAAK5G,QAAQ,iBAAkB,IAAI2C,OACrD,IAAKkE,EAAW,MAAO,GACvB,MAAMke,EAAUpH,GAAGkH,OAAOhe,GAC1B,OAAOuJ,GAAUmM,SAASwI,EAAS,CACjClO,SAAU,CAAC,aUwCXmO,EAAoBvoB,IACxBoiB,EAAK,cAAepiB,IAGhBkmB,EAAqBnkB,IACzBqgB,EAAK,eAAgBrgB,gCAzGrBygB,qBAiEM,MAAA,KAAA,CA9DgB,SAAZL,EAAA/Q,QAAQnO,oBADhBuf,EAAAA,mBAIE,MAAA,OAFAM,MAAM,eACNtW,UAAQiX,EAAAA,MAAA4E,EAAA5E,CAAWtB,EAAA/Q,QAAQjN,sBAKJ,UAAZge,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAIEuD,GAAA,OAFCxoB,IAAKmiB,EAAA/Q,QAAQjN,QACbskB,YAAYF,oBAImB,UAAZpG,EAAA/Q,QAAQnO,oBAA9BgiB,EAAAA,YAAyEyD,GAAA,OAAxB1oB,IAAKmiB,EAAA/Q,QAAQjN,0BAIrC,YAAZge,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAGE0D,GAAA,OADC3oB,IAAKmiB,EAAA/Q,QAAQjN,0BAKS,UAAZge,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAGE2D,GAAA,OADC,cAAazG,EAAA/Q,QAAQjN,kCAKC,aAAZge,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAKE4D,GAAA,OAHClhB,SAAUwa,EAAA/Q,QAAQjN,QAAQwD,SAC1BC,UAAWua,EAAA/Q,QAAQjN,QAAQyD,UAC3B,eAAcua,EAAA2G,8DAKQ,SAAZ3G,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAGE8D,GAAA,OADC/D,MAAO7C,EAAA/Q,QAAQjN,4BAKO,YAAZge,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAKE+D,GAAA,OAHCpnB,QAASugB,EAAA/Q,QAAQjN,QACjByhB,SAAUzD,EAAA8G,eACVC,cAAchD,mCAKQ,YAAZ/D,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAKEkE,GAAA,OAHC,eAAchH,EAAA/Q,QAAQjN,QACtBkE,WAAY8Z,EAAA9Z,WACZ,WAAU8Z,EAAAwE,2DAKY,SAAZxE,EAAA/Q,QAAQnO,oBADrBgiB,EAAAA,YAGEmE,GAAA,OADCjlB,QAASge,EAAA/Q,QAAQjN,gSC/DtB8gB,EAAAA,YAeaoE,aAAA,CAfD7iB,KAAK,OAAO8iB,KAAK,6BAC3B,IAaM,CAbKnH,EAAAoH,WAAXhH,EAAAA,YAAAC,EAAAA,mBAaM,MAbNC,GAaM,CAZJC,EAAAA,mBAWM,MAXNC,GAWM,CAVJa,cAMEC,EAAAA,MAAA+F,EAAAA,mBAAA,CALAC,cAAA,GACCpD,KAAM,GACNxC,MAAO,EACRnhB,MAAM,UACNogB,MAAM,oBAERJ,EAAAA,mBAEO,OAFP+B,GAEOE,EAAAA,gBADFxC,EAAAuH,SAAO,kRCXlBzE,EAAAA,YAaaoE,aAAA,CAbD7iB,KAAK,OAAO8iB,KAAK,6BAC3B,IAWM,CAXKnH,EAAAoH,WAAXhH,EAAAA,YAAAC,EAAAA,mBAWM,MAXNC,GAWM,CAVJC,EAAAA,mBASM,MATNC,GASM,CARJa,cAMEC,EAAAA,MAAA+F,EAAAA,mBAAA,CALAC,cAAA,GACCpD,KAAM,GACNxC,MAAO,EACRnhB,MAAM,UACNogB,MAAM,0BAER6G,EAAA,KAAAA,EAAA,GAAAjH,EAAAA,mBAA+D,OAAA,CAAzDI,MAAM,yBAAwB,wBAAoB,mRCV9DmC,EAAAA,YAaaoE,aAAA,CAbD7iB,KAAK,OAAO8iB,KAAK,6BAC3B,IAWM,CAXKnH,EAAAoH,WAAXhH,EAAAA,YAAAC,EAAAA,mBAWM,MAXNC,GAWM,CAVJC,EAAAA,mBASM,MATNC,GASM,CARJa,cAMEC,EAAAA,MAAA+F,EAAAA,mBAAA,CALAC,cAAA,GACCpD,KAAM,GACNxC,MAAO,EACRnhB,MAAM,UACNogB,MAAM,0BAER6G,EAAA,KAAAA,EAAA,GAAAjH,EAAAA,mBAA4D,MAAA,CAAvDI,MAAM,yBAAwB,uBAAmB,uNCI9D,MAAM8G,EAAkBC,EAAAA,WAAsBD,4CAd5C3E,EAAAA,YASaoE,aAAA,CATD7iB,KAAK,OAAO8iB,KAAK,6BAC3B,IAOM,CAPKnH,EAAAoH,WAAXhH,EAAAA,YAAAC,EAAAA,mBAOM,MAPNC,GAOM,CANJe,cAImBC,EAAAA,MAAAmG,GAAA,CAHjB9G,MAAM,gBACNe,MAAM,MACN5gB,KAAK,mBAEP0mB,EAAA,KAAAA,EAAA,GAAAjH,EAAAA,mBAA8D,OAAA,CAAxDI,MAAM,yBAAwB,uBAAmB,oNCQ7D,MAAM8G,EAAkBC,EAAAA,WAAsBD,4CAf5C3E,EAAAA,YAUaoE,aAAA,CAVD7iB,KAAK,OAAO8iB,KAAK,6BAC3B,IAQM,CARKnH,EAAAoH,WAAXhH,EAAAA,YAAAC,EAAAA,mBAQM,MARNC,GAQM,CAPJe,cAKmBC,EAAAA,MAAAmG,GAAA,CAJjB9G,MAAM,eACNe,MAAM,MACNpW,OAAO,MACPxK,KAAK,UAEP0mB,EAAA,KAAAA,EAAA,GAAAjH,EAAAA,mBAA6D,OAAA,CAAvDI,MAAM,yBAAwB,sBAAkB,wdCe5D,MAAMZ,EAAQC,EAMRC,EAAOC,EAGPyH,EAAoB5G,EAAAA,IAAwB,OAG5C6G,aAAEA,EAAAC,aAAcA,EAAA1H,UAAcA,EAAA2H,WAAWA,GC9BxC,WACL,MAAMF,EAAe7G,EAAAA,KAAI,GACnB8G,EAAe9G,EAAAA,IAAI,IAqBzB,MAAO,CACL6G,eACAC,eACA1H,UAnBiB4H,IACjBF,EAAa/jB,MAAQikB,EACrBH,EAAa9jB,OAAQ,GAkBrBgkB,WAZiB,KACjBF,EAAa9jB,OAAQ,EAErB6G,WAAW,KACTkd,EAAa/jB,MAAQ,IACpB,MASP,CDC8DkkB,GACxDC,EAAevhB,EAAiBE,EAAAA,SAAS,IAAMmZ,EAAMpZ,eACrDygB,UACJA,EAAAc,eACAA,EAAAC,eACAA,EAAAC,cACAA,EAAAC,kBACAA,EAAAC,kBACAA,GpBmEK,SAA0B3hB,GAC/B,MAAMygB,EAAYrG,EAAAA,KAAI,GAChBmH,EAAiBnH,EAAAA,KAAI,GACrBoH,EAAiBpH,EAAAA,KAAI,GACrBqH,EAAgBrH,EAAAA,KAAI,GACpBsH,EAAoBtH,EAAAA,KAAI,GAGxBwH,EAAmB3hB,EAAAA,SAAS,IACzBmB,EAAAA,MAAMpB,IA6Hf,OAzHA6hB,EAAAA,MACED,EACCE,IACC,IAAKA,EAEH,YADArB,EAAUtjB,OAAQ,GAKpB,MAAM4kB,EACJ9f,GACE6f,EACAhgB,EAAyB1H,MACzB0H,EAAyBzH,MAE3B4H,GACE6f,EACAhgB,EAA0B1H,MAC1B0H,EAA0BzH,MAE5B4H,GACE6f,EACAhgB,EAA2B1H,MAC3B0H,EAA2BzH,MAE7B4H,GACE6f,EACAhgB,EAAwB1H,MACxB0H,EAAwBzH,MAE1B4H,GACE6f,EACAhgB,EAA2B1H,MAC3B0H,EAA2BzH,MAE7B4H,GACE6f,EACAhgB,EAA4B1H,MAC5B0H,EAA4BzH,MAE9B4H,GACE6f,EACAhgB,EAAwB1H,MACxB0H,EAAwBzH,KAG5BomB,EAAUtjB,MAAQ4kB,GAEpB,CAAEC,WAAW,IAIfH,EAAAA,MACED,EACCE,IACCP,EAAepkB,MAAQmF,GACrBwf,EACAhgB,EAAuB1H,MACvB0H,EAAuBzH,IACvByH,EAAuBC,SAG3B,CAAEigB,WAAW,IAIfH,EAAAA,MACED,EACCE,IACC,MAAMG,EAAe3f,GACnBwf,EACAhgB,EAAuB1H,MACvB0H,EAAuBzH,IACvByH,EAAuBC,QAEnBmgB,EAAiB5f,GACrBwf,EACAhgB,EAAyB1H,MACzB0H,EAAyBzH,IACzByH,EAAyBC,QAE3Byf,EAAerkB,MAAQ8kB,GAAgBC,GAEzC,CAAEF,WAAW,IAIfH,EAAAA,MACED,EACCE,IACCL,EAActkB,MAAQmF,GACpBwf,EACAhgB,EAAsB1H,MACtB0H,EAAsBzH,IACtByH,EAAsBC,SAG1B,CAAEigB,WAAW,IAIfH,EAAAA,MACED,EACCE,IACCJ,EAAkBvkB,MAAQmF,GACxBwf,EACAhgB,GAAqB1H,MACrB0H,GAAqBzH,IACrByH,GAAqBC,SAGzB,CAAEigB,WAAW,IAUR,CACLvB,YACAc,iBACAC,iBACAC,gBACAC,oBACAC,kBAVyBQ,GAClBngB,GAAiBmgB,IAAgBngB,GAAiB,mBAW7D,CoBhNIogB,CAAiBniB,EAAAA,SAAS,IAAMmZ,EAAMpZ,cAGpCqiB,EAAapiB,EAAAA,SAAS,IACnBmZ,EAAMkJ,gBAAgBnnB,OAAQonB,GAASA,GAAQtrB,EAAYsrB,KAG9DC,EAAgBviB,EAAAA,SAAS,IACtBmZ,EAAMkJ,gBAAgBnnB,OAAQonB,GAASA,IAAStrB,EAAYsrB,KAG/DpC,EAAiBlgB,EAAAA,SAAS,IACR,cAAfmZ,EAAMqJ,OAAyBrJ,EAAMsJ,eAAiBC,KAGzDA,EAAc,IACU,UAArBvJ,EAAM7Z,WAITqjB,EAAuB3iB,EAAAA,SAAS,KACpC,MAAMgJ,EAAOmQ,EAAMpZ,aAAe,GAGlC,OACEiJ,EAAK/M,SAAS,mCACb+M,EAAK/M,SAAS,+BAER,mBAGP+M,EAAK/M,SAAS,oCACb+M,EAAK/M,SAAS,gCAER,oBAGP+M,EAAK/M,SAAS,iCACb+M,EAAK/M,SAAS,6BAER,iBAGP+M,EAAK/M,SAAS,oCACb+M,EAAK/M,SAAS,gCAER,oBAGP+M,EAAK/M,SAAS,qCACb+M,EAAK/M,SAAS,iCAER,qBAGP+M,EAAK/M,SAAS,iCACb+M,EAAK/M,SAAS,6BAER,iBAGP+M,EAAK/M,SAAS,0BACb+M,EAAK/M,SAAS,sBAER,kBAGF,OAIH2mB,EAA2B5iB,EAAAA,SAAS,KACxC,GAAIwgB,EAAUtjB,MAAO,CACnB,MAAM2lB,EAAaF,EAAqBzlB,MACxC,OAAI2lB,EACKnB,EAAkBmB,GAEpB,cACT,CACA,MAAO,kBAIHC,eAAEA,GnBED,SACLC,EACAC,GAKA,MAAMF,EAAiB,KACrBG,EAAAA,SAAS,KACFF,EAAa7lB,OAAU8lB,KAETD,EAAa7lB,MAAMgmB,iBAAiB,OAC5CnqB,QAAS4D,IAClBgG,GAAkBhG,QAUxB,OAJAmiB,EAAAA,UAAU,KACRgE,MAGK,CACLA,iBAEJ,CmB5B2BK,CACzBpC,EACA,IAAqB,SAAf5H,EAAMqJ,MAIdZ,EAAAA,MAAMP,EAAc,KAClByB,MAMF,MAAM3F,EAAoBxZ,MAAO3K,IAC/B,GAAoB,WAAhBA,EAAOkB,OAAsBgmB,EAAehjB,MAC9C,IACEmc,EAAK,eAAgB,CACnBsH,QAAS3nB,EAAOkG,MAChBkkB,WAAYpqB,EACZkB,KAAM,iBAEV,OAASxB,GAET,GAOE8mB,EAAoBvoB,IACxBsiB,EAAUtiB,sEAKV0iB,EAAAA,mBA2DM,MA3DND,GA2DM,CA1DJC,EAAAA,mBAyDM,MAAA,SAzDG,oBAAJQ,IAAI4G,EAAoBhH,MAAM,qBAEjCP,EAAAA,WAAA,GAAAC,EAAAA,mBAWWyB,EAAAA,SAAA,KAAAC,aAXuBT,EAAAA,MAAA2G,GAAY,CAA5B1f,EAAMpF,wDAA8BA,GAAK,CAGhDme,EAAAA,MAAA9a,GAAA8a,CAAc/Y,EAAKzH,iDAD5BgiB,EAAAA,YAQEmH,GAAA,OANChb,QAAS1G,EACT,kBAAiBue,EAAAhjB,MACjBoC,WAAY6Z,EAAM7Z,WAClB,WAAUojB,IACVY,aAAa9D,EACbW,cAAchD,+EAKnB1C,EAAAA,YAGE8I,GAAA,CAFC/C,UAAW9F,EAAAA,MAAA8F,GACXG,QAASiC,EAAA1lB,uCAEZud,EAAAA,YAA4C+I,GAAA,CAA7BhD,UAAW9F,QAAA4G,IAAc,KAAA,EAAA,CAAA,cACxC7G,EAAAA,YAA4CgJ,GAAA,CAA7BjD,UAAW9F,QAAA6G,IAAc,KAAA,EAAA,CAAA,cACxC9G,EAAAA,YAA0CiJ,GAAA,CAA5BlD,UAAW9F,QAAA8G,IAAa,KAAA,EAAA,CAAA,cACtC/G,EAAAA,YAA6CkJ,GAAA,CAAhCnD,UAAW9F,QAAA+G,IAAiB,KAAA,EAAA,CAAA,cAItBtI,EAAMkJ,iBAA6BlJ,EAAMkJ,gBAAgBpqB,OAAM,GAA4B,SAAVkhB,EAAMqJ,MAD1GhJ,EAAAA,YAAAC,EAAAA,mBA8BM,MA9BNG,GA8BM,kBArBJH,EAAAA,mBAMEyB,EAAAA,SAAA,KAAAC,EAAAA,WALeiH,EAAAllB,MAARolB,kBADT7I,EAAAA,mBAME,MAAA,CAJC6B,IAAKgH,EACLzI,IAAKyI,EACNvI,MAAM,4GACLE,QAAKiD,GAAExC,QAAAnB,EAAAmB,CAAU4H,wCAIpB7I,EAAAA,mBAWOyB,EAAAA,SAAA,KAAAC,EAAAA,WAVUoH,EAAArlB,MAARolB,kBADTpG,EAAAA,YAWOxB,EAAAA,MAAAkC,EAAAA,MAAA,CATJtB,IAAKgH,EACNvI,MAAM,sBACNgD,QAAQ,QACRpjB,MAAM,WACLsjB,KAAMqF,EACPrJ,OAAO,SACPC,IAAI,0CAEJ,IAA8B,CAA3BuD,EAAAA,gBAAAb,EAAAA,gBAAAlB,EAAAA,MAAAhjB,EAAAgjB,CAAmB4H,IAAI,wEAMlC7H,cA4BUC,EAAAA,MAAAkJ,EAAAA,SAAA,YA3BClJ,EAAAA,MAAAsG,mDAAAA,EAAY9jB,MAAAggB,EAAA,MACrB2G,WAAA,GACA9J,MAAM,cACN+J,MAAM,sBACL7J,QAAOS,EAAAA,MAAAwG,GACR/d,WAAW,sCAEX,IAgBM,CAhBNwW,EAAAA,mBAgBM,MAAA,CAhBDI,MAAM,kBAAmBE,QAAK2G,EAAA,KAAAA,EAAA,GAAAmD,EAAAA,sBAAOrJ,EAAAA,MAAAwG,IAAAxG,EAAAA,MAAAwG,EAAAxG,IAAA1U,GAAU,CAAA,4BAClD2T,EAAAA,mBAcS,SAAA,CAdDI,MAAM,eAAe,aAAW,gBACtCJ,EAAAA,mBAYM,MAAA,CAXJmB,MAAM,KACNpW,OAAO,KACP8W,QAAQ,YACRxhB,KAAK,OACLuhB,OAAO,eACP,eAAa,MACb,iBAAe,QACf,kBAAgB,UAEhB5B,EAAAA,mBAA2C,OAAA,CAArCqK,GAAG,KAAKC,GAAG,IAAIC,GAAG,IAAIC,GAAG,OAC/BxK,EAAAA,mBAA2C,OAAA,CAArCqK,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAAKC,GAAG,kBAIrCxK,EAAAA,mBAEM,MAFNgC,GAEM,CADJlB,cAAwDC,EAAAA,MAAA2B,EAAAA,MAAA,CAAjDxC,IAAKa,EAAAA,MAAAuG,GAAclH,MAAM,cAAcqK,QAAA,0InC5I7C,SAA0BhjB,GAC/B,OAAOA,EAAK5G,QAAQ,iBAAkB,IAAI2C,MAC5C,kBAXO,SAAuBZ,GAC5B,MAAO,iBAAiBA,KAAS8nB,KAAKC,SAAS9F,KAAK+F,SACjDtd,SAAS,IACTud,OAAO,EAAG,IACf,yLAYO,SAA2BppB,GAChC,MAAO,6DAA6DoH,KAClEpH,EAEJ,gCqCxE2B,CACzBqC,KAAM,2BACNgnB,eAAA,EACA1kB,YAAa,+DACb2kB,OAAQ,uBAPa","x_google_ignoreList":[18]}